{
    "form": {
        "definitions": {
            "contactg2": {
                "type": "object",
                "title": "Contact Intervention",
                "properties": {
                    "civilite": {
                        "type": "string",
                        "title": "Civilite",
                        "maxLength": 256
                    },
                    "nom": {
                        "type": "string",
                        "title": "Nom",
                        "maxLength": 256
                    },
                    "prenom": {
                        "type": "string",
                        "title": "Prénom",
                        "maxLength": 256
                    },
                    "telfixe": {
                        "type": "string",
                        "title": "N° fixe",
                        "maxLength": 256
                    },
                    "telmob": {
                        "type": "string",
                        "title": "N° mobile",
                        "maxLength": 256
                    },
                    "email": {
                        "type": "string",
                        "title": "Email",
                        "maxLength": 256
                    },
                    "adresse": {
                        "type": "string",
                        "title": "Adresse complète",
                        "maxLength": 256
                    }
                }
            },
            "contact": {
                "type": "object",
                "title": "contact",
                "abstract": "${value.type === 'morale' ? value.rsociale +' : ' : ''}${value.civilite} ${value.prenom} ${value.nom}",
                "properties": {
                    "type": {
                        "type": "string",
                        "enum": [
                            "physique",
                            "morale"
                        ],
                        "default": "physique"
                    },
                    "fonction": {
                        "$ref": "#/definitions/e_fonction"
                    },
                    "autrefct": {
                        "type": "string",
                        "title": "Autre",
                        "maxLength": 256,
                        "visible": "parent.fonction === 'Autre'"
                    },
                    "civilite": {
                        "type": "string",
                        "title": "Civilité",
                        "enum": [
                            "M.",
                            "Mme",
                            "Maitre",
                            "Mme ou M."
                        ]
                    },
                    "nom": {
                        "type": "string",
                        "title": "Nom",
                        "maxLength": 256
                    },
                    "prenom": {
                        "type": "string",
                        "title": "Prénom",
                        "maxLength": 256
                    },
                    "nosiret": {
                        "type": "string",
                        "title": "No SIRET",
                        "maxLength": 256
                    },
                    "rsociale": {
                        "type": "string",
                        "title": "Raison Sociale",
                        "maxLength": 256
                    },
                    "notel": {
                        "type": "string",
                        "title": "No tél. fixe",
                        "maxLength": 10,
                        "pattern": "^[0-9]*$"
                    },
                    "nomob": {
                        "type": "string",
                        "title": "No tél. mobile",
                        "maxLength": 10,
                        "pattern": "^[0-9]*$"
                    },
                    "email": {
                        "type": "string",
                        "format": "email",
                        "title": "Courriel"
                    },
                    "adresse": {
                        "$ref": "#/definitions/adresse"
                    }
                },
                "required": [
                    "type",
                    "nom"
                ]
            },
            "adresse": {
                "type": "object",
                "title": "adresse",
                "properties": {
                    "type": {
                        "type": "string",
                        "enum": [
                            "domicile",
                            "travail",
                            "vacances",
                            "facturation",
                            "autre"
                        ]
                    },
                    "numero": {
                        "type": "integer",
                        "inline": 3,
                        "title": "no"
                    },
                    "rep": {
                        "type": "string",
                        "title": "rép.",
                        "inline": 3,
                        "enum": ["bis", "ter", "quater",
                            "quinquies",
                            "sexies",
                            "septies",
                            "octies",
                            "nonies",
                            "decies"
                        ]
                    },
                    "voie": {
                        "type": "string"
                    },
                    "complement": {
                        "type": "string"
                    },
                    "commune": {
                        "type": "string"
                    },
                    "codepost": {
                        "type": "string", "pattern": "[0-9]{5}"
                    }
                },
                "required": [
                    "numero",
                    "voie",
                    "codepost",
                    "commune"
                ]
            },
            "e_ouinoninc": {
                "type": "boolean",
                "title": "Boolean enum",
                "oneOf": [
                    {
                        "const": true,
                        "title": "oui"
                    },
                    {
                        "const": false,
                        "title": "non"
                    },
                    {
                        "const": null,
                        "title": "inconnu"
                    }
                ]
            },
            "e_fonction": {
                "type": "string",
                "default": "Fonction",
                "enum": [
                    "Maitre d'œuvre",
                    "Bureau d'étude",
                    "Promoteur",
                    "Locataire",
                    "Propriétaire",
                    "Gestionnaire (syndic,…)",
                    "Agence immobilière",
                    "Notaire",
                    "Autre"
                ]
            },
            "e_motifvisite": {
                "type": "string",
                "title": "Motif de la visite",
                "enum": [
                    "Mutation immobilière",
                    "Campagne contractuelle",
                    "Demande ponctuelle",
                    "Branchement neuf"
                ]
            },
            "e_typevisite": {
                "type": "string",
                "title": "Type de visite",
                "enum": [
                    "Visite initiale",
                    "Contre-visite",
                    "Visite-conseil"
                ]
            },
            "e_typeequip": {
                "type": "string",
                "title": "Type equipement",
                "enum": [
                    "Grille",
                    "Siphon de sol",
                    "Descente de goutièere",
                    "Autre"
                ]
            },
            "e_typepropriete": {
                "type": "string",
                "title": "Type de propriété",
                "enum": [
                    "Maison",
                    "Appartement",
                    "Immeuble d'habitation",
                    "Local professionnel non commercial",
                    "",
                    "Local professionnel commercial",
                    "Bâtiment communal",
                    "Squat",
                    "Etablissement d'enseignement, de formation",
                    "Etablissement de soin, actions sociales",
                    "Site culturel",
                    "Tourisme et hébergement",
                    "Equipement sportif, stade",
                    "Espace vert, cimetière",
                    "Piscine",
                    "Site industriel",
                    "Exploitation agricole",
                    "Aéroport, gare",
                    "Port",
                    "Forain, navire",
                    "Bouche à incendie",
                    "Borne de puisage",
                    "Vente d'eau en gros",
                    "Chantier",
                    "Prestataire de facturation",
                    "Type de site 120 m3",
                    "Autre"
                ]
            },
            "e_actnondom": {
                "type": "string",
                "title": "Activité non domestique",
                "enum": [
                    "Restauration",
                    "Parking",
                    "Pressing",
                    "Station service",
                    "Garage automobile",
                    "Lavage auto"
                ]
            }
        },
        "type": "object",
        "title": "Controle de conformité",
        "properties": {
            "numitvg2": {
                "type": "string",
                "title": "N° intervention",
                "readonly": true,
                "group": "Administratif",
                "tab": "tab 1"
            },
            "dateprev": {
                "type": "string",
                "format": "date-time",
                "title": "date prévue",
                "readonly": true,
                "group": "Administratif",
                "tab": "tab 1"
            },
            "dateitv": {
                "type": "string",
                "format": "date-time",
                "title": "date intervention",
                "readonly": true,
                "group": "Administratif",
                "tab": "tab 1"
            },
            "contrat": {
                "type": "string",
                "title": "Code contrat",
                "readonly": true,
                "group": "Administratif",
                "tab": "tab 1"
            },
            "contrat_l": {
                "type": "string",
                "title": "Nom contrat",
                "readonly": true,
                "group": "Administratif",
                "tab": "tab 1"
            },
            "typeitv": {
                "type": "string",
                "title": "type controle",
                "readonly": true,
                "group": "Administratif",
                "tab": "tab 1"
            },
            "motifvisite": {
                "$ref": "#/definitions/e_motifvisite",
                "group": "Administratif",
                "readonly": true,
                "tab": "tab 1"
            },
            "typevisite": {
                "$ref": "#/definitions/e_typevisite",
                "title": "type visite",
                "readonly": true,
                "group": "Administratif",
                "tab": "tab 1"
            },
            "agent": {
                "type": "string",
                "title": "Agent en charge du controle",
                "readonly": "true",
                "group": "Administratif",
                "tab": "tab 1"
            },
            "refnospanc": {
                "type": "string",
                "title": "ref./no. SPANC",
                "group": "Administratif",
                "tab": "tab 1"
            },
            "installateur": {
                "type": "string",
                "title": "Installateur",
                "group": "Administratif",
                "tab": "tab 1"
            },
            "typepdc": {
                "$ref": "#/definitions/e_typepropriete",
                "group": "PDC",
                "tab": "tab 1"
            },
            "typepropriete": {
                "$ref": "#/definitions/e_typepropriete",
                "group": "PDC",
                "tab": "tab 1"
            },
            "nondomest": {
                "type": "boolean",
                "title": "Collecte d'effluents non domestique",
                "default": null,
                "group": "PDC",
                "tab": "tab 1"
            },
            "actnondom": {
                "type": "array",
                "title": "Act. non domestique",
                "items": {
                    "$ref": "#/definitions/e_actnondom"
                },
                "group": "PDC",
                "tab": "tab 1",
                "visible": "$('#/nondomest')"
            },
            "nboccupant": {
                "type": "integer",
                "title": "Nbr. occupant",
                "maximum": 100,
                "minimum": 0,
                "group": "PDC",
                "tab": "tab 1"
            },
            "adrpdc": {
                "$ref": "#/definitions/adresse",
                "title": "Adr. PDC",
                "collapsed": "true",
                "group": "PDC",
                "tab": "tab 1"
            },
            "contactg2": {
                "$ref": "#/definitions/contactg2",
                "group": "Intervention",
                "tab": "tab 1"
            },
            "contacts": {
                "type": "array",
                "title": "Liste",
                "items": {
                    "$ref": "#/definitions/contact"
                },
                "group": "Contacts",
                "tab": "tab 1"
            },
            "contactvis": {
                "type": "string",
                "title": "Contact présent",
                "enum": [
                    "A",
                    "B",
                    "C",
                    "D",
                    "E",
                    "F"
                ],
                "group": "Contacts",
                "tab": "tab 1"
            },
            "contactdest": {
                "type": "string",
                "title": "Destinataire rapport",
                "enum": [
                    "A",
                    "B",
                    "C",
                    "D",
                    "E",
                    "F"
                ],
                "group": "Contacts",
                "tab": "tab 1"
            },
            "documents": {
                "type": "string",
                "format": "doc",
                "title": "Rapport précédent",
                "group": "Documents",
                "tab": "tab 1"
            },
            "parcelles": {
                "type": "array",
                "items": {
                    "type": "string"
                },
                "title": "N° de parcelle cadastrale",
                "group": "Parcelles",
                "tab": "tab 1"
            },
            "nopc": {
                "type": "string",
                "title": "N° de Permis de construire",
                "group": "Parcelles",
                "tab": "tab 1"
            },
            "anneepc": {
                "type": "integer",
                "title": "Année PC",
                "minimum": 1950,
                "maximum": 2100,
                "group": "Parcelles",
                "tab": "tab 1"
            },
            "certifurb": {
                "type": "string",
                "title": "Certificat d'urbanisme",
                "group": "Parcelles",
                "tab": "tab 1"
            },
            "nbappart": {
                "type": "integer",
                "title": "Nombre d'appartements",
                "minimum": 0,
                "maximum": 100,
                "group": "Parcelles",
                "tab": "tab 1"
            },
            "refextcol": {
                "type": "string",
                "title": "Référence externe(collectivité)",
                "group": "Parcelles",
                "tab": "tab 1"
            },
            "urbapj": {
                "type": "string",
                "title": "Pièces jointes",
                "group": "Parcelles",
                "tab": "tab 1"
            },
            "commentcli": {
                "type": "string",
                "title": "Commentaire client",
                "maxLength": 1000
            },
            "commentgen": {
                "type": "string",
                "title": "Commentaire interne",
                "maxLength": 1000
            },
            "taches": {
                "type": "array",
                "items": {
                    "type": "string",
                    "enum": [
                        "A",
                        "B",
                        "C",
                        "D",
                        "E",
                        "F"
                    ]
                },
                "title": "Liste",
                "group": "Contrôles"
            },
            "contactsign": {
                "type": "string",
                "title": "Contact Signataire",
                "enum": [
                    "A",
                    "B",
                    "C",
                    "D",
                    "E",
                    "F"
                ],
                "group": "Signature"
            },
            "juridic1": {
                "type": "string",
                "title": "Champs juridique 1",
                "group": "Signature"
            },
            "juridic2": {
                "type": "string",
                "title": "Champs juridique 2",
                "group": "Signature"
            },
            "juridic3": {
                "type": "string",
                "title": "Champs juridique 3",
                "group": "Signature"
            },
            "date": {
                "type": "string",
                "format": "date-time",
                "title": "Date",
                "group": "Signature",
                "readonly": "true"
            },
            "datesign": {
                "type": "string",
                "format": "date-time",
                "title": "Date signature",
                "group": "Signature",
                "readonly": "true"
            },
            "signature": {
                "type": "string",
                "format": "signature",
                "title": "Une signature",
                "group": "Signature"
            },
            "confeval": {
                "type": "string",
                "title": "Conformité evalué",
                "enum": [
                    "Conforme",
                    "Non conforme",
                    "Diagnostic impossible"
                ],
                "readonly": "true",
                "group": "Conformité"
            },
            "confcompl1": {
                "type": "string",
                "title": "Complément d'info.",
                "enum": [
                    "Avec réserves",
                    "Par dérogation",
                    "Sans dysfonctionnement",
                    "Sans motif",
                    "Avec travaux obligatoires",
                    "Avec travaux facultatifs"
                ],
                "group": "Conformité"
            },
            "confcomment1": {
                "type": "string",
                "title": "Commentaire conformité",
                "maxLength": 1000,
                "group": "Conformité"
            },
            "conformite": {
                "type": "string",
                "title": "Conformité finale",
                "enum": [
                    "Conforme",
                    "Non conforme",
                    "Diagnostic impossible"
                ],
                "group": "Conformité"
            },
            "confcompl": {
                "type": "string",
                "title": "Complément d'info.",
                "enum": [
                    "Avec réserves",
                    "Par dérogation",
                    "Sans dysfonctionnement",
                    "Sans motif",
                    "Avec travaux obligatoires",
                    "Avec travaux facultatifs"
                ],
                "group": "Conformité"
            },
            "confcomment": {
                "type": "string",
                "title": "Commentaire conformité",
                "maxLength": 1000,
                "group": "Conformité"
            }
        },
        "required": ["numitvg2", "dateprev", "dateitv", "contrat", "contrat_l","motifvisite","typevisite"]
    },
    "data" : {
        "numitvg2": "59-123456789/1",
        "dateprev": "2021-02-12T14:00:00Z",
        "dateitv": "2021-02-12T14:00:00Z",
        "contrat": "234567",
        "contrat_l": "SEE Craponne sur Arzon",
        "typeitv": "Controle de conformité EU",
        "motifvisite": "Branchement neuf",
        "typevisite": "Visite initiale",
        "agent": "Jean Duchesnes",
        "typepropriete": "",
        "nondomest": false,
        "actnondom": [],
        "adrpdc": {
            "numero": 12,
            "rep": "bis",
            "voie": "Rue Victor HUGO",
            "complement": "",
            "commune": "Craponne",
            "codepost": "43500"
        },
        "contactg2": { "nom": "Marcel"},
        "contacts": [
            {
                "type": "physique",
                "fonction": "Propriétaire",
                "autrefct": "",
                "civilite": "Mme",
                "nom": "Nevers",
                "prenom": "Jeanne",
                "nosiret": "",
                "rsociale": "",
                "notel": "0689542552",
                "nomob": "0789542552",
                "email": "jeanne.nevers@gmail.com",
                "adresse": {
                    "numero": 3,
                    "rep": "bis",
                    "voie": "Rue Pasteur",
                    "complement": "",
                    "commune": "Gratibus",
                    "codepost": "43500"
                }
            },
            {
                "type": "morale",
                "fonction": "Notaire",
                "autrefct": "",
                "civilite": "Maitre",
                "nom": "Ventoux",
                "prenom": "Yves",
                "nosiret": "12345678912335",
                "rsociale": "Cabinet Ventoux & Associés ",
                "notel": "0123456789",
                "nomob": "0618792451",
                "email": "yves.ventoux@cabinetventoux.com",
                "adresse": {
                    "numero": 3,
                    "rep": "bis",
                    "voie": "Rue Pasteur",
                    "complement": "",
                    "commune": "Gratibus",
                    "codepost": "43500"
                }
            }
        ]
    }
}
