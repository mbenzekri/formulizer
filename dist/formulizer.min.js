function t(t,e,i,r){for(var s,n=arguments.length,o=n<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,i):r,a=t.length-1;a>=0;a--)(s=t[a])&&(o=(n<3?s(o):n>3?s(e,i,o):s(e,i))||o);return n>3&&o&&Object.defineProperty(e,i,o),o}"function"==typeof SuppressedError&&SuppressedError;
/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */
const e=t=>(e,i)=>{void 0!==i?i.addInitializer((()=>{customElements.define(t,e)})):customElements.define(t,e)}
/**
 * @license
 * Copyright 2019 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */,i=globalThis,r=i.ShadowRoot&&(void 0===i.ShadyCSS||i.ShadyCSS.nativeShadow)&&"adoptedStyleSheets"in Document.prototype&&"replace"in CSSStyleSheet.prototype,s=Symbol(),n=new WeakMap;let o=class{constructor(t,e,i){if(this._$cssResult$=!0,i!==s)throw Error("CSSResult is not constructable. Use `unsafeCSS` or `css` instead.");this.cssText=t,this.t=e}get styleSheet(){let t=this.o;const e=this.t;if(r&&void 0===t){const i=void 0!==e&&1===e.length;i&&(t=n.get(e)),void 0===t&&((this.o=t=new CSSStyleSheet).replaceSync(this.cssText),i&&n.set(e,t))}return t}toString(){return this.cssText}};const a=(t,...e)=>{const i=1===t.length?t[0]:e.reduce(((e,i,r)=>e+(t=>{if(!0===t._$cssResult$)return t.cssText;if("number"==typeof t)return t;throw Error("Value passed to 'css' function must be a 'css' function result: "+t+". Use 'unsafeCSS' to pass non-literal values, but take care to ensure page security.")})(i)+t[r+1]),t[0]);return new o(i,t,s)},u=r?t=>t:t=>t instanceof CSSStyleSheet?(t=>{let e="";for(const i of t.cssRules)e+=i.cssText;return(t=>new o("string"==typeof t?t:t+"",void 0,s))(e)})(t):t
/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */,{is:c,defineProperty:h,getOwnPropertyDescriptor:l,getOwnPropertyNames:f,getOwnPropertySymbols:d,getPrototypeOf:p}=Object,m=globalThis,$=m.trustedTypes,g=$?$.emptyScript:"",b=m.reactiveElementPolyfillSupport,y=(t,e)=>t,v={toAttribute(t,e){switch(e){case Boolean:t=t?g:null;break;case Object:case Array:t=null==t?t:JSON.stringify(t)}return t},fromAttribute(t,e){let i=t;switch(e){case Boolean:i=null!==t;break;case Number:i=null===t?null:Number(t);break;case Object:case Array:try{i=JSON.parse(t)}catch(t){i=null}}return i}},w=(t,e)=>!c(t,e),k={attribute:!0,type:String,converter:v,reflect:!1,hasChanged:w};Symbol.metadata??=Symbol("metadata"),m.litPropertyMetadata??=new WeakMap;class E extends HTMLElement{static addInitializer(t){this._$Ei(),(this.l??=[]).push(t)}static get observedAttributes(){return this.finalize(),this._$Eh&&[...this._$Eh.keys()]}static createProperty(t,e=k){if(e.state&&(e.attribute=!1),this._$Ei(),this.elementProperties.set(t,e),!e.noAccessor){const i=Symbol(),r=this.getPropertyDescriptor(t,i,e);void 0!==r&&h(this.prototype,t,r)}}static getPropertyDescriptor(t,e,i){const{get:r,set:s}=l(this.prototype,t)??{get(){return this[e]},set(t){this[e]=t}};return{get(){return r?.call(this)},set(e){const n=r?.call(this);s.call(this,e),this.requestUpdate(t,n,i)},configurable:!0,enumerable:!0}}static getPropertyOptions(t){return this.elementProperties.get(t)??k}static _$Ei(){if(this.hasOwnProperty(y("elementProperties")))return;const t=p(this);t.finalize(),void 0!==t.l&&(this.l=[...t.l]),this.elementProperties=new Map(t.elementProperties)}static finalize(){if(this.hasOwnProperty(y("finalized")))return;if(this.finalized=!0,this._$Ei(),this.hasOwnProperty(y("properties"))){const t=this.properties,e=[...f(t),...d(t)];for(const i of e)this.createProperty(i,t[i])}const t=this[Symbol.metadata];if(null!==t){const e=litPropertyMetadata.get(t);if(void 0!==e)for(const[t,i]of e)this.elementProperties.set(t,i)}this._$Eh=new Map;for(const[t,e]of this.elementProperties){const i=this._$Eu(t,e);void 0!==i&&this._$Eh.set(i,t)}this.elementStyles=this.finalizeStyles(this.styles)}static finalizeStyles(t){const e=[];if(Array.isArray(t)){const i=new Set(t.flat(1/0).reverse());for(const t of i)e.unshift(u(t))}else void 0!==t&&e.push(u(t));return e}static _$Eu(t,e){const i=e.attribute;return!1===i?void 0:"string"==typeof i?i:"string"==typeof t?t.toLowerCase():void 0}constructor(){super(),this._$Ep=void 0,this.isUpdatePending=!1,this.hasUpdated=!1,this._$Em=null,this._$Ev()}_$Ev(){this._$ES=new Promise((t=>this.enableUpdating=t)),this._$AL=new Map,this._$E_(),this.requestUpdate(),this.constructor.l?.forEach((t=>t(this)))}addController(t){(this._$EO??=new Set).add(t),void 0!==this.renderRoot&&this.isConnected&&t.hostConnected?.()}removeController(t){this._$EO?.delete(t)}_$E_(){const t=new Map,e=this.constructor.elementProperties;for(const i of e.keys())this.hasOwnProperty(i)&&(t.set(i,this[i]),delete this[i]);t.size>0&&(this._$Ep=t)}createRenderRoot(){const t=this.shadowRoot??this.attachShadow(this.constructor.shadowRootOptions);return((t,e)=>{if(r)t.adoptedStyleSheets=e.map((t=>t instanceof CSSStyleSheet?t:t.styleSheet));else for(const r of e){const e=document.createElement("style"),s=i.litNonce;void 0!==s&&e.setAttribute("nonce",s),e.textContent=r.cssText,t.appendChild(e)}})(t,this.constructor.elementStyles),t}connectedCallback(){this.renderRoot??=this.createRenderRoot(),this.enableUpdating(!0),this._$EO?.forEach((t=>t.hostConnected?.()))}enableUpdating(t){}disconnectedCallback(){this._$EO?.forEach((t=>t.hostDisconnected?.()))}attributeChangedCallback(t,e,i){this._$AK(t,i)}_$EC(t,e){const i=this.constructor.elementProperties.get(t),r=this.constructor._$Eu(t,i);if(void 0!==r&&!0===i.reflect){const s=(void 0!==i.converter?.toAttribute?i.converter:v).toAttribute(e,i.type);this._$Em=t,null==s?this.removeAttribute(r):this.setAttribute(r,s),this._$Em=null}}_$AK(t,e){const i=this.constructor,r=i._$Eh.get(t);if(void 0!==r&&this._$Em!==r){const t=i.getPropertyOptions(r),s="function"==typeof t.converter?{fromAttribute:t.converter}:void 0!==t.converter?.fromAttribute?t.converter:v;this._$Em=r,this[r]=s.fromAttribute(e,t.type),this._$Em=null}}requestUpdate(t,e,i){if(void 0!==t){if(i??=this.constructor.getPropertyOptions(t),!(i.hasChanged??w)(this[t],e))return;this.P(t,e,i)}!1===this.isUpdatePending&&(this._$ES=this._$ET())}P(t,e,i){this._$AL.has(t)||this._$AL.set(t,e),!0===i.reflect&&this._$Em!==t&&(this._$Ej??=new Set).add(t)}async _$ET(){this.isUpdatePending=!0;try{await this._$ES}catch(t){Promise.reject(t)}const t=this.scheduleUpdate();return null!=t&&await t,!this.isUpdatePending}scheduleUpdate(){return this.performUpdate()}performUpdate(){if(!this.isUpdatePending)return;if(!this.hasUpdated){if(this.renderRoot??=this.createRenderRoot(),this._$Ep){for(const[t,e]of this._$Ep)this[t]=e;this._$Ep=void 0}const t=this.constructor.elementProperties;if(t.size>0)for(const[e,i]of t)!0!==i.wrapped||this._$AL.has(e)||void 0===this[e]||this.P(e,this[e],i)}let t=!1;const e=this._$AL;try{t=this.shouldUpdate(e),t?(this.willUpdate(e),this._$EO?.forEach((t=>t.hostUpdate?.())),this.update(e)):this._$EU()}catch(e){throw t=!1,this._$EU(),e}t&&this._$AE(e)}willUpdate(t){}_$AE(t){this._$EO?.forEach((t=>t.hostUpdated?.())),this.hasUpdated||(this.hasUpdated=!0,this.firstUpdated(t)),this.updated(t)}_$EU(){this._$AL=new Map,this.isUpdatePending=!1}get updateComplete(){return this.getUpdateComplete()}getUpdateComplete(){return this._$ES}shouldUpdate(t){return!0}update(t){this._$Ej&&=this._$Ej.forEach((t=>this._$EC(t,this[t]))),this._$EU()}updated(t){}firstUpdated(t){}}E.elementStyles=[],E.shadowRootOptions={mode:"open"},E[y("elementProperties")]=new Map,E[y("finalized")]=new Map,b?.({ReactiveElement:E}),(m.reactiveElementVersions??=[]).push("2.0.4");
/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */
const D={attribute:!0,type:String,converter:v,reflect:!1,hasChanged:w},x=(t=D,e,i)=>{const{kind:r,metadata:s}=i;let n=globalThis.litPropertyMetadata.get(s);if(void 0===n&&globalThis.litPropertyMetadata.set(s,n=new Map),n.set(i.name,t),"accessor"===r){const{name:r}=i;return{set(i){const s=e.get.call(this);e.set.call(this,i),this.requestUpdate(r,s,t)},init(e){return void 0!==e&&this.P(r,void 0,t),e}}}if("setter"===r){const{name:r}=i;return function(i){const s=this[r];e.call(this,i),this.requestUpdate(r,s,t)}}throw Error("Unsupported decorator location: "+r)};function F(t){return(e,i)=>"object"==typeof i?x(t,e,i):((t,e,i)=>{const r=e.hasOwnProperty(i);return e.constructor.createProperty(i,r?{...t,wrapped:!0}:t),r?Object.getOwnPropertyDescriptor(e,i):void 0})(t,e,i)
/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */}function _(t){return F({...t,state:!0,attribute:!1})}
/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const A=(t,e,i)=>(i.configurable=!0,i.enumerable=!0,i)
/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */;function j(t,e){return(e,i,r)=>A(0,0,{get(){return(e=>e.renderRoot?.querySelector(t)??null)(this)}})}
/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */let C;function z(t){return(e,i)=>A(0,0,{get(){return(this.renderRoot??(C??=document.createDocumentFragment())).querySelectorAll(t)}})
/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */}const S=globalThis,O=S.trustedTypes,q=O?O.createPolicy("lit-html",{createHTML:t=>t}):void 0,I="$lit$",P=`lit$${Math.random().toFixed(9).slice(2)}$`,T="?"+P,N=`<${T}>`,M=document,R=()=>M.createComment(""),B=t=>null===t||"object"!=typeof t&&"function"!=typeof t,L=Array.isArray,U="[ \t\n\f\r]",V=/<(?:(!--|\/[^a-zA-Z])|(\/?[a-zA-Z][^>\s]*)|(\/?$))/g,H=/-->/g,Z=/>/g,G=RegExp(`>|${U}(?:([^\\s"'>=/]+)(${U}*=${U}*(?:[^ \t\n\f\r"'\`<>=]|("|')|))|$)`,"g"),J=/'/g,K=/"/g,W=/^(?:script|style|textarea|title)$/i,Q=(t=>(e,...i)=>({_$litType$:t,strings:e,values:i}))(1),Y=Symbol.for("lit-noChange"),X=Symbol.for("lit-nothing"),tt=new WeakMap,et=M.createTreeWalker(M,129);function it(t,e){if(!L(t)||!t.hasOwnProperty("raw"))throw Error("invalid template strings array");return void 0!==q?q.createHTML(e):e}const rt=(t,e)=>{const i=t.length-1,r=[];let s,n=2===e?"<svg>":3===e?"<math>":"",o=V;for(let e=0;e<i;e++){const i=t[e];let a,u,c=-1,h=0;for(;h<i.length&&(o.lastIndex=h,u=o.exec(i),null!==u);)h=o.lastIndex,o===V?"!--"===u[1]?o=H:void 0!==u[1]?o=Z:void 0!==u[2]?(W.test(u[2])&&(s=RegExp("</"+u[2],"g")),o=G):void 0!==u[3]&&(o=G):o===G?">"===u[0]?(o=s??V,c=-1):void 0===u[1]?c=-2:(c=o.lastIndex-u[2].length,a=u[1],o=void 0===u[3]?G:'"'===u[3]?K:J):o===K||o===J?o=G:o===H||o===Z?o=V:(o=G,s=void 0);const l=o===G&&t[e+1].startsWith("/>")?" ":"";n+=o===V?i+N:c>=0?(r.push(a),i.slice(0,c)+I+i.slice(c)+P+l):i+P+(-2===c?e:l)}return[it(t,n+(t[i]||"<?>")+(2===e?"</svg>":3===e?"</math>":"")),r]};class st{constructor({strings:t,_$litType$:e},i){let r;this.parts=[];let s=0,n=0;const o=t.length-1,a=this.parts,[u,c]=rt(t,e);if(this.el=st.createElement(u,i),et.currentNode=this.el.content,2===e||3===e){const t=this.el.content.firstChild;t.replaceWith(...t.childNodes)}for(;null!==(r=et.nextNode())&&a.length<o;){if(1===r.nodeType){if(r.hasAttributes())for(const t of r.getAttributeNames())if(t.endsWith(I)){const e=c[n++],i=r.getAttribute(t).split(P),o=/([.?@])?(.*)/.exec(e);a.push({type:1,index:s,name:o[2],strings:i,ctor:"."===o[1]?ct:"?"===o[1]?ht:"@"===o[1]?lt:ut}),r.removeAttribute(t)}else t.startsWith(P)&&(a.push({type:6,index:s}),r.removeAttribute(t));if(W.test(r.tagName)){const t=r.textContent.split(P),e=t.length-1;if(e>0){r.textContent=O?O.emptyScript:"";for(let i=0;i<e;i++)r.append(t[i],R()),et.nextNode(),a.push({type:2,index:++s});r.append(t[e],R())}}}else if(8===r.nodeType)if(r.data===T)a.push({type:2,index:s});else{let t=-1;for(;-1!==(t=r.data.indexOf(P,t+1));)a.push({type:7,index:s}),t+=P.length-1}s++}}static createElement(t,e){const i=M.createElement("template");return i.innerHTML=t,i}}function nt(t,e,i=t,r){if(e===Y)return e;let s=void 0!==r?i._$Co?.[r]:i._$Cl;const n=B(e)?void 0:e._$litDirective$;return s?.constructor!==n&&(s?._$AO?.(!1),void 0===n?s=void 0:(s=new n(t),s._$AT(t,i,r)),void 0!==r?(i._$Co??=[])[r]=s:i._$Cl=s),void 0!==s&&(e=nt(t,s._$AS(t,e.values),s,r)),e}let ot=class{constructor(t,e){this._$AV=[],this._$AN=void 0,this._$AD=t,this._$AM=e}get parentNode(){return this._$AM.parentNode}get _$AU(){return this._$AM._$AU}u(t){const{el:{content:e},parts:i}=this._$AD,r=(t?.creationScope??M).importNode(e,!0);et.currentNode=r;let s=et.nextNode(),n=0,o=0,a=i[0];for(;void 0!==a;){if(n===a.index){let e;2===a.type?e=new at(s,s.nextSibling,this,t):1===a.type?e=new a.ctor(s,a.name,a.strings,this,t):6===a.type&&(e=new ft(s,this,t)),this._$AV.push(e),a=i[++o]}n!==a?.index&&(s=et.nextNode(),n++)}return et.currentNode=M,r}p(t){let e=0;for(const i of this._$AV)void 0!==i&&(void 0!==i.strings?(i._$AI(t,i,e),e+=i.strings.length-2):i._$AI(t[e])),e++}};class at{get _$AU(){return this._$AM?._$AU??this._$Cv}constructor(t,e,i,r){this.type=2,this._$AH=X,this._$AN=void 0,this._$AA=t,this._$AB=e,this._$AM=i,this.options=r,this._$Cv=r?.isConnected??!0}get parentNode(){let t=this._$AA.parentNode;const e=this._$AM;return void 0!==e&&11===t?.nodeType&&(t=e.parentNode),t}get startNode(){return this._$AA}get endNode(){return this._$AB}_$AI(t,e=this){t=nt(this,t,e),B(t)?t===X||null==t||""===t?(this._$AH!==X&&this._$AR(),this._$AH=X):t!==this._$AH&&t!==Y&&this._(t):void 0!==t._$litType$?this.$(t):void 0!==t.nodeType?this.T(t):(t=>L(t)||"function"==typeof t?.[Symbol.iterator])(t)?this.k(t):this._(t)}O(t){return this._$AA.parentNode.insertBefore(t,this._$AB)}T(t){this._$AH!==t&&(this._$AR(),this._$AH=this.O(t))}_(t){this._$AH!==X&&B(this._$AH)?this._$AA.nextSibling.data=t:this.T(M.createTextNode(t)),this._$AH=t}$(t){const{values:e,_$litType$:i}=t,r="number"==typeof i?this._$AC(t):(void 0===i.el&&(i.el=st.createElement(it(i.h,i.h[0]),this.options)),i);if(this._$AH?._$AD===r)this._$AH.p(e);else{const t=new ot(r,this),i=t.u(this.options);t.p(e),this.T(i),this._$AH=t}}_$AC(t){let e=tt.get(t.strings);return void 0===e&&tt.set(t.strings,e=new st(t)),e}k(t){L(this._$AH)||(this._$AH=[],this._$AR());const e=this._$AH;let i,r=0;for(const s of t)r===e.length?e.push(i=new at(this.O(R()),this.O(R()),this,this.options)):i=e[r],i._$AI(s),r++;r<e.length&&(this._$AR(i&&i._$AB.nextSibling,r),e.length=r)}_$AR(t=this._$AA.nextSibling,e){for(this._$AP?.(!1,!0,e);t&&t!==this._$AB;){const e=t.nextSibling;t.remove(),t=e}}setConnected(t){void 0===this._$AM&&(this._$Cv=t,this._$AP?.(t))}}class ut{get tagName(){return this.element.tagName}get _$AU(){return this._$AM._$AU}constructor(t,e,i,r,s){this.type=1,this._$AH=X,this._$AN=void 0,this.element=t,this.name=e,this._$AM=r,this.options=s,i.length>2||""!==i[0]||""!==i[1]?(this._$AH=Array(i.length-1).fill(new String),this.strings=i):this._$AH=X}_$AI(t,e=this,i,r){const s=this.strings;let n=!1;if(void 0===s)t=nt(this,t,e,0),n=!B(t)||t!==this._$AH&&t!==Y,n&&(this._$AH=t);else{const r=t;let o,a;for(t=s[0],o=0;o<s.length-1;o++)a=nt(this,r[i+o],e,o),a===Y&&(a=this._$AH[o]),n||=!B(a)||a!==this._$AH[o],a===X?t=X:t!==X&&(t+=(a??"")+s[o+1]),this._$AH[o]=a}n&&!r&&this.j(t)}j(t){t===X?this.element.removeAttribute(this.name):this.element.setAttribute(this.name,t??"")}}class ct extends ut{constructor(){super(...arguments),this.type=3}j(t){this.element[this.name]=t===X?void 0:t}}class ht extends ut{constructor(){super(...arguments),this.type=4}j(t){this.element.toggleAttribute(this.name,!!t&&t!==X)}}class lt extends ut{constructor(t,e,i,r,s){super(t,e,i,r,s),this.type=5}_$AI(t,e=this){if((t=nt(this,t,e,0)??X)===Y)return;const i=this._$AH,r=t===X&&i!==X||t.capture!==i.capture||t.once!==i.once||t.passive!==i.passive,s=t!==X&&(i===X||r);r&&this.element.removeEventListener(this.name,this,i),s&&this.element.addEventListener(this.name,this,t),this._$AH=t}handleEvent(t){"function"==typeof this._$AH?this._$AH.call(this.options?.host??this.element,t):this._$AH.handleEvent(t)}}class ft{constructor(t,e,i){this.element=t,this.type=6,this._$AN=void 0,this._$AM=e,this.options=i}get _$AU(){return this._$AM._$AU}_$AI(t){nt(this,t)}}const dt={I:at},pt=S.litHtmlPolyfillSupport;pt?.(st,at),(S.litHtmlVersions??=[]).push("3.2.1");
/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */
let mt=class extends E{constructor(){super(...arguments),this.renderOptions={host:this},this._$Do=void 0}createRenderRoot(){const t=super.createRenderRoot();return this.renderOptions.renderBefore??=t.firstChild,t}update(t){const e=this.render();this.hasUpdated||(this.renderOptions.isConnected=this.isConnected),super.update(t),this._$Do=((t,e,i)=>{const r=i?.renderBefore??e;let s=r._$litPart$;if(void 0===s){const t=i?.renderBefore??null;r._$litPart$=s=new at(e.insertBefore(R(),t),t,void 0,i??{})}return s._$AI(t),s})(e,this.renderRoot,this.renderOptions)}connectedCallback(){super.connectedCallback(),this._$Do?.setConnected(!0)}disconnectedCallback(){super.disconnectedCallback(),this._$Do?.setConnected(!1)}render(){return Y}};mt._$litElement$=!0,mt.finalized=!0,globalThis.litElementHydrateSupport?.({LitElement:mt});const $t=globalThis.litElementPolyfillSupport;function gt(t){return null!=t}function bt(t){return null==t}function yt(t){return null!==t&&"string"==typeof t}function vt(t){return"number"==typeof t&&!isNaN(t)}function wt(t){return"boolean"==typeof t}function kt(t){return null!==t&&"object"==typeof t&&!Et(t)}function Et(t){return Array.isArray(t)}function Dt(t){return"function"==typeof t&&null!==t}$t?.({LitElement:mt}),(globalThis.litElementVersions??=[]).push("4.1.1");const xt=new Set(["string","integer","number","boolean","null"]);function Ft(t,e){return!(!kt(t)||!t.target.every((t=>xt.has(t))))||!("string"!=typeof t||!xt.has(t))}function _t(t){return t.reduce(((t,e)=>new Set([...t].filter((t=>e.has(t))))),t[0])}function At(t){return t.reduce(((t,e)=>new Set([...t,...e])),new Set)}function jt(t,e){if(e instanceof Element){const i=e.assignedSlot??e,r=i.closest(t),s=i.getRootNode().host;return r??jt(t,s)}return null}function Ct(t,e,i,r){const s=r.split(/\//),n=/^\d+$/.test(s[0]);let o=n?e:t;if(n){const t=parseInt(s[0]);if(0===t)o=o[i];else for(let e=1;e<t;e++)o=o[Ot];if(!o)return null}s.shift();for(const t of s){if(null==o||!["array","object"].includes(typeof o))return;o=o[/^\d+$/.test(t)?parseInt(t):t]}return o}function zt(t,e,i=""){if(!t)return e||"";if(!e)return"";return i=e+(""===i?"":"/"+i),t.root==t?"/"+i:zt(t.parent,i)}const St=Symbol("FZ_FORM_SCHEMA"),Ot=Symbol("FZ_FORM_PARENT"),qt=Symbol("FZ_FORM_ROOT");function It(t,e,i){return t&&"object"==typeof t&&i&&Object.defineProperty(t,e,{enumerable:!1,value:i,writable:!0}),t}function Pt(t,e,i){return function(t,e){It(t,St,e)}(t,i),function(t,e){It(t,Ot,e)}(t,e),function(t,e){It(t,qt,e)}(t,e[qt]),t}function Tt(t){return t?.[St]}function Nt(t,e){if("root"!==t&&"parent"!==t)return e}function Mt(t){return void 0===t||(null===t||(""===t||("object"==typeof t?Object.keys(t).every((e=>void 0===t[e])):!!Array.isArray(t)&&0===t.length)))}window.nvl=function(t,...e){const i=e.map((t=>t??""));return String.raw(t,i)};const Rt=Symbol("FZ_FORM_SCHEMA"),Bt=Symbol("FZ_FORM_PARENT"),Lt=Symbol("FZ_FORM_PARENT"),Ut=Symbol("FZ_FORM_ROOT"),Vt=[],Ht=[];class Zt extends mt{handlers=[];static sheets=[];static styles=[];firstUpdated(t){Zt.sheets.forEach((t=>this.shadowRoot?.adoptedStyleSheets.push(t))),super.firstUpdated(t)}listen(t,e,i,r){this.handlers.findIndex((r=>r.target===t&&r.event===e&&r.handler===i))<0&&(this.handlers.push({target:t,event:e,handler:i}),t.addEventListener(e,i,r))}unlisten(t,e,i,r){const s=this.handlers.findIndex((r=>r.target===t&&r.event===e&&r.handler===i));s>=0&&(this.handlers.splice(s,1),t.removeEventListener(e,i,r))}connectedCallback(){super.connectedCallback()}disconnectedCallback(){super.disconnectedCallback();for(const t of this.handlers)t.target.removeEventListener(t.event,t.handler)}}const Gt=["parent","root"];class Jt{$id;$schema;$ref;$comment;type;enum;const;multipleOf;maximum;exclusiveMaximum;minimum;exclusiveMinimum;maxLength;minLength;pattern;items;additionalItems;maxItems;minItems;uniqueItems;contains;maxProperties;minProperties;required;properties;patternProperties;additionalProperties;dependencies;propertyNames;if;then;else;allOf;anyOf;oneOf;not;definitions;title;description;default;examples;format;root;parent;basetype;empty;pointer;nullAllowed;transient;trackers;target;enumFetch;isenum;filter;isenumarray;homogeneous;requiredIf;field;from;order;abstract;case;visible;readonly;collapsed;orderBy;expression;change;nullable;assets;preview;mimetype;mask;tab;group}function Kt(t){return!!kt(t)&&(!!yt(t.pointer)&&(!!yt(t.name)&&(!!Et(t.target)&&!!function(t){return gt(t)&&t instanceof Wt}(t.schema))))}class Wt extends Jt{constructor(t){return super(),Wt.wrapSchema(t)}_abstract(t){if(Mt(t)||null==t)return"~";if(Et(t)&&this.items instanceof Wt&&null!=this.items){const e=this.items;return t.map((t=>e._abstract(t))).filter((t=>t)).join(",")}if(Et(t)&&Et(this.items))return"";if(kt(this.properties)){const e=this.properties;return this.properties?Object.keys(this.properties).filter((e=>null!=t[e])).map((i=>e[i]._abstract(t[i]))).join(","):""}return String(t)}static _abstractFunc(){return(t,e)=>t._abstract(e)}_default(t){switch(!0){case"const"in this:return this.const;case Ft(this)&&"default"in this:return this.default;case"object"===this.basetype:return this.properties?Object.entries(this.properties).reduce(((t,[e,i])=>(i.default?t[e]=Pt(JSON.parse(JSON.stringify(i.default)),t,i):t[e]=t.required?.includes[e]?i._default(t):Pt(i._empty(),t,i),t)),Pt({},t,this)):{};case"array"===this.basetype:return Pt([],t,this);default:return Pt(this._empty(),t,this)}}_deref(t){const e=t.split(/\//),i=/^\d+$/.test(e[0]);let r=i?this:this.root;if(i){const t=parseInt(e[0]);for(let e=0;e<t;e++)r=r?.parent;if(!r)return}e.shift();for(const t of e){if(r="*"===t?r.items:r.properties?.[t],!r)return}return r}_track(t){const e=/\$\`([^`]+)`/g;let i;for(;null!=(i=e.exec(t));){const t=i[1],e=this._deref(t);null==e||e.trackers.includes(this.pointer)||e.trackers.push(this.pointer)}}_toJSON(){return JSON.stringify(this,((t,e)=>Gt.includes(t)?void 0:e))}static wrapSchema(t){return Object.setPrototypeOf(t,Wt.prototype),kt(t.properties)&&Object.values(t.properties).forEach((t=>Wt.wrapSchema(t))),Et(t.items)&&t.items.forEach((t=>Wt.wrapSchema(t))),kt(t.items)&&Wt.wrapSchema(t.items),Et(t.oneOf)&&t.oneOf.forEach((t=>Wt.wrapSchema(t))),Et(t.anyOf)&&t.anyOf.forEach((t=>Wt.wrapSchema(t))),Et(t.allOf)&&t.allOf.forEach((t=>Wt.wrapSchema(t))),t.not&&Wt.wrapSchema(t.not),t}static inferEnums(t){if(kt(t)&&Ft(t)){if(Et(t.enum))return t.enum.map((t=>({value:t,title:String(t)})));if(void 0!==t.const){return[{value:t.const,title:String(t.title??t.const)}]}if(Array.isArray(t.oneOf))return t.oneOf.flatMap((t=>Wt.inferEnums(t)??[]));if(Array.isArray(t.anyOf))return t.anyOf.flatMap((t=>Wt.inferEnums(t)||[]));if(Array.isArray(t.allOf))for(const e of t.allOf){const t=Wt.inferEnums(e);if(t)return t}if(t.not){const e=Wt.inferEnums(t.not)??[];return Wt.inferEnums(t)?.filter((t=>!e.some((e=>e.value===t.value))))}}}_empty(){return"array"==this.basetype?[]:"object"==this.basetype?{}:this.const?this.const:this.nullAllowed?null:void 0}}class Qt{root;property;phase;after;static sourceCount=1;constructor(t,e,i,r){this.root=t,this.property=e,this.phase=i,this.after=r}appliable(t,e,i){return!0}sourceURL(t){let e=`_FZ_${this.property}_${t??""}_${Qt.sourceCount++}.js`.replace(/ +/g,"_");return e=e.replace(/[^a-z0-9_]/gi,""),`\n    //# sourceURL=${e}\n`}set(t,e,i){t[this.property]=e,i&&(t[this.property].expresion=i)}compileExpr(t,e,i){const r=yt(e)?[e]:e;try{r.forEach((e=>t._track(e))),this.set(t,new Function("schema","value","parent","property","$","userdata",i),e)}catch(e){throw Error(`compilation for keyword ${this.property} failed schema:${t.pointer}\n    - ${String(e)}`)}}buildCode(t){const e=t.map(((t,e)=>`    const cst${e} = \`${t}\n\``));return e.push(`    return ( ${t.map(((t,e)=>`cst${e}`)).join(" + ")} ) `),e.join(";\n")}error(t){return Error(`Compilation step ${this.property}: ${t} `)}}const Yt={fromAttribute(t){try{return null!=t?new Wt(JSON.parse(t)):Xt}catch(t){}return Xt},toAttribute(t){try{return null!=t?t._toJSON():null}catch(t){return null}}},Xt=new Wt({type:"object",properties:{},collapsed:!1}),te=new Wt({}),ee=1,ie=2,re=t=>(...e)=>({_$litDirective$:t,values:e});let se=class{constructor(t){}get _$AU(){return this._$AM._$AU}_$AT(t,e,i){this._$Ct=t,this._$AM=e,this._$Ci=i}_$AS(t,e){return this.update(t,e)}update(t,e){return this.render(...e)}};
/**
 * @license
 * Copyright 2018 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const ne=re(class extends se{constructor(t){if(super(t),t.type!==ee||"class"!==t.name||t.strings?.length>2)throw Error("`classMap()` can only be used in the `class` attribute and must be the only part in the attribute.")}render(t){return" "+Object.keys(t).filter((e=>t[e])).join(" ")+" "}update(t,[e]){if(void 0===this.st){this.st=new Set,void 0!==t.strings&&(this.nt=new Set(t.strings.join(" ").split(/\s/).filter((t=>""!==t))));for(const t in e)e[t]&&!this.nt?.has(t)&&this.st.add(t);return this.render(e)}const i=t.element.classList;for(const t of this.st)t in e||(i.remove(t),this.st.delete(t));for(const t in e){const r=!!e[t];r===this.st.has(t)||this.nt?.has(t)||(r?(i.add(t),this.st.add(t)):(i.remove(t),this.st.delete(t)))}return Y}}),oe=["fz-array","fz-asset","fz-boolean","fz-constant","fz-date","fz-datetime","fz-document","fz-enum-select","fz-enum-array","fz-geolocation","fz-integer","fz-markdown","fz-enum-check","fz-float","fz-object","fz-range","fz-signature","fz-string","fz-textarea","fz-enum-typeahead","fz-time","fz-uuid"].join(",");class ae extends Zt{#t="/";get pointer(){return this.#t}set pointer(t){this.#t=t}#e=te;get schema(){return this.#e}set schema(t){this.#e=t}#i={};get data(){return this.#i}set data(t){this.#i=t}#r=null;get name(){return this.#r}set name(t){this.#r=t}#s=null;get index(){return this.#s}set index(t){this.#s=t}#n=!1;get touched(){return this.#n}set touched(t){this.#n=t}#o=Ht;get errors(){return this.#o}set errors(t){this.#o=t}_dofocus=!1;_form;get valid(){return 0===this.errors.length&&this.errors!=Ht}get invalid(){return this.errors.length>0}get value(){if(null!=this.data)return this.name&&!(this.name in this.data)&&(this.data[this.name]=void 0),this.data[this.key]}set value(t){t!==this.value&&(this.cascadeValue(t),this.errors=[],this.form?.check())}get validationMap(){return ne({"is-valid":this.valid,"is-invalid":this.invalid})}cascadeValue(t){const e=this.schema,i=this.form;if(this.data)this.data[this.key]=Pt(t,this.data,this.schema);else{if(!this.pointer.startsWith("/"))return!1;if("/"===this.pointer)return!1;const r=this.pointer.split("/").map((t=>/^\d+$/.test(t)?parseInt(t,10):t)),s=[];for(let t=e;t;t=t.parent)s.unshift(t);if(r.length!==s.length)return!1;const n=[];let o="",a=i.root;for(let e=0;e<r.length&&a;e++){const u=r[e],c=s[e];o=e?`${o}/${u}`:`${u}`;const h=i.getField(o);h&&n.push(h);const l=c.basetype;switch(!0){case""===u:break;case e===r.length-1:{const e=Pt(t,a,c);h&&!h.data&&(h.data=a),a=a[u]=e}break;case null==a[u]&&"array"==l:{const t=Pt([],a,c);h&&!h.data&&(h.data=a),a=a[u]=t}break;case null==a[u]&&"object"==l:{const t=Pt({},a,c);h&&!h.data&&(h.data=a),a=a[u]=t}break;default:a="object"==l||"array"==l?a[u]:null}}n.forEach((t=>{t.toField(),t.requestUpdate()}))}return this.toField(),this.requestUpdate(),!0}get nullable(){return"null"===this.schema.type||(!(!Et(this.schema.type)||!this.schema.type.includes("null"))||this.schema.nullAllowed)}get key(){return this.name??this.index??-1}get label(){return(this.isItem?String(null!=this.index?this.index+1:"-"):this.schema.title??this.name)??""}get isItem(){return null!=this.index}get isProperty(){return null!=this.name}get visible(){return!this.data||!this.schema.visible||!!this.evalExpr("visible")}get required(){let t=!1;return this.isProperty&&this.schema.requiredIf&&(t=this.evalExpr("requiredIf")??!1),t}get readonly(){return!this.form||(!!this.form.readonly||!(!this.data||!this.schema.readonly)&&this.evalExpr("readonly"))}get empty(){return this.schema._empty()}get isEmpty(){return Mt(this.value)}dofocus(){this._dofocus=!0}eventStop(t){t&&(t.preventDefault(),t.stopPropagation())}fields(){const t=[];return this.shadowRoot?.querySelectorAll(oe).forEach((e=>t.push(e))),t}get form(){return this._form||(this._form=jt("fz-form",this)),this._form}static get styles(){return[...super.styles,a`
            .invalid {
                border: 1px solid rgba(220,53,69) !important;
            }
            .invalid:focus, input:out-of-range:focus {
                box-shadow:0 0 0 .25rem rgba(220,53,69,.25);
                border: 1px solid red !important;
            }
            .valid {
                border: 1px solid rgba(25,135,84) !important;
            }
            .valid:focus {
                box-shadow:0 0 0 .25rem rgba(25,135,84,.25) !important;
                border: 1px solid green !important;
            }
            .error-message {
                margin:0;
                text-align: right;
                font-size:small;
                font-style: italic;
                color: rgba(220,53,69);
                float: right;
            }
            .error-truncated {
                white-space: nowrap;
                overflow:hidden !important;
                text-overflow: ellipsis;
            } 
        `]}render(){return Q`
            <div ?hidden="${!this.visible}">
                <div style="padding-top: 5px">${this.renderField()}</div>
                ${this.valid?Q``:Q`<div class="row">${this.renderErrors()}</div>`}
            </div>
        `}renderErrors(){return Q`
            <span id="error" class="error-message error-truncated" @click="${this.toggleError}">
                ${this.errors.join(", ")}
            </span>`}toggleError(){this.shadowRoot?.getElementById("error")?.classList.toggle("error-truncated")}get renderLabel(){return""===this.schema.title?Q``:this.isItem?Q`
            <label for="input" class="col-sm-3 col-form-label" @click="${this.labelClicked}">
                <div @click="${this.labelClicked}"><span class="badge bg-primary rounded-pill">${this.label}</span></div>
            </label>`:Q`
            <label for="input" class="col-sm-3 col-form-label" @click="${this.labelClicked}">
                <div>${this.label}${this.required?"*":""}</div>
            </label>`}renderItem(t,e){let i=null,r=null;if(!this.schema)return Q``;"string"==typeof e&&(i=e),"number"==typeof e&&(r=e);const s=null==this.data?null:this.data[this.key];switch(t.field){case"fz-enum-select":return Q`<fz-enum-select .pointer="${this.pointer}/${e}" .schema="${t}" .name="${i}" .index="${r}" .data="${s}"></fz-enum-select>`;case"fz-enum-check":return Q`<fz-enum-check .pointer="${this.pointer}/${e}"  .schema="${t}" .name="${i}" .index="${r}" .data="${s}"></fz-enum-check>`;case"fz-date":return Q`<fz-date .pointer="${this.pointer}/${e}"  .schema="${t}" .name="${i}" .index="${r}" .data="${s}"></fz-date>`;case"fz-time":return Q`<fz-time .pointer="${this.pointer}/${e}"  .schema="${t}" .name="${i}" .index="${r}" .data="${s}"></fz-time>`;case"fz-datetime":return Q`<fz-datetime .pointer="${this.pointer}/${e}"  .schema="${t}" .name="${i}" .index="${r}" .data="${s}"></fz-datetime>`;case"fz-textarea":return Q`<fz-textarea .pointer="${this.pointer}/${e}"  .schema="${t}" .name="${i}" .index="${r}" .data="${s}"></fz-textarea>`;case"fz-string":return Q`<fz-string .pointer="${this.pointer}/${e}"  .schema="${t}" .name="${i}" .index="${r}" .data="${s}"></fz-string>`;case"fz-mask":return Q`<fz-mask .pointer="${this.pointer}/${e}"  .schema="${t}" .name="${i}" .index="${r}" .data="${s}"></fz-mask>`;case"fz-asset":return Q`<fz-asset .pointer="${this.pointer}/${e}"  .schema="${t}" .name="${i}" .index="${r}" .data="${s}"></fz-asset>`;case"fz-signature":return Q`<fz-signature .pointer="${this.pointer}/${e}"  .schema="${t}" .name="${i}" .index="${r}" .data="${s}"></fz-signature>`;case"fz-boolean":return Q`<fz-boolean .pointer="${this.pointer}/${e}"  .schema="${t}" .name="${i}" .index="${r}" .data="${s}"></fz-boolean>`;case"fz-float":return Q`<fz-float .pointer="${this.pointer}/${e}"  .schema="${t}" .name="${i}" .index="${r}" .data="${s}"></fz-float>`;case"fz-integer":return Q`<fz-integer .pointer="${this.pointer}/${e}"  .schema="${t}" .name="${i}" .index="${r}" .data="${s}"></fz-integer>`;case"fz-range":return Q`<fz-range .pointer="${this.pointer}/${e}"  .schema="${t}" .name="${i}" .index="${r}" .data="${s}"></fz-range>`;case"fz-geolocation":return Q`<fz-geolocation .pointer="${this.pointer}/${e}"  .schema="${t}" .name="${i}" .index="${r}" .data="${s}"></fz-geolocation>`;case"fz-array":return Q`<fz-array .pointer="${this.pointer}/${e}"  .schema="${t}" .name="${i}" .index="${r}" .data="${s}"></fz-array>`;case"fz-object":return Q` <fz-object .pointer="${this.pointer}/${e}"  .schema="${t}" .name="${i}" .index="${r}" .data="${s}"></fz-object>`;case"fz-constant":return Q` <fz-constant .pointer="${this.pointer}/${e}"  .schema="${t}" .name="${i}" .index="${r}" .data="${s}"></fz-constant>`;case"fz-enum-array":return Q` <fz-enum-array .pointer="${this.pointer}/${e}"  .schema="${t}" .name="${i}" .index="${r}" .data="${s}"></fz-enum-array>`;case"fz-document":return Q` <fz-document .pointer="${this.pointer}/${e}"  .schema="${t}" .name="${i}" .index="${r}" .data="${s}"></fz-document>`;case"fz-uuid":return Q` <fz-uuid .pointer="${this.pointer}/${e}"  .schema="${t}" .name="${i}" .index="${r}" .data="${s}"></fz-uuid>`;case"fz-markdown":return Q` <fz-markdown .pointer="${this.pointer}/${e}"  .schema="${t}" .name="${i}" .index="${r}" .data="${s}"></fz-markdown>`;case"fz-enum-typeahead":return Q` <fz-enum-typeahead .pointer="${this.pointer}/${e}"  .schema="${t}" .name="${i}" .index="${r}" .data="${s}"></fz-enum-typeahead>`;default:return Q`<div class="alert alert-warning" role="alert">field name=${i} type ${t.basetype}/${t.field} not implemented !</div>`}}connectedCallback(){super.connectedCallback(),this.form?.addField(this.schema.pointer,this.pointer,this)}disconnectedCallback(){super.disconnectedCallback(),this.form?.removeField(this.schema.pointer,this.pointer)}update(t){this.schema.expression&&(this.value=this.evalExpr("expression")),super.update(t),this._dofocus&&(this._dofocus=!1,this.focus())}firstUpdated(t){super.firstUpdated(t),this.toField(),this.form?.check()}labelClicked(t){this.eventStop(t)}change(){this.toValue(),this.evalExpr("change");const t=new CustomEvent("update",{detail:{data:this.data,schema:this.schema,field:this},bubbles:!0,composed:!0});this.dispatchEvent(t),this.schema.trackers.length&&this.dispatchEvent(new CustomEvent("data-updated",{detail:{trackers:this.schema.trackers,field:this},bubbles:!0,composed:!0})),this.requestUpdate()}abstract(t,e){let i;if(null==t){if(this.isEmpty)return"~";i=this.schema.abstract?this.evalExpr("abstract"):this.schema._abstract(this.value)}else if(gt(e)&&Dt(e.from)){const r=e.from?.(e,this.value[t],this.data,this.key,this.derefFunc,this.form.options.userdata),s=r.refarray.findIndex((e=>e[r.refname]===this.value[t])),n=r.refarray[s],o=Tt(n);i=Dt(o.abstract)?o.abstract(o,n,r.refarray,s,this.derefFunc,this.form.options.userdata):o._abstract(this.value[t])}else{const r="string"==typeof t?this.schema.properties?.[t]:e;i=Dt(r?.abstract)?r.abstract(r,this.value[t],this.data,this.key,this.derefFunc,this.form.options.userdata):r?._abstract(this.value[t])}return i.length>200?i.substring(0,200)+"...":i}evalExpr(t,e,i,r,s){const n=this.schema?.[t];return Dt(n)?null!=e?n(e,i,r,s,this.derefFunc,this.form?.options.userdata):n(this.schema,this.value,this.data,this.key,this.derefFunc,this.form?.options.userdata):null}get derefFunc(){return(t,...e)=>{const i=String.raw(t,e);return Ct(this.form.root,this.data,this.key,i)}}trackedValueChange(){this.schema.expression&&(this.value=this.evalExpr("expression"))}}t([F({type:String})],ae.prototype,"pointer",null),t([F({type:Object})],ae.prototype,"schema",null),t([F({type:Object})],ae.prototype,"data",null),t([F({type:String})],ae.prototype,"name",null),t([F({type:Number})],ae.prototype,"index",null),t([F({type:Boolean,attribute:!1})],ae.prototype,"touched",null),t([F({type:Array,attribute:!1})],ae.prototype,"errors",null);class ue extends ae{get input(){return this.shadowRoot?.getElementById("input")}renderField(){return Q`
            <div class="form-group row">
                ${this.renderLabel}
                <div class="col-sm">${this.renderInput()}</div>
            </div>`}firstUpdated(t){super.firstUpdated(t),this.input&&this.listen(this.input,"keydown",(t=>this.debugKey(t)))}focus(){this.input?.focus()}debugKey(t){if("F9"===t.key){window._FZ_FORM_FIELD_DEBUG=this;this.name,this.valid,this.visible,this.required,this.readonly,JSON.stringify(this.input.validity),JSON.stringify(this.data,((t,e)=>"symbol"==typeof t?void 0:e),4),this.input.value,this.value,JSON.stringify(this.schema,Nt);this.eventStop(t)}}}const ce=[],he=[];class le extends ue{modal;enums=[];refenum;get extend(){return!!this.refenum?.extend}get showNullChoice(){if(!this.schema.nullAllowed)return!1;return this.schema.nullAllowed&&(!this.schema.enum?.includes(null)||!this.schema.oneOf?.some((t=>null===t.const))||!this.schema.anyOf?.some((t=>null===t.const)))}renderInput(){return this.evalEnums(),Q`
            ${this.extend?Q`<fz-item-dlg  @click="${this.eventStop}" .reference="${this.refenum}" @close="${this.close}"></fz-item-dlg>`:""}
            ${this.renderEnum()}`}close(t){if(t.detail.dismissed)this.refenum?.target.pop();else if(this.input&&this.input instanceof HTMLSelectElement){const e=document.createElement("option");e.value=t.detail.value,e.text=t.detail.abstract,this.input.add(e),e.selected=!0}this.refenum?.pointer&&this.form?.updateField(this.refenum?.pointer),super.change(),this.requestUpdate()}change(t){"~~ADD~~"==this.input?.value&&this.modal?(this.modal.open(),this.modal.reference=this.refenum,this.modal.requestUpdate()):super.change()}isSelected(t){return this.value===t}evalEnums(){if(this.enums!=ce&&this.enums!=he){switch(!0){case Dt(this.schema.from):this.enums=this.getFrom();break;case gt(this.schema.enumFetch):this.fetchEnum().then((t=>(this.enums=t,this.requestUpdate())),(t=>this.errors=[String(t)]));break;default:this.enums=this.getEnum(),0==this.enums.length&&(this.enums=he)}this.enums!=ce&&0==this.enums?.length&&(this.enums=he)}}getEnum(){const t=Wt.inferEnums(this.schema);return bt(t)?[]:t?.reduce(((t,e)=>(this.evalExpr("filter",this.schema,e.value,this.data,this.key)&&t.push(e),t)),[])}async fetchEnum(){return new Promise(((t,e)=>{const i=this.schema.enumFetch;let r=!1;const s=new CustomEvent("enum",{detail:{name:i,success:e=>{clearTimeout(n),r||(r=!0,t(e))},failure:t=>{clearTimeout(n),r||(r=!0,e(new Error(`EnumFetch "${i}" failed: ${t}`)))},timeout:1e4},bubbles:!0,cancelable:!1,composed:!0});this.dispatchEvent(s);const n=setTimeout((()=>{r||e(new Error(`Timeout when fetching enumeration"${i}"`))}),s.detail.timeout??1e4)}))}getFrom(){const t=this.evalExpr("from");if(Kt(t)){this.refenum=t;const e=this.refenum.name,i=this.refenum.target;return i.reduce(((t,r,s)=>{const n=Tt(r);if(this.evalExpr("filter",n,r,i,s)){const o=r[e],a=Dt(n?.abstract)?n.abstract(n,r,i,s,this.derefFunc,this.form.options.userdata):o;t.push({title:a,value:o})}return t}),[])}return[]}}t([j("fz-item-dlg")],le.prototype,"modal",void 0);let fe=class extends le{#a=-1;get selected(){return this.#a}set selected(t){this.#a=t}#u=[];get options(){return this.#u}set options(t){this.#u=t}toField(){this.options.forEach((t=>t.selected=!1)),bt(this.value)||bt(this.enums)?this.selected=-1:(this.selected=this.enums.findIndex((t=>t.value==this.value)),this.selected>=0&&(this.options[this.selected].selected=!0))}toValue(){gt(this.enums)&&this.selected>=0&&(this.value=this.enums[this.selected].value)}static get styles(){return[...super.styles,a`
            .readonly {
                background-color: #ececec
            }`]}renderEnum(){return this.enums==ce?Q`
                <div class="form-control d-flex align-items-center">
                    <div class="spinner-border spinner-border-sm text-secondary me-2" role="status">
                        <span class="visually-hidden">Loading...</span>
                    </div>
                    Loading...
                </div>`:Q`
            <select 
                id="input" 
                @change="${this.select}" 
                ?required="${this.required}"
                class="${ne({"form-select":!0,readonly:this.readonly})}"
            >
                ${this.extend?Q`<option style="color:red;text-align:center" ?disabled="${this.readonly}" ?selected="${!1}" .value="${"~~ADD~~"}">Add ...</option>`:""}
                ${this.showNullChoice?Q`<option style="color:red;text-align:center" ?disabled="${this.readonly}" ?selected="${this.isSelected(null)}" .value="${"~~EMPTY~~"}"> ${this.required?"Choose a value...":"<vide>"}</option>`:""}
                ${this.enums?.map(((t,e)=>Q`
                    <option id="option" ?disabled="${this.readonly}"  ?selected="${this.selected===e}">
                        <b>${t.title}</b>
                    </option>`))}
            </select>`}select(){this.options.forEach(((t,e)=>t.selected?this.selected=e:null)),this.change()}};t([F({type:Number,attribute:!1})],fe.prototype,"selected",null),t([z("option")],fe.prototype,"options",null),fe=t([e("fz-enum-select")],fe);let de=class extends le{#a=-1;get selected(){return this.#a}set selected(t){this.#a=t}#c=[];get radios(){return this.#c}set radios(t){this.#c=t}toField(){bt(this.radios)||(this.radios.forEach((t=>{t.checked=!1,t.removeAttribute("checked")})),void 0===this.value||bt(this.enums)?this.selected=-1:(this.selected=this.enums.findIndex((t=>t.value===this.value)),this.selected>=0&&(this.radios[this.selected].checked=!0)))}toValue(){this.selected>=0&&gt(this.enums)&&(this.value=this.enums[this.selected].value)}renderEnum(){return this.enums==ce?Q`
                <div class="form-control d-flex align-items-center">
                    <div class="spinner-border spinner-border-sm text-secondary me-2" role="status">
                        <span class="visually-hidden">Loading...</span>
                    </div>
                    Loading...
                </div>`:Q`
            ${this.enums?.map(((t,e)=>Q`
                <div class="form-check form-check-inline">
                    <input 
                        type="radio"
                        name="group" 
                        .value=${t.value} 
                        ?disabled=${this.readonly}
                        @click="${()=>this.select(e)}"
                        ?required=${this.required}
                        class="form-check-input"
                        autocomplete=off  spellcheck="false" tabindex=${e+1} 
                    />
                    <label class="form-check-label" for="${e}-input">${t.title}</label>
                </div>`))}`}select(t){this.readonly||(this.selected=t,this.radios[this.selected].checked=!0,this.change())}};t([F({type:Number,attribute:!1})],de.prototype,"selected",null),t([z("input")],de.prototype,"radios",null),de=t([e("fz-enum-check")],de);
/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */
class pe extends se{constructor(t){if(super(t),this.it=X,t.type!==ie)throw Error(this.constructor.directiveName+"() can only be used in child bindings")}render(t){if(t===X||null==t)return this._t=void 0,this.it=t;if(t===Y)return t;if("string"!=typeof t)throw Error(this.constructor.directiveName+"() called with a non-string value");if(t===this.it)return this._t;this.it=t;const e=[t];return e.raw=e,this._t={_$litType$:this.constructor.resultType,strings:e,values:[]}}}pe.directiveName="unsafeHTML",pe.resultType=1;const me=re(pe),$e="important",ge=" !"+$e,be=re(class extends se{constructor(t){if(super(t),t.type!==ee||"style"!==t.name||t.strings?.length>2)throw Error("The `styleMap` directive must be used in the `style` attribute and must be the only part in the attribute.")}render(t){return Object.keys(t).reduce(((e,i)=>{const r=t[i];return null==r?e:e+`${i=i.includes("-")?i:i.replace(/(?:^(webkit|moz|ms|o)|)(?=[A-Z])/g,"-$&").toLowerCase()}:${r};`}),"")}update(t,[e]){const{style:i}=t.element;if(void 0===this.ft)return this.ft=new Set(Object.keys(e)),this.render(e);for(const t of this.ft)null==e[t]&&(this.ft.delete(t),t.includes("-")?i.removeProperty(t):i[t]=null);for(const t in e){const r=e[t];if(null!=r){this.ft.add(t);const e="string"==typeof r&&r.endsWith(ge);t.includes("-")||e?i.setProperty(t,e?r.slice(0,-11):r,e?$e:""):i[t]=r}}return Y}});
/**
 * @license
 * Copyright 2018 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */let ye=class extends le{#h=!1;get isopen(){return this.#h}set isopen(t){this.#h=t}#a=-1;get selected(){return this.#a}set selected(t){this.#a=t}filtered=[];toField(){if(this.queryElem)if(bt(this.value)||bt(this.enums))this.queryElem.value="",this.selected=-1;else{const t=this.enums.find((t=>t.value==this.value));this.queryElem.value=t?t.title:"",this.selected=t?0:-1}else this.selected=-1}toValue(){this.selected>=0&&(this.value=this.filtered[this.selected].value)}renderEnum(){if(this.enums==ce)return Q`
                <div class="form-control d-flex align-items-center">
                    <div class="spinner-border spinner-border-sm text-secondary me-2" role="status">
                        <span class="visually-hidden">Loading...</span>
                    </div>
                    Loading...
                </div>`;const t={display:this.isopen?"block":"none"};return Q`
            <div class="dropdown">
                <input  
                    id="query"
                    type="text" 
                    placeholder=${this.label??""}
                    ?readonly=${this.readonly}
                    ?required=${this.required}
                    @input=${this.filter}
                    @change=${this.filter}
                    @focus=${this.show}
                    class="form-control" 
                    autocomplete=off  spellcheck="false"
                />
                <div id="list" style="${be(t)}" class="dropdown-menu w-100">
                    ${0==this.filtered?.length?Q`<a data-testid="nomatch-item" class="dropdown-item disabled"  style="font-style: italic">No match...</a>`:""}
                    ${this.filtered?.map(((t,e)=>Q`<a data-testid="selected-item" class="dropdown-item" @click="${()=>this.select(e)}" >${this.boldPrefix(t.title)}</a>`))}
                </div>
            </div>`}get query(){return this.queryElem?.value??""}boldPrefix(t){if(null==this.query||0==this.query.length)return t;const e=t.split(new RegExp(this.query,"i")).join(`<b><u>${this.query}</u></b>`);return me(e)}show(){this.isopen=!0,this.queryElem.select(),this.filter()}select(t){this.selected=t,this.isopen=!1,this.queryElem.value=this.filtered[this.selected].title,this.change()}filter(){super.evalEnums();const t=this.query.toUpperCase();this.filtered=this.showNullChoice?[{title:"~ empty",value:this.empty}]:[],this.filtered.push(...this.enums?.filter((e=>e.title.toUpperCase().includes(t))).slice(0,10)??[]),this.selected=-1,this.requestUpdate()}};t([F({type:Boolean,attribute:!1})],ye.prototype,"isopen",null),t([F({type:Number,attribute:!1})],ye.prototype,"selected",null),t([j("#query")],ye.prototype,"queryElem",void 0),ye=t([e("fz-enum-typeahead")],ye);
/**
 * @license
 * Copyright 2018 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */
const ve=t=>t??X;let we=class extends ue{toField(){if(gt(this.input)){const t=/\d\d\d\d-\d\d-\d\d/;this.input.valueAsDate=t.test(this.value)?new Date(this.value):null}}toValue(){gt(this.input)&&(this.value=gt(this.input.valueAsDate)?function(t=new Date){return t.toISOString().substring(0,10)}(this.input.valueAsDate):void 0)}renderInput(){return Q`<input
            id="input" 
            class="form-control ${this.validationMap}" 
            type="date" 
            ?readonly="${this.readonly}" 
            @input="${this.change}"
            min="${ve(this.min)}"
            max="${ve(this.max)}"
            ?required="${this.required}"
            autocomplete=off  spellcheck="false"
        />`}get min(){return this.schema.minimum}get max(){return this.schema.maximum}};we=t([e("fz-date")],we);let ke=class extends ue{toField(){if(gt(this.input)){const t=/\d\d\d\d-\d\d-\d\dT\d\d:\d\d:\d\dZ?/;this.input.valueAsDate=t.test(this.value)?new Date(this.value.substring(0,16)):null}}toValue(){gt(this.input)&&(this.value=gt(this.input.valueAsDate)?function(t=new Date){return t.toISOString().slice(0,-5)+"Z"}(this.input.valueAsDate):void 0)}renderInput(){return Q`<input 
            id="input" 
            type="datetime-local" 
            @input="${this.change}"
            min="${ve(this.min)}"
            max="${ve(this.max)}"
            ?readonly="${this.readonly}" 
            ?required="${this.required}"
            class="form-control ${this.validationMap}"
            autocomplete=off  spellcheck="false"
        />`}get min(){return this.schema.minimum}get max(){return this.schema.maximum}};ke=t([e("fz-datetime")],ke);let Ee=class extends ue{toField(){gt(this.input)&&(this.input.valueAsDate=new Date(this.value))}toValue(){gt(this.input)&&(this.value=gt(this.input.valueAsDate)?function(t=new Date){return t.toISOString().substring(11,19)}(this.input.valueAsDate):void 0)}renderInput(){return Q`
            <input 
                class="form-control timepicker ${this.validationMap}" 
                type="time" 
                id="input" 
                step="1"
                .value="${this.value}"
                ?readonly="${this.readonly}"
                @input="${this.change}"
                ?required="${this.required}"
                autocomplete=off  spellcheck="false"
            />`}};Ee=t([e("fz-time")],Ee);let De=class extends ue{toField(){gt(this.input)&&(this.input.value=String(this.value??""))}toValue(){gt(this.input)&&(this.value=gt(this.input.value)?this.input.value:void 0)}renderInput(){return Q`
            <textarea  
                class="form-control ${this.validationMap}" 
                id="input"
                placeholder="${ve(this.label)}"
                .value="${this.value}" 
                ?readonly="${this.readonly}"
                @input="${this.change}"
                @keypress="${this.change}"
                minlength="${ve(this.minlength)}"
                maxlength="${ve(this.maxlength)}"
                ?required="${this.required}"
                rows="5"
            ></textarea>`}get minlength(){return this.schema.minLength}get maxlength(){return this.schema.maxLength}get pattern(){return this.schema.pattern}};De=t([e("fz-textarea")],De);let xe=class extends ue{toField(){gt(this.input)&&(this.input.value=String(this.value??""))}toValue(){gt(this.input)&&(this.value=gt(this.input.value)&&""!=this.input.value?this.input.value:this.empty)}static get styles(){return[...super.styles,a`
            input[type="color"] {
                height: 38px
            }`]}renderInput(){return Q`
            <div class="input-group" >
                <input
                    class="form-control ${this.validationMap}" 
                    type="${this.type}" 
                    id="input"
                    placeholder="${this.label}"
                    ?readonly="${this.readonly}"
                    @input="${this.change}"
                    minlength="${ve(this.minlength)}"
                    maxlength="${ve(this.maxlength)}"
                    pattern="${ve(this.pattern)}"
                    ?required="${this.required}"
                    autocomplete=off  spellcheck="false"
                />
                ${"color"===this.type&&null!=this.value?Q`<span class="input-group-text" style="max-width:5em">${this.value}</span>`:""}
            </div>`}get minlength(){return this.schema.minLength}get maxlength(){return this.schema.maxLength}get pattern(){return this.schema.pattern}get type(){switch(this.schema.format){case"color":return"color";case"email":return"email";case"password":return"password";case"uri":return"url";default:return"text"}}};xe=t([e("fz-string")],xe);let Fe=class extends ue{toField(){this.input&&(this.input.value=this.value??"")}toValue(){this.input&&(this.value=this.input.value)}renderInput(){return Q`
            <div class="input-group">
                <input
                    class="form-control ${this.validationMap}"
                    type="text"
                    id="input"
                    placeholder="${this.mask}"
                    ?readonly="${this.readonly}"
                    @keydown="${this.handleKeydown}"
                    @input="${this.handleInput}"
                    ?required="${this.required}"
                    autocomplete=off  spellcheck="false"
                />
            </div>`}get mask(){return this.schema.mask??""}handleInput(t){const e=t.target,i=this.applyMask(e.value),r=e.selectionStart||0;this.value=i,this.requestUpdate(),this.restoreCaretPosition(e,r)}handleKeydown(t){const e=t.target,i=t.key,r=e.selectionStart||0;if("ArrowLeft"!==i&&"ArrowRight"!==i)if("Backspace"===i)this.handleBackspace(e,r),t.preventDefault();else if("Delete"===i)this.handleDelete(e,r),t.preventDefault();else{const t=this.mask[r];t&&/[-()\s]/.test(t)&&(e.value+=t)}}applyMask(t){let e="",i=0;for(const r of this.mask)"#"===r?(e+=t[i]||"",i++):e+=r;return e}handleBackspace(t,e){const i=this.mask;let r=e;if(e>0)do{r--}while(r>0&&!/[\dA-Za-z]/.test(i[r]));t.value=t.value.substring(0,r)+t.value.substring(e),this.restoreCaretPosition(t,r)}handleDelete(t,e){const i=this.mask;let r=e;if(e<t.value.length)do{r++}while(r<t.value.length&&!/[\dA-Za-z]/.test(i[r]));t.value=t.value.substring(0,e)+t.value.substring(r),this.restoreCaretPosition(t,e)}restoreCaretPosition(t,e){this.requestUpdate(),setTimeout((()=>t.setSelectionRange(e,e)),0)}};Fe=t([e("fz-mask")],Fe);let _e=class extends ue{#l=!1;get disabled(){return this.#l}set disabled(t){this.#l=t}#f="read";get state(){return this.#f}set state(t){this.#f=t}get isblank(){if(!this.context||!this.canvas)return!1;const t=new Uint32Array(this.context.getImageData(0,0,this.canvas.width,this.canvas.height).data.buffer);let e=0,i=0;t.forEach((t=>0!==t?i++:e++));return 100*i/(i+e)<.5}content;image;canvas;context;observer;offsetX=0;offsetY=0;currentX=0;currentY=0;drawing=!1;toField(){gt(this.input)&&(this.input.value=String(this.value??""))}toValue(){gt(this.input)&&(this.value=gt(this.input.value)?this.input.value:void 0)}static get styles(){return[...super.styles,a`
            img {border: 0}
            .readonly {background-color: rgb(235,235,228)}
            `]}renderInput(){return Q`
            <div id="content" class="form-control ${this.validationMap}">
                <button ?hidden="${!this.value||this.required||this.readonly}" @click="${this.del}" type="button" style="float:right" class="btn-close" aria-label="Close"></button>
                <canvas id="canvas" ?hidden="${"read"===this.state}" height="300" width="300"></canvas>
                <img   id="image" draggable=false ?hidden="${"edit"===this.state||!this.value}" >
                <div ?hidden="${!!this.value||"edit"===this.state}" >Aucune</div>
            </div>
            <div>
                <button ?hidden="${this.readonly}" ?disabled="${"read"!==this.state}" type="button" class="col-sm-3 btn btn-primary btn-sm" @click="${this.edit}">Signer</button>
                <button ?hidden="${"read"===this.state}" ?disabled="${this.isblank}" type="button" class="col-sm-3 btn btn-primary btn-sm" @click="${this.validate}">Valider</button>
                <button ?hidden="${"read"===this.state}" ?disabled="${this.isblank}" type="button" class="col-sm-3 btn btn-primary btn-sm" @click="${this.clear}">Effacer</button>
            </div>`}firstUpdated(t){super.firstUpdated(t),this.canvas=this.shadowRoot?.getElementById("canvas")??void 0,this.canvas&&(this.context=this.canvas.getContext("2d")??void 0,this.listen(this.canvas,"mousedown",(t=>this.onDown(t))),this.listen(this.canvas,"mousemove",(t=>this.onMove(t))),this.listen(this.canvas,"mouseup",(t=>this.onUp(t))),this.listen(this.canvas,"touchstart",(t=>this.onDown(t)),{passive:!1}),this.listen(this.canvas,"touchmove",(t=>this.onMove(t)),{passive:!1}),this.listen(this.canvas,"touchend",(t=>this.onUp(t)))),this.content=this.shadowRoot?.getElementById("content")??void 0,this.content&&(this.observer=new ResizeObserver((t=>this.resize())),this.observer.observe(this.content)),this.image=this.shadowRoot?.getElementById("image")??void 0,this.load()}resize(){if(this.content){const t=this.content.offsetWidth,e=Math.floor(this.content.offsetWidth/2);!this.canvas||"read"!==this.state||this.canvas.width===t&&this.canvas.height===e||(this.canvas.width=t,this.canvas.height=e),!this.image||"read"!==this.state||this.image.width===t&&this.image.height===e||(this.image.width=t,this.image.height=e)}}getPos(t){t.touches&&t.touches[0]?(this.currentX=t.touches[0].clientX-this.offsetX,this.currentY=t.touches[0].clientY-this.offsetY):t.originalEvent&&t.originalEvent.touches&&t.originalEvent.touches[0]?(this.currentX=t.originalEvent.touches[0].clientX-this.offsetX,this.currentY=t.originalEvent.touches[0].clientY-this.offsetY):void 0!==t.offsetX?(this.currentX=t.offsetX,this.currentY=t.offsetY):(this.currentX=t.layerX-t.currentTarget.offsetLeft,this.currentY=t.layerY-t.currentTarget.offsetTop)}getOffset(t){if(t.touches||t.originalEvent&&t.originalEvent.touches){this.offsetX=0,this.offsetY=0;let e=null;if(t.originalEvent?e=t.originalEvent.srcElement:t.touches.length>0&&(e=t.touches[0].target),e)for(;e;)this.offsetX+=e.offsetLeft-e.scrollLeft,this.offsetY+=e.offsetTop-e.scrollTop,e=e.offsetParent}}onDown(t){return this.drawing=!this.readonly,this.getOffset(t),this.getPos(t),this.context&&this.currentX&&(this.context.beginPath(),this.context.moveTo(this.currentX,this.currentY),this.context.strokeStyle="#4bf",this.context.lineWidth=5,this.context.lineJoin="round"),this.eventStop(t),!1}onMove(t){if(this.drawing)return this.getPos(t),this.context&&(this.context.lineTo(this.currentX,this.currentY),this.context.stroke()),this.eventStop(t),!1}onUp(t){return this.drawing=!1,this.eventStop(t),this.isblank||this.save(),!1}load(){this.context&&this.image&&this.value&&(this.image.src=this.value)}edit(){this.canvas&&this.context?.clearRect(0,0,this.canvas.width,this.canvas.height),this.value=null,this.state="edit"}validate(){this.save(),this.state="read"}save(){if(this.canvas){const t=this.canvas.toDataURL("image/gif");this.value=t,this.image&&(this.image.src=t),this.change()}}clear(){this.canvas&&(this.canvas.width=this.canvas.width),this.value="",this.requestUpdate()}del(){this.clear(),this.state="read"}};t([F({attribute:!1})],_e.prototype,"disabled",null),t([F({attribute:!1})],_e.prototype,"state",null),_e=t([e("fz-signature")],_e);let Ae=class extends ue{renderInput(){return Q`
            <div class="form-group row">
                <div class="col-sm-12">
                    <div class="form-check d-flex">
                        <input 
                            id="input"
                            type="checkbox"
                            ?required="${this.required}"
                            @change="${this.tryChange}"
                            @click="${this.tryChange}"
                            class="form-check-input align-self-start ${this.validationMap}"
                            autocomplete=off  spellcheck="false"
                        />
                        <label class="form-check-label ms-2" for="input">${super.label}</label>
                    </div>
                </div>
            </div>
        `}tryChange(t){this.readonly?t.preventDefault():this.change()}get label(){return""}toField(){if(!bt(this.input))switch(!0){case void 0===this.value:case null===this.value&&this.schema.nullAllowed:this.input.indeterminate=!0,this.input.checked=!1;break;case wt(this.value):this.input.indeterminate=!1,this.input.checked=this.value;break;default:this.input.indeterminate=!0,this.input.checked=!1}}toValue(){bt(this.input)||(this.input.indeterminate?this.value=this.schema.nullAllowed?null:void 0:this.value=!!this.input.checked)}};Ae=t([e("fz-boolean")],Ae);const je=1.1.toLocaleString().substring(1,2);let Ce=class extends ue{toField(){gt(this.input)&&(vt(this.value)?this.input.valueAsNumber=this.value:this.input.value="")}toValue(){gt(this.input)&&(this.value=vt(this.input.valueAsNumber)?this.input.valueAsNumber:void 0)}static get styles(){return[...super.styles,a`
            /* Chrome, Safari, Edge, Opera */
            input::-webkit-outer-spin-button,
            input::-webkit-inner-spin-button {
                -webkit-appearance: none;
                margin: 0;
            }
            /* Firefox */
            input[type=number] {
                -moz-appearance: textfield;
            }`]}renderInput(){return Q`
            <div class="input-group">
                <input 
                    class="form-control ${this.validationMap}" 
                    type="number" 
                    id="input"
                    ?readonly="${this.readonly}"
                    @input="${this.change}"
                    min="${ve(this.min)}"
                    max="${ve(this.max)}"
                    step="1e-12"
                    ?required="${this.required}"
                    @keypress="${this.keypress}"
                    autocomplete=off  spellcheck="false"
                />
            </div>`}get max(){return vt(this.schema.maximum)?this.schema.maximum:vt(this.schema.exclusiveMaximum)?this.schema.exclusiveMaximum:void 0}get min(){return vt(this.schema.minimum)?this.schema.minimum:vt(this.schema.exclusiveMinimum)?this.schema.exclusiveMinimum:void 0}keypress(t){/[.,]/.test(t.key)&&je!==t.key&&t.preventDefault()}};Ce=t([e("fz-float")],Ce);let ze=class extends ue{toField(){gt(this.input)&&(this.input.valueAsNumber=vt(this.value)?Math.floor(this.value):NaN)}toValue(){gt(this.input)&&(this.value=vt(this.input.valueAsNumber)?this.input.valueAsNumber:void 0)}static get styles(){return[...super.styles,a`
          input[type=range]::-webkit-slider-runnable-track {
            background: lightgray;
            border: 0.2px solid rgba(1, 1, 1, 0.3);
            border-radius: 25px;
            width: 100%;
            height: 8px;
            cursor: pointer;
          }
          input[type=range]::-webkit-slider-thumb {
            margin-top: -6px;
            width: 20px;
            height: 20px;
            background: rgb(13, 110, 253);
            border: 0.2px solid rgba(1, 1, 1, 0.3);
            border-radius: 10px;
            cursor: pointer;
            -webkit-appearance: none;
          }
          input[type=range]::-moz-range-track {
            background: rgb(13, 110, 253);
            border: 0.2px solid rgba(1, 1, 1, 0.3);
            border-radius: 25px;
            width: 100%;
            height: 15.6px;
            cursor: pointer;
          }
          input[type=range]::-moz-range-thumb {
            width: 16px;
            height: 36px;
            background: #00ffff;
            border: 1px solid #000000;
            border-radius: 3px;
            cursor: pointer;
          }
          input[type=range]::-ms-track {
            background: transparent;
            border-color: transparent;
            border-width: 11.2px 0;
            color: transparent;
            width: 100%;
            height: 15.6px;
            cursor: pointer;
          }
          `]}renderInput(){return Q`
            <div class="input-group">
                <input 
                    id="input" 
                    type="range"  
                    .value="${this.value}" 
                    ?disabled="${this.readonly}"
                    ?readonly="${this.readonly}"
                    @input="${this.change}"
                    min="${ve(this.min)}"
                    max="${ve(this.max)}"
                    step="1"
                    ?required="${this.required}"
                    class="form-control ${this.validationMap}"
                    autocomplete=off  spellcheck="false"
                />
                <div class="input-group-append" style="max-width:5em" >
                    <span class="input-group-text" >${this.value}</span>
                </div>
            </div>`}get max(){return vt(this.schema.maximum)?this.schema.maximum:vt(this.schema.exclusiveMaximum)?this.schema.exclusiveMaximum:void 0}get min(){return vt(this.schema.minimum)?this.schema.minimum:vt(this.schema.exclusiveMinimum)?this.schema.exclusiveMinimum:void 0}keypress(){}};ze=t([e("fz-range")],ze);let Se=class extends ue{toField(){gt(this.input)&&(this.input.value=String(this.value??""))}toValue(){gt(this.input)&&(this.value=gt(this.input.value)?this.input.value:void 0)}static get styles(){return[...super.styles,a`
            input[type="color"] {
                height: 38px
            }`]}renderInput(){return Q`
            <div class="input-group ${this.validationMap}">
                <input
                    class="form-control"
                    type="text"
                    id="input"
                    readonly
                    placeholder="${this.label}"
                    ?readonly="${this.readonly}" 
                    autocomplete=off  spellcheck="false"
                />
                <div class="btn-group">
                    <button 
                        type="button"
                        class="btn btn-danger btn-sm"
                        @click="${this.remove}"
                        aria-label="delete">
                            <i class="bi bi-x"></i>
                    </button>
                    <button 
                        type="button"
                        class="btn btn-primary btn-sm"
                        @click="${this.geolocate}"
                        aria-label="Geolocate">
                            <i class="bi bi-geo-alt"></i>
                    </button>
                </div>
            </div>`}geolocate(){navigator.geolocation.getCurrentPosition((t=>{this.input.value=`POINT (${t.coords.longitude} ${t.coords.latitude})`,this.change()}))}remove(){this.input.value="",this.change()}};Se=t([e("fz-geolocation")],Se);let Oe=class extends ue{toField(){gt(this.input)&&(vt(this.value)?this.input.valueAsNumber=this.value:this.input.value="")}toValue(){gt(this.input)&&(this.value=vt(this.input.valueAsNumber)?Math.floor(this.input.valueAsNumber):void 0)}renderInput(){return Q`
            <div class="input-group">
                <input 
                    class="form-control ${this.validationMap}" 
                    type="number"  
                    id="input"
                    ?readonly="${this.readonly}"
                    @input="${this.change}"
                    @keypress="${this.keypress}"
                    min="${ve(this.min)}"
                    max="${ve(this.max)}"
                    step="1"
                    ?required="${this.required}"
                    autocomplete=off  spellcheck="false"
                />
            </div>`}get max(){return vt(this.schema.maximum)?this.schema.maximum:vt(this.schema.exclusiveMaximum)?this.schema.exclusiveMaximum:void 0}get min(){return vt(this.schema.minimum)?this.schema.minimum:vt(this.schema.exclusiveMinimum)?this.schema.exclusiveMinimum:void 0}keypress(t){}};Oe=t([e("fz-integer")],Oe);let qe=class extends ue{toField(){gt(this.input)&&(this.input.value=String(this.schema.const??""))}toValue(){this.value=this.schema.const}renderInput(){return Q`<div class="input-group ${this.validationMap}">${this.value}</div>`}connectedCallback(){super.connectedCallback(),this.value!==this.schema.const&&(this.value=this.schema.const)}};qe=t([e("fz-constant")],qe);const Ie=[];for(let t=0;t<256;++t)Ie.push((t+256).toString(16).slice(1));let Pe;const Te=new Uint8Array(16);const Ne={};function Me(t,e,i){let r;{const t=Date.now(),s=function(){if(!Pe){if("undefined"==typeof crypto||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");Pe=crypto.getRandomValues.bind(crypto)}return Pe(Te)}();!function(t,e,i){t.msecs??=-1/0,t.nsecs??=0,e===t.msecs?(t.nsecs++,t.nsecs>=1e4&&(t.node=void 0,t.nsecs=0)):e>t.msecs?t.nsecs=0:e<t.msecs&&(t.node=void 0);t.node||(t.node=i.slice(10,16),t.node[0]|=1,t.clockseq=16383&(i[8]<<8|i[9]));t.msecs=e}(Ne,t,s),r=function(t,e,i,r,s,n,o=0){if(t.length<16)throw new Error("Random bytes length must be >= 16");if(n){if(o<0||o+16>n.length)throw new RangeError(`UUID byte range ${o}:${o+15} is out of buffer bounds`)}else n=new Uint8Array(16),o=0;e??=Date.now(),i??=0,r??=16383&(t[8]<<8|t[9]),s??=t.slice(10,16);const a=(1e4*(268435455&(e+=122192928e5))+i)%4294967296;n[o++]=a>>>24&255,n[o++]=a>>>16&255,n[o++]=a>>>8&255,n[o++]=255&a;const u=e/4294967296*1e4&268435455;n[o++]=u>>>8&255,n[o++]=255&u,n[o++]=u>>>24&15|16,n[o++]=u>>>16&255,n[o++]=r>>>8|128,n[o++]=255&r;for(let t=0;t<6;++t)n[o++]=s[t];return n}(s,Ne.msecs,Ne.nsecs,Ne.clockseq,Ne.node,e,i)}return e??function(t,e=0){return(Ie[t[e+0]]+Ie[t[e+1]]+Ie[t[e+2]]+Ie[t[e+3]]+"-"+Ie[t[e+4]]+Ie[t[e+5]]+"-"+Ie[t[e+6]]+Ie[t[e+7]]+"-"+Ie[t[e+8]]+Ie[t[e+9]]+"-"+Ie[t[e+10]]+Ie[t[e+11]]+Ie[t[e+12]]+Ie[t[e+13]]+Ie[t[e+14]]+Ie[t[e+15]]).toLowerCase()}(r)}var Re;let Be=class extends ue{static{Re=this}toField(){gt(this.input)&&(this.input.value=String(this.value??""))}toValue(){gt(this.input)&&(this.value=gt(this.input.value)?this.input.value:void 0)}static docTypes=["image/png","image/jpeg","image/gif","text/plain","application/pdf","application/msword","application/vnd.openxmlformats-officedocument.wordprocessingml.document","application/vnd.ms-excel","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet","application/vnd.ms-powerpoint","application/vnd.openxmlformats-officedocument.presentationml.presentation","application/vnd.oasis.opendocument.text","application/vnd.oasis.opendocument.spreadsheet","application/vnd.oasis.opendocument.presentation","application/vnd.oasis.opendocument.graphics"];photoModal;url="";filename;get hasPreview(){return!!this.schema.preview}get mimetype(){return this.schema.mimetype?this.schema.mimetype:Re.docTypes.join(", ")}get store(){return this.form.store}static get styles(){return[...super.styles,a`
                .fileUpload {
                    position: relative;
                    overflow: hidden;
                    margin: 0px;
                }
                .fileUpload input {
                    position: absolute !important;
                    top: 0;
                    right: 0;
                    bottom: 0;
                    left: 0;
                    margin: 0;
                    padding: 0;
                    cursor: pointer;
                    opacity: 0 !important;
                    filter: alpha(opacity=0) !important;
                }
                .img-preview {
                    width:100px;
                    height:auto;
                }
                .close-right {
                    position: absolute;
                    top: 0.5rem;
                    right: 0.5rem;
                    z-index: 10;
                    display: block;
                    padding: 0.25rem 0.5rem;
                    color: #818a91;
                    cursor: pointer;
                    background-color: transparent;
                    border: 0;
                    border-radius: 0.25rem;
                }
                `]}renderInput(){return Q`
            <fz-photo-dlg id=modal ></fz-photo-dlg>
            <div class="input-group">
                ${this.url&&this.hasPreview?Q`
                    <div class="input-group-prepend" >
                        <img class="input-group-text img-preview" src="${this.url}" @click="${this.open}"/>
                    </div>`:null}
                ${this.isEmpty||this.url&&this.hasPreview?null:Q`
                    <div class="input-group-prepend">
                        <span class="input-group-text"  @click="${this.open}"><i class="bi bi-eye"></i></span>
                    </div>`}
                <input class="form-control ${this.validationMap}"  type="text" spellcheck="false"
                    placeholder="photo, document, ..."
                    .value="${this.filename??""}"
                    ?readonly="${this.readonly}" 
                    @mousedown="${t=>t.preventDefault()}"
                    @paste="${t=>t.preventDefault()}"
                    @input="${t=>t.preventDefault()}"
                    @keypress="${t=>t.preventDefault()}"
                    ?required="${this.required}"
                    autocomplete=off  spellcheck="false"
                />
                ${this.isEmpty||this.readonly?Q``:Q`
                    <button  @click="${this.delete}"  type="button" class="close-right btn-close" aria-label="Close"> </button>`}
                ${!this.isEmpty||this.readonly?Q``:Q`
                    <span class="input-group-text btn btn-primary" @click="${()=>this.photoModal?.open()}" ><i class=" bi bi-camera"></i></span>
                    <span class="input-group-text fileUpload btn btn-primary">
                        <input type="file"
                            @change="${this.save}"
                            ?disabled="${this.readonly}" 
                            accept="${this.mimetype}"
                            class="btn-block"
                            autocomplete=off  spellcheck="false"/>
                        <i class="bi bi-file-earmark-richtext"></i>
                    </span>`}
            </div>`}change(){super.change(),this.requestUpdate()}connectedCallback(){super.connectedCallback()}async firstUpdated(t){if(super.firstUpdated(t),this.photoModal=this.shadowRoot?.querySelector("fz-photo-dlg")??void 0,this.listen(this.photoModal,"close",(t=>this.set(Me(),t.detail.blob,"photo.png"))),null!=this.value){const t=await this.store.get(this.value);t?this.set(this.value,t.blob,t.filename):this.errors=["document not found"]}}async open(){if(null==this.value)return;const t=await this.store.get(this.value);let e;if(t)e=URL.createObjectURL(t.blob);else{const t=new Blob([`FzForm ERROR: Couldn't open document uuid=${this.value}`],{type:"text/plain"});e=URL.createObjectURL(t)}window.open(e)}setUrl(t){if(this.url="",t.type.startsWith("image")){const e=new FileReader;e.readAsDataURL(t),e.onload=t=>{this.url=t.target?.result,this.requestUpdate()}}}async set(t,e,i){e&&i&&(this.value&&await this.store.remove(this.value),this.filename=i,this.value=t,this.setUrl(e),this.value&&await this.store.put(this.value,e,this.filename,this.pointer),this.change())}async save(t){await this.set(Me(),t.target.files[0],t.target.files[0].name)}async delete(){this.value&&await this.store.remove(this.value),this.value=this.empty,this.url="",this.filename="",this.change()}};Be=Re=t([e("fz-document")],Be);const Le={};function Ue(t,e){"string"!=typeof e&&(e=Ue.defaultChars);const i=function(t){let e=Le[t];if(e)return e;e=Le[t]=[];for(let t=0;t<128;t++){const i=String.fromCharCode(t);e.push(i)}for(let i=0;i<t.length;i++){const r=t.charCodeAt(i);e[r]="%"+("0"+r.toString(16).toUpperCase()).slice(-2)}return e}(e);return t.replace(/(%[a-f0-9]{2})+/gi,(function(t){let e="";for(let r=0,s=t.length;r<s;r+=3){const n=parseInt(t.slice(r+1,r+3),16);if(n<128)e+=i[n];else{if(192==(224&n)&&r+3<s){const i=parseInt(t.slice(r+4,r+6),16);if(128==(192&i)){const t=n<<6&1984|63&i;e+=t<128?"":String.fromCharCode(t),r+=3;continue}}if(224==(240&n)&&r+6<s){const i=parseInt(t.slice(r+4,r+6),16),s=parseInt(t.slice(r+7,r+9),16);if(128==(192&i)&&128==(192&s)){const t=n<<12&61440|i<<6&4032|63&s;e+=t<2048||t>=55296&&t<=57343?"":String.fromCharCode(t),r+=6;continue}}if(240==(248&n)&&r+9<s){const i=parseInt(t.slice(r+4,r+6),16),s=parseInt(t.slice(r+7,r+9),16),o=parseInt(t.slice(r+10,r+12),16);if(128==(192&i)&&128==(192&s)&&128==(192&o)){let t=n<<18&1835008|i<<12&258048|s<<6&4032|63&o;t<65536||t>1114111?e+="":(t-=65536,e+=String.fromCharCode(55296+(t>>10),56320+(1023&t))),r+=9;continue}}e+=""}}return e}))}Ue.defaultChars=";/?:@&=+$,#",Ue.componentChars="";const Ve={};function He(t,e,i){"string"!=typeof e&&(i=e,e=He.defaultChars),void 0===i&&(i=!0);const r=function(t){let e=Ve[t];if(e)return e;e=Ve[t]=[];for(let t=0;t<128;t++){const i=String.fromCharCode(t);/^[0-9a-z]$/i.test(i)?e.push(i):e.push("%"+("0"+t.toString(16).toUpperCase()).slice(-2))}for(let i=0;i<t.length;i++)e[t.charCodeAt(i)]=t[i];return e}(e);let s="";for(let e=0,n=t.length;e<n;e++){const o=t.charCodeAt(e);if(i&&37===o&&e+2<n&&/^[0-9a-f]{2}$/i.test(t.slice(e+1,e+3)))s+=t.slice(e,e+3),e+=2;else if(o<128)s+=r[o];else if(o>=55296&&o<=57343){if(o>=55296&&o<=56319&&e+1<n){const i=t.charCodeAt(e+1);if(i>=56320&&i<=57343){s+=encodeURIComponent(t[e]+t[e+1]),e++;continue}}s+="%EF%BF%BD"}else s+=encodeURIComponent(t[e])}return s}function Ze(t){let e="";return e+=t.protocol||"",e+=t.slashes?"//":"",e+=t.auth?t.auth+"@":"",t.hostname&&-1!==t.hostname.indexOf(":")?e+="["+t.hostname+"]":e+=t.hostname||"",e+=t.port?":"+t.port:"",e+=t.pathname||"",e+=t.search||"",e+=t.hash||"",e}function Ge(){this.protocol=null,this.slashes=null,this.auth=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.pathname=null}He.defaultChars=";/?:@&=+$,-_.!~*'()#",He.componentChars="-_.!~*'()";const Je=/^([a-z0-9.+-]+:)/i,Ke=/:[0-9]*$/,We=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,Qe=["{","}","|","\\","^","`"].concat(["<",">",'"',"`"," ","\r","\n","\t"]),Ye=["'"].concat(Qe),Xe=["%","/","?",";","#"].concat(Ye),ti=["/","?","#"],ei=/^[+a-z0-9A-Z_-]{0,63}$/,ii=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,ri={javascript:!0,"javascript:":!0},si={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0};function ni(t,e){if(t&&t instanceof Ge)return t;const i=new Ge;return i.parse(t,e),i}Ge.prototype.parse=function(t,e){let i,r,s,n=t;if(n=n.trim(),!e&&1===t.split("#").length){const t=We.exec(n);if(t)return this.pathname=t[1],t[2]&&(this.search=t[2]),this}let o=Je.exec(n);if(o&&(o=o[0],i=o.toLowerCase(),this.protocol=o,n=n.substr(o.length)),(e||o||n.match(/^\/\/[^@\/]+@[^@\/]+/))&&(s="//"===n.substr(0,2),!s||o&&ri[o]||(n=n.substr(2),this.slashes=!0)),!ri[o]&&(s||o&&!si[o])){let t,e,i=-1;for(let t=0;t<ti.length;t++)r=n.indexOf(ti[t]),-1!==r&&(-1===i||r<i)&&(i=r);e=-1===i?n.lastIndexOf("@"):n.lastIndexOf("@",i),-1!==e&&(t=n.slice(0,e),n=n.slice(e+1),this.auth=t),i=-1;for(let t=0;t<Xe.length;t++)r=n.indexOf(Xe[t]),-1!==r&&(-1===i||r<i)&&(i=r);-1===i&&(i=n.length),":"===n[i-1]&&i--;const s=n.slice(0,i);n=n.slice(i),this.parseHost(s),this.hostname=this.hostname||"";const o="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!o){const t=this.hostname.split(/\./);for(let e=0,i=t.length;e<i;e++){const i=t[e];if(i&&!i.match(ei)){let r="";for(let t=0,e=i.length;t<e;t++)i.charCodeAt(t)>127?r+="x":r+=i[t];if(!r.match(ei)){const r=t.slice(0,e),s=t.slice(e+1),o=i.match(ii);o&&(r.push(o[1]),s.unshift(o[2])),s.length&&(n=s.join(".")+n),this.hostname=r.join(".");break}}}}this.hostname.length>255&&(this.hostname=""),o&&(this.hostname=this.hostname.substr(1,this.hostname.length-2))}const a=n.indexOf("#");-1!==a&&(this.hash=n.substr(a),n=n.slice(0,a));const u=n.indexOf("?");return-1!==u&&(this.search=n.substr(u),n=n.slice(0,u)),n&&(this.pathname=n),si[i]&&this.hostname&&!this.pathname&&(this.pathname=""),this},Ge.prototype.parseHost=function(t){let e=Ke.exec(t);e&&(e=e[0],":"!==e&&(this.port=e.substr(1)),t=t.substr(0,t.length-e.length)),t&&(this.hostname=t)};var oi,ai=Object.freeze({__proto__:null,decode:Ue,encode:He,format:Ze,parse:ni}),ui=/[\0-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,ci=/[\0-\x1F\x7F-\x9F]/,hi=/[!-#%-\*,-\/:;\?@\[-\]_\{\}\xA1\xA7\xAB\xB6\xB7\xBB\xBF\u037E\u0387\u055A-\u055F\u0589\u058A\u05BE\u05C0\u05C3\u05C6\u05F3\u05F4\u0609\u060A\u060C\u060D\u061B\u061D-\u061F\u066A-\u066D\u06D4\u0700-\u070D\u07F7-\u07F9\u0830-\u083E\u085E\u0964\u0965\u0970\u09FD\u0A76\u0AF0\u0C77\u0C84\u0DF4\u0E4F\u0E5A\u0E5B\u0F04-\u0F12\u0F14\u0F3A-\u0F3D\u0F85\u0FD0-\u0FD4\u0FD9\u0FDA\u104A-\u104F\u10FB\u1360-\u1368\u1400\u166E\u169B\u169C\u16EB-\u16ED\u1735\u1736\u17D4-\u17D6\u17D8-\u17DA\u1800-\u180A\u1944\u1945\u1A1E\u1A1F\u1AA0-\u1AA6\u1AA8-\u1AAD\u1B5A-\u1B60\u1B7D\u1B7E\u1BFC-\u1BFF\u1C3B-\u1C3F\u1C7E\u1C7F\u1CC0-\u1CC7\u1CD3\u2010-\u2027\u2030-\u2043\u2045-\u2051\u2053-\u205E\u207D\u207E\u208D\u208E\u2308-\u230B\u2329\u232A\u2768-\u2775\u27C5\u27C6\u27E6-\u27EF\u2983-\u2998\u29D8-\u29DB\u29FC\u29FD\u2CF9-\u2CFC\u2CFE\u2CFF\u2D70\u2E00-\u2E2E\u2E30-\u2E4F\u2E52-\u2E5D\u3001-\u3003\u3008-\u3011\u3014-\u301F\u3030\u303D\u30A0\u30FB\uA4FE\uA4FF\uA60D-\uA60F\uA673\uA67E\uA6F2-\uA6F7\uA874-\uA877\uA8CE\uA8CF\uA8F8-\uA8FA\uA8FC\uA92E\uA92F\uA95F\uA9C1-\uA9CD\uA9DE\uA9DF\uAA5C-\uAA5F\uAADE\uAADF\uAAF0\uAAF1\uABEB\uFD3E\uFD3F\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE61\uFE63\uFE68\uFE6A\uFE6B\uFF01-\uFF03\uFF05-\uFF0A\uFF0C-\uFF0F\uFF1A\uFF1B\uFF1F\uFF20\uFF3B-\uFF3D\uFF3F\uFF5B\uFF5D\uFF5F-\uFF65]|\uD800[\uDD00-\uDD02\uDF9F\uDFD0]|\uD801\uDD6F|\uD802[\uDC57\uDD1F\uDD3F\uDE50-\uDE58\uDE7F\uDEF0-\uDEF6\uDF39-\uDF3F\uDF99-\uDF9C]|\uD803[\uDEAD\uDF55-\uDF59\uDF86-\uDF89]|\uD804[\uDC47-\uDC4D\uDCBB\uDCBC\uDCBE-\uDCC1\uDD40-\uDD43\uDD74\uDD75\uDDC5-\uDDC8\uDDCD\uDDDB\uDDDD-\uDDDF\uDE38-\uDE3D\uDEA9]|\uD805[\uDC4B-\uDC4F\uDC5A\uDC5B\uDC5D\uDCC6\uDDC1-\uDDD7\uDE41-\uDE43\uDE60-\uDE6C\uDEB9\uDF3C-\uDF3E]|\uD806[\uDC3B\uDD44-\uDD46\uDDE2\uDE3F-\uDE46\uDE9A-\uDE9C\uDE9E-\uDEA2\uDF00-\uDF09]|\uD807[\uDC41-\uDC45\uDC70\uDC71\uDEF7\uDEF8\uDF43-\uDF4F\uDFFF]|\uD809[\uDC70-\uDC74]|\uD80B[\uDFF1\uDFF2]|\uD81A[\uDE6E\uDE6F\uDEF5\uDF37-\uDF3B\uDF44]|\uD81B[\uDE97-\uDE9A\uDFE2]|\uD82F\uDC9F|\uD836[\uDE87-\uDE8B]|\uD83A[\uDD5E\uDD5F]/,li=/[\$\+<->\^`\|~\xA2-\xA6\xA8\xA9\xAC\xAE-\xB1\xB4\xB8\xD7\xF7\u02C2-\u02C5\u02D2-\u02DF\u02E5-\u02EB\u02ED\u02EF-\u02FF\u0375\u0384\u0385\u03F6\u0482\u058D-\u058F\u0606-\u0608\u060B\u060E\u060F\u06DE\u06E9\u06FD\u06FE\u07F6\u07FE\u07FF\u0888\u09F2\u09F3\u09FA\u09FB\u0AF1\u0B70\u0BF3-\u0BFA\u0C7F\u0D4F\u0D79\u0E3F\u0F01-\u0F03\u0F13\u0F15-\u0F17\u0F1A-\u0F1F\u0F34\u0F36\u0F38\u0FBE-\u0FC5\u0FC7-\u0FCC\u0FCE\u0FCF\u0FD5-\u0FD8\u109E\u109F\u1390-\u1399\u166D\u17DB\u1940\u19DE-\u19FF\u1B61-\u1B6A\u1B74-\u1B7C\u1FBD\u1FBF-\u1FC1\u1FCD-\u1FCF\u1FDD-\u1FDF\u1FED-\u1FEF\u1FFD\u1FFE\u2044\u2052\u207A-\u207C\u208A-\u208C\u20A0-\u20C0\u2100\u2101\u2103-\u2106\u2108\u2109\u2114\u2116-\u2118\u211E-\u2123\u2125\u2127\u2129\u212E\u213A\u213B\u2140-\u2144\u214A-\u214D\u214F\u218A\u218B\u2190-\u2307\u230C-\u2328\u232B-\u2426\u2440-\u244A\u249C-\u24E9\u2500-\u2767\u2794-\u27C4\u27C7-\u27E5\u27F0-\u2982\u2999-\u29D7\u29DC-\u29FB\u29FE-\u2B73\u2B76-\u2B95\u2B97-\u2BFF\u2CE5-\u2CEA\u2E50\u2E51\u2E80-\u2E99\u2E9B-\u2EF3\u2F00-\u2FD5\u2FF0-\u2FFF\u3004\u3012\u3013\u3020\u3036\u3037\u303E\u303F\u309B\u309C\u3190\u3191\u3196-\u319F\u31C0-\u31E3\u31EF\u3200-\u321E\u322A-\u3247\u3250\u3260-\u327F\u328A-\u32B0\u32C0-\u33FF\u4DC0-\u4DFF\uA490-\uA4C6\uA700-\uA716\uA720\uA721\uA789\uA78A\uA828-\uA82B\uA836-\uA839\uAA77-\uAA79\uAB5B\uAB6A\uAB6B\uFB29\uFBB2-\uFBC2\uFD40-\uFD4F\uFDCF\uFDFC-\uFDFF\uFE62\uFE64-\uFE66\uFE69\uFF04\uFF0B\uFF1C-\uFF1E\uFF3E\uFF40\uFF5C\uFF5E\uFFE0-\uFFE6\uFFE8-\uFFEE\uFFFC\uFFFD]|\uD800[\uDD37-\uDD3F\uDD79-\uDD89\uDD8C-\uDD8E\uDD90-\uDD9C\uDDA0\uDDD0-\uDDFC]|\uD802[\uDC77\uDC78\uDEC8]|\uD805\uDF3F|\uD807[\uDFD5-\uDFF1]|\uD81A[\uDF3C-\uDF3F\uDF45]|\uD82F\uDC9C|\uD833[\uDF50-\uDFC3]|\uD834[\uDC00-\uDCF5\uDD00-\uDD26\uDD29-\uDD64\uDD6A-\uDD6C\uDD83\uDD84\uDD8C-\uDDA9\uDDAE-\uDDEA\uDE00-\uDE41\uDE45\uDF00-\uDF56]|\uD835[\uDEC1\uDEDB\uDEFB\uDF15\uDF35\uDF4F\uDF6F\uDF89\uDFA9\uDFC3]|\uD836[\uDC00-\uDDFF\uDE37-\uDE3A\uDE6D-\uDE74\uDE76-\uDE83\uDE85\uDE86]|\uD838[\uDD4F\uDEFF]|\uD83B[\uDCAC\uDCB0\uDD2E\uDEF0\uDEF1]|\uD83C[\uDC00-\uDC2B\uDC30-\uDC93\uDCA0-\uDCAE\uDCB1-\uDCBF\uDCC1-\uDCCF\uDCD1-\uDCF5\uDD0D-\uDDAD\uDDE6-\uDE02\uDE10-\uDE3B\uDE40-\uDE48\uDE50\uDE51\uDE60-\uDE65\uDF00-\uDFFF]|\uD83D[\uDC00-\uDED7\uDEDC-\uDEEC\uDEF0-\uDEFC\uDF00-\uDF76\uDF7B-\uDFD9\uDFE0-\uDFEB\uDFF0]|\uD83E[\uDC00-\uDC0B\uDC10-\uDC47\uDC50-\uDC59\uDC60-\uDC87\uDC90-\uDCAD\uDCB0\uDCB1\uDD00-\uDE53\uDE60-\uDE6D\uDE70-\uDE7C\uDE80-\uDE88\uDE90-\uDEBD\uDEBF-\uDEC5\uDECE-\uDEDB\uDEE0-\uDEE8\uDEF0-\uDEF8\uDF00-\uDF92\uDF94-\uDFCA]/,fi=/[ \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000]/,di=Object.freeze({__proto__:null,Any:ui,Cc:ci,Cf:/[\xAD\u0600-\u0605\u061C\u06DD\u070F\u0890\u0891\u08E2\u180E\u200B-\u200F\u202A-\u202E\u2060-\u2064\u2066-\u206F\uFEFF\uFFF9-\uFFFB]|\uD804[\uDCBD\uDCCD]|\uD80D[\uDC30-\uDC3F]|\uD82F[\uDCA0-\uDCA3]|\uD834[\uDD73-\uDD7A]|\uDB40[\uDC01\uDC20-\uDC7F]/,P:hi,S:li,Z:fi}),pi=new Uint16Array('<\0\0\0\0\0\0EMabcfglmnoprstu\\bfmsligP&cutereve;iyx}rc;r;ravepha;acr;d;gpon;f;plyFunction;ingcsr;ign;ildemlaceforsucrkslash;;ed;y;crtause;noullis;a;r;pf;eve;cmpeq;HOacdefhilorsucy;PYcpyute;;italDifferentialD;leys;aeioron;dilrc;nint;ot;dnilla;terDot;i;rcleDMPTot;inus;lus;imes;ocskwiseContourIntegral;eCurlyDQoubleQuote;uote;lnpuon;e;gitruent;nt;ourIntegral;fr;oduct;nterClockwiseContourIntegral;oss;cr;p;Cap;DJSZacefios;otrahd;cy;cy;cy;grsger;r;hv;ayron;;l;ta;r;afcmriticalADGTcute;o;bleAcute;rave;ilde;ond;ferentialD;\0\0\0\0f;;DEot;qual;bleCDLRUVontourIntegrao\0\0nArrow;eoftARTrrow;ightArrow;engLReftARrrow;ightArrow;ightArrow;ightATrrow;ee;p\0\0rrow;ownArrow;erticalBar;nABLRTarrow;BUar;pArrow;reve;eft\0\0ightVector;eeVector;ector;Bar;ight\0eeVector;ector;Bar;ee;Arrow;ctr;rok;NTacdfglmopqstuxG;Hcuteaiyron;rc;ot;r;raveement;apcr;ty\0\0mallSquare;erySmallSquare;gpon;f;silon;uail;Tilde;librium;cir;m;a;mlipsts;onentialE;cfiosy;r;lled\0\0mallSquare;erySmallSquare;\0\0\0f;All;riertrf;cJTabcdfgorstcy;>mma;d;reve;eiydil;rc;;ot;r;;pf;eaterEFGLSTqual;Less;ullEqual;reater;ess;lantEqual;ilde;cr;;AacfiosuRDcy;ctek;;irc;r;lbertSpace;\0f;izontalLine;ctrok;mpownHumqual;EJOacdfgmnostucy;lig;cy;cuteiyrc;ot;r;rave;apcgr;inaryI;lie\0;egrral;section;isibleCTomma;imes;gpton;f;a;cr;ilde;\0cy;lcfosuiyrc;;r;pf;\0r;rcy;kcy;HJacfoscy;cy;ppa;eydil;;r;pf;cr;JTaceflmostcy;<cmnprute;bda;g;lacetrf;r;aeyron;dil;;fstACDFRTUVarnrgleBracket;row;BRar;ightArrow;eiling;o\0bleBracket;n\0eeVector;ector;Bar;loor;ightAVrrow;ector;ere;AVrrow;ector;iangle;BEar;qual;pDTVownVector;eeVector;ector;Bar;ector;Bar;ightsEFGLSTqualGreater;ullEqual;reater;ess;lantEqual;ilde;r;;eftarrow;idot;npwgLRlreftARrrow;ightArrow;ightArrow;eftarightightf;erLReftArrow;ightArrow;cht;rok;;acefiosup;y;dliumSpace;lintrf;r;nusPlus;pf;c;Jacefostucy;cute;aeyron;dil;;gswativeMTVediumSpace;hicneryThitedGLreaterGreateessLesLine;r;Bnptreak;BreakingSpace;f;;CDEGHLNPRSTVoungruent;pCap;oubleVerticalBar;lqxement;ual;Tilde;ists;reater;EFGLSTqual;ullEqual;reater;ess;lantEqual;ilde;umpownHump;qual;efstTriangle;BEar;qual;s;EGLSTqual;reater;ess;lantEqual;ilde;estedGLreaterGreater;essLess;recedes;ESqual;lantEqual;eiverseElement;ghtTriangle;BEar;qual;quuareSubpset;Equal;erset;Equal;bcpset;Equal;ceeds;ESTqual;lantEqual;ilde;erset;Equal;ilde;EFTqual;ullEqual;ilde;erticalBar;cr;ilde;Eacdfgmoprstuvlig;cuteiyrc;blac;r;raveaeicr;ga;cron;pf;enCurlyDQoubleQuote;uote;;clr;ashidees;mlerBParr;acek;et;arenthesis;acfhilorsrtialD;y;r;i;;usMinus;ipncareplanf;;eiocedes;ESTqual;lantEqual;ilde;me;dpuct;ortion;al;cir;;UfosOT"r;pf;cr;BEacefhiorsuarr;Gcnrute;g;r;tl;aeyron;dil;;;verseEUlqement;uilibrium;pEquilibrium;ro;ghtACDFTUVanrgleBracket;row;BLar;eftArrow;eiling;o\0bleBracket;n\0eeVector;ector;Bar;loor;ere;AVrrow;ector;iangle;BEar;qual;pDTVownVector;eeVector;ector;Bar;ector;Bar;puf;ndImplies;ightarrow;chr;;leDelayed;HOacfhimoqstuCcHcy;y;FTcy;cute;;aeiyron;dil;rc;;r;ortDLRUownArroweftArrowightArrowpArrow;gma;allCircle;pf;\0\0t;are;ISUntersection;ubpset;Equal;erset;Equal;nion;cr;ar;bcmp;set;Equal;cheeds;ESTqual;lantEqual;ilde;Th;;esrset;Equal;etHRSacfhiorsORNADE;Hccy;y;bu;;aeyron;dil;;r;ei\0efore;a;cnkSpace;Space;lde;EFTqual;ullEqual;ilde;pf;ipleDot;ctr;rok;\0\0\0\0\0\0\0cruter;ocir;r\0y;ve;iyrc;blac;r;raveacr;dierBParr;acek;et;arenthesis;on;Plus;gpon;f;ADETadpsrrow;BDar;ownArrow;ownArrow;quilibrium;ee;Arrow;ownerLReftArrow;ightArrow;i;lon;ing;cr;ilde;mlDbcdefosvash;ar;y;ash;l;er;btyar;;icalBLSTar;ine;eparator;ilde;ThinSpace;r;pf;cr;dash;cefosirc;dge;r;pf;cr;fiosr;;pf;cr;AIUacfosucy;cy;cy;cuteiyrc;;r;pf;cr;ml;Hacdefoscy;cute;ayron;;ot;\0oWidta;r;pf;cr;\0\0\0\0\0\0\0cutereve;;Ediuy;;rcte;lig;r;raveepfpsym;ha;apcclr;g;\0\0;adsvnd;;lope;;;elmrsz;esd;a;;;;;;;;t;vb;d;pth;arr;gpon;f;;Eaeiop;cir;;d;s;rox;eingctyr;;mp;eildemlcioninnt;Nabcdefiklnoprsuot;crkcepsong;psilon;rime;im;eq;ee;ed;gerk;tbrk;oy;quo;cmprtaus;eptyv;snoahw;;een;r;gcostuvwaiurc;pdptot;lus;imes;\0\0cup;ar;riangleduown;p;plus;earow;akocnklstozenge;riangle;dlrown;eft;ight;k;\0\0;;4;ck;eo;q=uiv;t;ptwxf;;tomtie;DHUVbdhmptuvLRlr;;;;;DUdu;;;;LRlr;;;;;HLRhlr;;;;;;ox;LRlr;;;;;DUdu;;;;inus;lus;imes;LRlr;;;;;HLRhlr;;;;;;evbarceior;mi;m;el;bh;sub;l;etp;Ee;;q\0\0\0\0\0\0\0\0\0\0cprute;;abcdsnd;rcup;aup;p;ot;;eot;aeiu\0s;on;dilrc;ps;sm;ot;dmnilptyv;t;err;ceiy;ck;mark;r;Ecefms;;elq;e\0\0rrowlreft;ight;RSacd;st;irc;ash;nint;id;cir;ubs;uit\0on;e;q\0\0a;t;;flemxente\0;dot;nfry;o;sr;aorr;ss;cur;bp;e;;e;dot;delprvwarrlr;;\0\0r;c;arr;p;;bcdosrcap;aup;p;ot;r;;alrvrr;m;yevwq\0\0reuee;edge;enearrowlreftightecioninnt;lcty;AHabcdefhijlorstuwzrar;glrsger;eth;h;varow;aayron;;;aogrr;tseq;glmta;ptyv;irsht;;arlraegsvm;osnd;suit;amma;in;;iode;ontimes;ncy;c\0\0rn;op;lptuwlar;f;;empsq;dot;inus;lus;quare;blebarwedgnadhownarrowarpoonlrefighkaro\0\0rn;op;cotry;;l;rok;drot;i;fahraangle;ciy;grarr;DacdefglmnopqrstuxDoocsuteter;aioyron;r;clon;;ot;Drot;;;rsave;dot;;ilsnters;;;dot;apscr;ty;svetp1;;;gs;p;gpon;f;alsr;sl;us;i;lvon;csuviorc\0\0antgltressaeils;st;v;DD;parsl;Daot;rr;cdir;oah;mrlo;cipl;seoctationential\0\0\0\0\0\0\0llingdotsey;male;ilrlig;\0\0g;ig;;lig;lig;fjaltt;ig;ns;of;\0f;ak;v;artint;aocs\0\0;;;;\0;;\0\0;;5;\0;;8;l;wn;cr;Eabcdefgijlnorstv;l;cmpute;ma;d;reve;iyrc;;ot;;lqs;qslan;cdlc;ot;o;l;;es;r;;gmel;cy;;Eaj;;;Eaes;p;prox;q;qim;pf;cir;m;el;;>;cdlqrci;r;ot;Par;uest;adels\0pror;qlqlesienrtneqq;Aabcefkosyrilmrrsfildrcy;;cwir;;ar;irc;alrrts;uitlip;con;r;sewarow;arow;amoprrr;tht;klreftarrow;ightarrow;f;bar;cltr;asrok;bpull;hen\0\0\0\0\0\0cute;iyrc;cxy;clfr;rave;inoinnt;t;fin;ta;lig;aopcgtr;elpinarh;f;ed;;cfotare;in;tie;do;celpal;grerarhk;rod;cgpty;on;f;a;uestcir;n;Edsv;ot;;v;;ilde;\0cy;lcfmosuiyrc;;r;ath;pf;\0r;rcy;kcy;acfghjosppa;v;eydil;;r;reen;cy;cy;pf;cr;ABEHabcdefghjlmnoprstuvartrail;arr;;g;ar;\0\0\0\0\0\0\0\0\0ute;mptyv;rabda;g;dl;;uor;bfhlpst;fs;s;p;l;im;l;;aeil;;s;abrrr;rk;akcek;;es;ldu;;aeuyron;diil;;cqrsa;uo;rduhar;shar;h;;fgqstahlrtrrow;taarpoonduownpeftarrows;ightahsrrow;sarpoonquigarrohreetimes;;qslan;cdgsc;ot;o;r;;es;adegspproot;qgqgtiilrsht;;;E;rdu;l;lk;cy;;achtrorneard;ri;iodot;ust;acheEaes;p;prox;q;qim;abnoptwznrg;r;rglmreftarightapsto;ightparrowlrefight;aflr;;us;imes;st;;efngear;lt;achmtrornear;d;;ri;achiqtquo;r;m;eg;;buo;r;rok;<;cdhilqrci;r;remes;arr;uest;Piar;;efrdushar;har;enrtneqq;DacdefhilnopsuDot;clprret;;ese;sto;dluowefker;oymma;;ash;asuredangler;o;cdnro;acdsir;otus;bd;u;p;dpels;f;ctr;pos;lmtimap;GLRVabcdefghijlmoprstuvwgt;;veltftarrrow;ightarrow;;;vightarrow;Ddash;ash;bcnptlaute;g;;Eiop;d;s;rour;al;s\0pmp;eaeouy\0;on;dil;ng;dot;p;;ash;;Aadqsxrr;rhrk;;oot;uieiar;ist;sr;Eest;qs;qslani;rAaprrr;ar;;sv;d;cy;AEadestr;rr;r;;fqstarrroightarro;qslan;si;ri;eiptf;;inn;Edv;ot;;;i;v;;aorr;astllel;;lint;;ceu;c;eAaitrrr;cw;;ghtarrowri;echimpqu;ceru;ort\0\0arm;e;qsubpbcp;Ees;et;eq;qc;e;Ees;et;eq;qgilrldeianglelreft;eight;e;m;esro;p;DHadgilrsash;arr;p;ash;et;;>nfin;Aetrr;;;r<ie;Atrr;rie;im;Aanrr;rhrk;;oear;\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0csuteiyr;c;abioslac;v;old;lig;crir;;\0\0\0n;ave;bmar;acitrirr;oss;n;aeicr;ga;cdnron;;pf;aelr;rp;;adiosvr;efmr;ofgof;r;lope;;cloashl;idees;as;mlbar;\0\0\0\0\0\0\0\0\0r;ast;lle\0\0m;;y;rcimptnt;od;il;enk;r;imo;v;mane;;tvchfork;aunckk;h;s;abcdemstcir;ir;ou;;nim;wo;ipuntint;f;nd;Eaceinosu;p;u;c;acenspprourlyeaespprox;qq;im;ime;sEasdfpalslar;ine;urf;;trel;cir;;ncsp;fiopsur;pf;rime;cr;aeoteirnionnt;st;eABHabcdefhilmnoprstuxartrail;arar;cdenqrteu;te;imptyv;g;del;;uor;abcfhlpstwp;;fs;;s;l;im;l;;aiil;o;nalabrrrk;akcek;;es;ldu;;aeuyron;diil;;clqsa;dhar;uo;rh;acgl;ipsnart;ilrsht;;aordu;l;;v;gnshtahlrstrrow;taarpoonduowpeftahrrowarpoonightarrows;quigarrohreetimes;g;ingdotseahmra;oust;achemid;abptnrg;r;raflr;;us;imes;apr;gt;olint;arachqquo;r;buo;rhirremes;i;efltri;luhar;;\0\0\0\0\0\0\0cute;qu;Eaceinpsy;\0;on;u;dil;rc;Eas;p;im;olint;i;ot;be;Aacmstxrr;rhr;oti;war;minnut;r;oacoyrp;hycy;;rt\0\0iaragmma;fv;;deglnprot;;q;E;;E;e;lus;arr;araeitlslsetmhp;parsl;dle;;e;s;flptcy;;b;ar;f;adres;uitcsuaup;s;p;s;ubp;eset;e;eset;e;afrarcemtr;tmiararr;fanighteppsilohsbcmnp;Edemnprs;ot;;dot;ult;Ee;;lus;arr;eiut;enq;qeq;qm;bp;;c;acenspprourlyeaespproqg;123;Edehlmnps;ost;ub;;dot;soul;b;arr;ult;Ee;;lus;eiut;enq;qeq;qm;bp;;Aanrr;rhr;owar;lig\0\0\0\0\0\0\0\0\0\0\0\0get;;raeyron;dil;;lrec;r;eiko\0e4fa;svym;cnkaspproimsasrnes;bd;ar;;eps;bcfot;ir;;ork;rime;aipdadempstngle;dlqrowneft;e;ight;eot;inus;lus;b;ime;ezium;chtry;;cy;rok;ioxheadlreftarroightarrowAHabcdfghlmoprstuwrar;cruter\0y;ve;iyrc;abhrlac;airsht;;raverlrlk;ct\0\0rn;erop;ri;alcr;gpon;f;adhlsuownarpoonlrefighi;hlonparrows;cit\0\0rn;erop;ng;ri;cr;dirot;lde;i;famrlangle;ABDacdeflnoprszrar;v;asnrgrt;eknprstappothinhirop;hiugmbpsetneq;q;setneq;q;hretianglelreftighty;ashelr;bear;q;lip;btar;trsubppf;rotrcur;bpnEenEeigzag;cefoprsirc;dibgar;e;q;erp;r;pf;;eatcr;\0\0\0\0\0\0\0trr;Aarr;Aarrais;dptfl;imAarrcqr;ptracefiosucuyte;iyrc;;nr;cy;pf;cr;cmy;lacdefhioswcute;ayron;;ot;ettra;r;cy;grarr;pf;cr;jn;j;'.split("").map((t=>t.charCodeAt(0)))),mi=new Uint16Array("aglq\t\0\0p;os;t;t;uot;".split("").map((t=>t.charCodeAt(0))));const $i=new Map([[0,65533],[128,8364],[130,8218],[131,402],[132,8222],[133,8230],[134,8224],[135,8225],[136,710],[137,8240],[138,352],[139,8249],[140,338],[142,381],[145,8216],[146,8217],[147,8220],[148,8221],[149,8226],[150,8211],[151,8212],[152,732],[153,8482],[154,353],[155,8250],[156,339],[158,382],[159,376]]),gi=null!==(oi=String.fromCodePoint)&&void 0!==oi?oi:function(t){let e="";return t>65535&&(t-=65536,e+=String.fromCharCode(t>>>10&1023|55296),t=56320|1023&t),e+=String.fromCharCode(t),e};var bi;!function(t){t[t.NUM=35]="NUM",t[t.SEMI=59]="SEMI",t[t.EQUALS=61]="EQUALS",t[t.ZERO=48]="ZERO",t[t.NINE=57]="NINE",t[t.LOWER_A=97]="LOWER_A",t[t.LOWER_F=102]="LOWER_F",t[t.LOWER_X=120]="LOWER_X",t[t.LOWER_Z=122]="LOWER_Z",t[t.UPPER_A=65]="UPPER_A",t[t.UPPER_F=70]="UPPER_F",t[t.UPPER_Z=90]="UPPER_Z"}(bi||(bi={}));var yi,vi,wi;function ki(t){return t>=bi.ZERO&&t<=bi.NINE}function Ei(t){return t>=bi.UPPER_A&&t<=bi.UPPER_F||t>=bi.LOWER_A&&t<=bi.LOWER_F}function Di(t){return t===bi.EQUALS||function(t){return t>=bi.UPPER_A&&t<=bi.UPPER_Z||t>=bi.LOWER_A&&t<=bi.LOWER_Z||ki(t)}(t)}!function(t){t[t.VALUE_LENGTH=49152]="VALUE_LENGTH",t[t.BRANCH_LENGTH=16256]="BRANCH_LENGTH",t[t.JUMP_TABLE=127]="JUMP_TABLE"}(yi||(yi={})),function(t){t[t.EntityStart=0]="EntityStart",t[t.NumericStart=1]="NumericStart",t[t.NumericDecimal=2]="NumericDecimal",t[t.NumericHex=3]="NumericHex",t[t.NamedEntity=4]="NamedEntity"}(vi||(vi={})),function(t){t[t.Legacy=0]="Legacy",t[t.Strict=1]="Strict",t[t.Attribute=2]="Attribute"}(wi||(wi={}));class xi{constructor(t,e,i){this.decodeTree=t,this.emitCodePoint=e,this.errors=i,this.state=vi.EntityStart,this.consumed=1,this.result=0,this.treeIndex=0,this.excess=1,this.decodeMode=wi.Strict}startEntity(t){this.decodeMode=t,this.state=vi.EntityStart,this.result=0,this.treeIndex=0,this.excess=1,this.consumed=1}write(t,e){switch(this.state){case vi.EntityStart:return t.charCodeAt(e)===bi.NUM?(this.state=vi.NumericStart,this.consumed+=1,this.stateNumericStart(t,e+1)):(this.state=vi.NamedEntity,this.stateNamedEntity(t,e));case vi.NumericStart:return this.stateNumericStart(t,e);case vi.NumericDecimal:return this.stateNumericDecimal(t,e);case vi.NumericHex:return this.stateNumericHex(t,e);case vi.NamedEntity:return this.stateNamedEntity(t,e)}}stateNumericStart(t,e){return e>=t.length?-1:(32|t.charCodeAt(e))===bi.LOWER_X?(this.state=vi.NumericHex,this.consumed+=1,this.stateNumericHex(t,e+1)):(this.state=vi.NumericDecimal,this.stateNumericDecimal(t,e))}addToNumericResult(t,e,i,r){if(e!==i){const s=i-e;this.result=this.result*Math.pow(r,s)+parseInt(t.substr(e,s),r),this.consumed+=s}}stateNumericHex(t,e){const i=e;for(;e<t.length;){const r=t.charCodeAt(e);if(!ki(r)&&!Ei(r))return this.addToNumericResult(t,i,e,16),this.emitNumericEntity(r,3);e+=1}return this.addToNumericResult(t,i,e,16),-1}stateNumericDecimal(t,e){const i=e;for(;e<t.length;){const r=t.charCodeAt(e);if(!ki(r))return this.addToNumericResult(t,i,e,10),this.emitNumericEntity(r,2);e+=1}return this.addToNumericResult(t,i,e,10),-1}emitNumericEntity(t,e){var i;if(this.consumed<=e)return null===(i=this.errors)||void 0===i||i.absenceOfDigitsInNumericCharacterReference(this.consumed),0;if(t===bi.SEMI)this.consumed+=1;else if(this.decodeMode===wi.Strict)return 0;return this.emitCodePoint(function(t){var e;return t>=55296&&t<=57343||t>1114111?65533:null!==(e=$i.get(t))&&void 0!==e?e:t}(this.result),this.consumed),this.errors&&(t!==bi.SEMI&&this.errors.missingSemicolonAfterCharacterReference(),this.errors.validateNumericCharacterReference(this.result)),this.consumed}stateNamedEntity(t,e){const{decodeTree:i}=this;let r=i[this.treeIndex],s=(r&yi.VALUE_LENGTH)>>14;for(;e<t.length;e++,this.excess++){const n=t.charCodeAt(e);if(this.treeIndex=_i(i,r,this.treeIndex+Math.max(1,s),n),this.treeIndex<0)return 0===this.result||this.decodeMode===wi.Attribute&&(0===s||Di(n))?0:this.emitNotTerminatedNamedEntity();if(r=i[this.treeIndex],s=(r&yi.VALUE_LENGTH)>>14,0!==s){if(n===bi.SEMI)return this.emitNamedEntityData(this.treeIndex,s,this.consumed+this.excess);this.decodeMode!==wi.Strict&&(this.result=this.treeIndex,this.consumed+=this.excess,this.excess=0)}}return-1}emitNotTerminatedNamedEntity(){var t;const{result:e,decodeTree:i}=this,r=(i[e]&yi.VALUE_LENGTH)>>14;return this.emitNamedEntityData(e,r,this.consumed),null===(t=this.errors)||void 0===t||t.missingSemicolonAfterCharacterReference(),this.consumed}emitNamedEntityData(t,e,i){const{decodeTree:r}=this;return this.emitCodePoint(1===e?r[t]&~yi.VALUE_LENGTH:r[t+1],i),3===e&&this.emitCodePoint(r[t+2],i),i}end(){var t;switch(this.state){case vi.NamedEntity:return 0===this.result||this.decodeMode===wi.Attribute&&this.result!==this.treeIndex?0:this.emitNotTerminatedNamedEntity();case vi.NumericDecimal:return this.emitNumericEntity(0,2);case vi.NumericHex:return this.emitNumericEntity(0,3);case vi.NumericStart:return null===(t=this.errors)||void 0===t||t.absenceOfDigitsInNumericCharacterReference(this.consumed),0;case vi.EntityStart:return 0}}}function Fi(t){let e="";const i=new xi(t,(t=>e+=gi(t)));return function(t,r){let s=0,n=0;for(;(n=t.indexOf("&",n))>=0;){e+=t.slice(s,n),i.startEntity(r);const o=i.write(t,n+1);if(o<0){s=n+i.end();break}s=n+o,n=0===o?s+1:s}const o=e+t.slice(s);return e="",o}}function _i(t,e,i,r){const s=(e&yi.BRANCH_LENGTH)>>7,n=e&yi.JUMP_TABLE;if(0===s)return 0!==n&&r===n?i:-1;if(n){const e=r-n;return e<0||e>=s?-1:t[i+e]-1}let o=i,a=o+s-1;for(;o<=a;){const e=o+a>>>1,i=t[e];if(i<r)o=e+1;else{if(!(i>r))return t[e+s];a=e-1}}return-1}const Ai=Fi(pi);function ji(t,e=wi.Legacy){return Ai(t,e)}function Ci(t){return"[object String]"===function(t){return Object.prototype.toString.call(t)}(t)}Fi(mi);const zi=Object.prototype.hasOwnProperty;function Si(t){return Array.prototype.slice.call(arguments,1).forEach((function(e){if(e){if("object"!=typeof e)throw new TypeError(e+"must be object");Object.keys(e).forEach((function(i){t[i]=e[i]}))}})),t}function Oi(t,e,i){return[].concat(t.slice(0,e),i,t.slice(e+1))}function qi(t){return!(t>=55296&&t<=57343)&&(!(t>=64976&&t<=65007)&&(!!(65535&~t&&65534!=(65535&t))&&(!(t>=0&&t<=8)&&(11!==t&&(!(t>=14&&t<=31)&&(!(t>=127&&t<=159)&&!(t>1114111)))))))}function Ii(t){if(t>65535){const e=55296+((t-=65536)>>10),i=56320+(1023&t);return String.fromCharCode(e,i)}return String.fromCharCode(t)}const Pi=/\\([!"#$%&'()*+,\-./:;<=>?@[\\\]^_`{|}~])/g,Ti=new RegExp(Pi.source+"|"+/&([a-z#][a-z0-9]{1,31});/gi.source,"gi"),Ni=/^#((?:x[a-f0-9]{1,8}|[0-9]{1,8}))$/i;function Mi(t){return t.indexOf("\\")<0&&t.indexOf("&")<0?t:t.replace(Ti,(function(t,e,i){return e||function(t,e){if(35===e.charCodeAt(0)&&Ni.test(e)){const i="x"===e[1].toLowerCase()?parseInt(e.slice(2),16):parseInt(e.slice(1),10);return qi(i)?Ii(i):t}const i=ji(t);return i!==t?i:t}(t,i)}))}const Ri=/[&<>"]/,Bi=/[&<>"]/g,Li={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;"};function Ui(t){return Li[t]}function Vi(t){return Ri.test(t)?t.replace(Bi,Ui):t}const Hi=/[.?*+^$[\]\\(){}|-]/g;function Zi(t){switch(t){case 9:case 32:return!0}return!1}function Gi(t){if(t>=8192&&t<=8202)return!0;switch(t){case 9:case 10:case 11:case 12:case 13:case 32:case 160:case 5760:case 8239:case 8287:case 12288:return!0}return!1}function Ji(t){return hi.test(t)||li.test(t)}function Ki(t){switch(t){case 33:case 34:case 35:case 36:case 37:case 38:case 39:case 40:case 41:case 42:case 43:case 44:case 45:case 46:case 47:case 58:case 59:case 60:case 61:case 62:case 63:case 64:case 91:case 92:case 93:case 94:case 95:case 96:case 123:case 124:case 125:case 126:return!0;default:return!1}}function Wi(t){return t=t.trim().replace(/\s+/g," "),""==="".toLowerCase()&&(t=t.replace(//g,"")),t.toLowerCase().toUpperCase()}const Qi={mdurl:ai,ucmicro:di};var Yi=Object.freeze({__proto__:null,arrayReplaceAt:Oi,assign:Si,escapeHtml:Vi,escapeRE:function(t){return t.replace(Hi,"\\$&")},fromCodePoint:Ii,has:function(t,e){return zi.call(t,e)},isMdAsciiPunct:Ki,isPunctChar:Ji,isSpace:Zi,isString:Ci,isValidEntityCode:qi,isWhiteSpace:Gi,lib:Qi,normalizeReference:Wi,unescapeAll:Mi,unescapeMd:function(t){return t.indexOf("\\")<0?t:t.replace(Pi,"$1")}});var Xi=Object.freeze({__proto__:null,parseLinkDestination:function(t,e,i){let r,s=e;const n={ok:!1,pos:0,str:""};if(60===t.charCodeAt(s)){for(s++;s<i;){if(r=t.charCodeAt(s),10===r)return n;if(60===r)return n;if(62===r)return n.pos=s+1,n.str=Mi(t.slice(e+1,s)),n.ok=!0,n;92===r&&s+1<i?s+=2:s++}return n}let o=0;for(;s<i&&(r=t.charCodeAt(s),32!==r)&&!(r<32||127===r);)if(92===r&&s+1<i){if(32===t.charCodeAt(s+1))break;s+=2}else{if(40===r&&(o++,o>32))return n;if(41===r){if(0===o)break;o--}s++}return e===s||0!==o||(n.str=Mi(t.slice(e,s)),n.pos=s,n.ok=!0),n},parseLinkLabel:function(t,e,i){let r,s,n,o;const a=t.posMax,u=t.pos;for(t.pos=e+1,r=1;t.pos<a;){if(n=t.src.charCodeAt(t.pos),93===n&&(r--,0===r)){s=!0;break}if(o=t.pos,t.md.inline.skipToken(t),91===n)if(o===t.pos-1)r++;else if(i)return t.pos=u,-1}let c=-1;return s&&(c=t.pos),t.pos=u,c},parseLinkTitle:function(t,e,i,r){let s,n=e;const o={ok:!1,can_continue:!1,pos:0,str:"",marker:0};if(r)o.str=r.str,o.marker=r.marker;else{if(n>=i)return o;let r=t.charCodeAt(n);if(34!==r&&39!==r&&40!==r)return o;e++,n++,40===r&&(r=41),o.marker=r}for(;n<i;){if(s=t.charCodeAt(n),s===o.marker)return o.pos=n+1,o.str+=Mi(t.slice(e,n)),o.ok=!0,o;if(40===s&&41===o.marker)return o;92===s&&n+1<i&&n++,n++}return o.can_continue=!0,o.str+=Mi(t.slice(e,n)),o}});const tr={};function er(){this.rules=Si({},tr)}function ir(){this.m=[],this.v=null}function rr(t,e,i){this.type=t,this.tag=e,this.attrs=null,this.map=null,this.nesting=i,this.level=0,this.children=null,this.content="",this.markup="",this.info="",this.meta=null,this.block=!1,this.hidden=!1}function sr(t,e,i){this.src=t,this.env=i,this.tokens=[],this.inlineMode=!1,this.md=e}tr.code_inline=function(t,e,i,r,s){const n=t[e];return"<code"+s.renderAttrs(n)+">"+Vi(n.content)+"</code>"},tr.code_block=function(t,e,i,r,s){const n=t[e];return"<pre"+s.renderAttrs(n)+"><code>"+Vi(t[e].content)+"</code></pre>\n"},tr.fence=function(t,e,i,r,s){const n=t[e],o=n.info?Mi(n.info).trim():"";let a,u="",c="";if(o){const t=o.split(/(\s+)/g);u=t[0],c=t.slice(2).join("")}if(a=i.highlight&&i.highlight(n.content,u,c)||Vi(n.content),0===a.indexOf("<pre"))return a+"\n";if(o){const t=n.attrIndex("class"),e=n.attrs?n.attrs.slice():[];t<0?e.push(["class",i.langPrefix+u]):(e[t]=e[t].slice(),e[t][1]+=" "+i.langPrefix+u);const r={attrs:e};return`<pre><code${s.renderAttrs(r)}>${a}</code></pre>\n`}return`<pre><code${s.renderAttrs(n)}>${a}</code></pre>\n`},tr.image=function(t,e,i,r,s){const n=t[e];return n.attrs[n.attrIndex("alt")][1]=s.renderInlineAsText(n.children,i,r),s.renderToken(t,e,i)},tr.hardbreak=function(t,e,i){return i.xhtmlOut?"<br />\n":"<br>\n"},tr.softbreak=function(t,e,i){return i.breaks?i.xhtmlOut?"<br />\n":"<br>\n":"\n"},tr.text=function(t,e){return Vi(t[e].content)},tr.html_block=function(t,e){return t[e].content},tr.html_inline=function(t,e){return t[e].content},er.prototype.renderAttrs=function(t){let e,i,r;if(!t.attrs)return"";for(r="",e=0,i=t.attrs.length;e<i;e++)r+=" "+Vi(t.attrs[e][0])+'="'+Vi(t.attrs[e][1])+'"';return r},er.prototype.renderToken=function(t,e,i){const r=t[e];let s="";if(r.hidden)return"";r.block&&-1!==r.nesting&&e&&t[e-1].hidden&&(s+="\n"),s+=(-1===r.nesting?"</":"<")+r.tag,s+=this.renderAttrs(r),0===r.nesting&&i.xhtmlOut&&(s+=" /");let n=!1;if(r.block&&(n=!0,1===r.nesting&&e+1<t.length)){const i=t[e+1];("inline"===i.type||i.hidden||-1===i.nesting&&i.tag===r.tag)&&(n=!1)}return s+=n?">\n":">",s},er.prototype.renderInline=function(t,e,i){let r="";const s=this.rules;for(let n=0,o=t.length;n<o;n++){const o=t[n].type;void 0!==s[o]?r+=s[o](t,n,e,i,this):r+=this.renderToken(t,n,e)}return r},er.prototype.renderInlineAsText=function(t,e,i){let r="";for(let s=0,n=t.length;s<n;s++)switch(t[s].type){case"text":case"html_inline":case"html_block":r+=t[s].content;break;case"image":r+=this.renderInlineAsText(t[s].children,e,i);break;case"softbreak":case"hardbreak":r+="\n"}return r},er.prototype.render=function(t,e,i){let r="";const s=this.rules;for(let n=0,o=t.length;n<o;n++){const o=t[n].type;"inline"===o?r+=this.renderInline(t[n].children,e,i):void 0!==s[o]?r+=s[o](t,n,e,i,this):r+=this.renderToken(t,n,e,i)}return r},ir.prototype.q=function(t){for(let e=0;e<this.m.length;e++)if(this.m[e].name===t)return e;return-1},ir.prototype.N=function(){const t=this,e=[""];t.m.forEach((function(t){t.enabled&&t.alt.forEach((function(t){e.indexOf(t)<0&&e.push(t)}))})),t.v={},e.forEach((function(e){t.v[e]=[],t.m.forEach((function(i){i.enabled&&(e&&i.alt.indexOf(e)<0||t.v[e].push(i.fn))}))}))},ir.prototype.at=function(t,e,i){const r=this.q(t),s=i||{};if(-1===r)throw new Error("Parser rule not found: "+t);this.m[r].fn=e,this.m[r].alt=s.alt||[],this.v=null},ir.prototype.before=function(t,e,i,r){const s=this.q(t),n=r||{};if(-1===s)throw new Error("Parser rule not found: "+t);this.m.splice(s,0,{name:e,enabled:!0,fn:i,alt:n.alt||[]}),this.v=null},ir.prototype.after=function(t,e,i,r){const s=this.q(t),n=r||{};if(-1===s)throw new Error("Parser rule not found: "+t);this.m.splice(s+1,0,{name:e,enabled:!0,fn:i,alt:n.alt||[]}),this.v=null},ir.prototype.push=function(t,e,i){const r=i||{};this.m.push({name:t,enabled:!0,fn:e,alt:r.alt||[]}),this.v=null},ir.prototype.enable=function(t,e){Array.isArray(t)||(t=[t]);const i=[];return t.forEach((function(t){const r=this.q(t);if(r<0){if(e)return;throw new Error("Rules manager: invalid rule name "+t)}this.m[r].enabled=!0,i.push(t)}),this),this.v=null,i},ir.prototype.enableOnly=function(t,e){Array.isArray(t)||(t=[t]),this.m.forEach((function(t){t.enabled=!1})),this.enable(t,e)},ir.prototype.disable=function(t,e){Array.isArray(t)||(t=[t]);const i=[];return t.forEach((function(t){const r=this.q(t);if(r<0){if(e)return;throw new Error("Rules manager: invalid rule name "+t)}this.m[r].enabled=!1,i.push(t)}),this),this.v=null,i},ir.prototype.getRules=function(t){return null===this.v&&this.N(),this.v[t]||[]},rr.prototype.attrIndex=function(t){if(!this.attrs)return-1;const e=this.attrs;for(let i=0,r=e.length;i<r;i++)if(e[i][0]===t)return i;return-1},rr.prototype.attrPush=function(t){this.attrs?this.attrs.push(t):this.attrs=[t]},rr.prototype.attrSet=function(t,e){const i=this.attrIndex(t),r=[t,e];i<0?this.attrPush(r):this.attrs[i]=r},rr.prototype.attrGet=function(t){const e=this.attrIndex(t);let i=null;return e>=0&&(i=this.attrs[e][1]),i},rr.prototype.attrJoin=function(t,e){const i=this.attrIndex(t);i<0?this.attrPush([t,e]):this.attrs[i][1]=this.attrs[i][1]+" "+e},sr.prototype.Token=rr;const nr=/\r\n?|\n/g,or=/\0/g;function ar(t){return/^<\/a\s*>/i.test(t)}const ur=/\+-|\.\.|\?\?\?\?|!!!!|,,|--/,cr=/\((c|tm|r)\)/i,hr=/\((c|tm|r)\)/gi,lr={c:"",r:"",tm:""};function fr(t,e){return lr[e.toLowerCase()]}function dr(t){let e=0;for(let i=t.length-1;i>=0;i--){const r=t[i];"text"!==r.type||e||(r.content=r.content.replace(hr,fr)),"link_open"===r.type&&"auto"===r.info&&e--,"link_close"===r.type&&"auto"===r.info&&e++}}function pr(t){let e=0;for(let i=t.length-1;i>=0;i--){const r=t[i];"text"!==r.type||e||ur.test(r.content)&&(r.content=r.content.replace(/\+-/g,"").replace(/\.{2,}/g,"").replace(/([?!])/g,"$1..").replace(/([?!]){4,}/g,"$1$1$1").replace(/,{2,}/g,",").replace(/(^|[^-])---(?=[^-]|$)/gm,"$1").replace(/(^|\s)--(?=\s|$)/gm,"$1").replace(/(^|[^-\s])--(?=[^-\s]|$)/gm,"$1")),"link_open"===r.type&&"auto"===r.info&&e--,"link_close"===r.type&&"auto"===r.info&&e++}}const mr=/['"]/,$r=/['"]/g;function gr(t,e,i){return t.slice(0,e)+i+t.slice(e+1)}function br(t,e){let i;const r=[];for(let s=0;s<t.length;s++){const n=t[s],o=t[s].level;for(i=r.length-1;i>=0&&!(r[i].level<=o);i--);if(r.length=i+1,"text"!==n.type)continue;let a=n.content,u=0,c=a.length;t:for(;u<c;){$r.lastIndex=u;const h=$r.exec(a);if(!h)break;let l=!0,f=!0;u=h.index+1;const d="'"===h[0];let p=32;if(h.index-1>=0)p=a.charCodeAt(h.index-1);else for(i=s-1;i>=0&&("softbreak"!==t[i].type&&"hardbreak"!==t[i].type);i--)if(t[i].content){p=t[i].content.charCodeAt(t[i].content.length-1);break}let m=32;if(u<c)m=a.charCodeAt(u);else for(i=s+1;i<t.length&&("softbreak"!==t[i].type&&"hardbreak"!==t[i].type);i++)if(t[i].content){m=t[i].content.charCodeAt(0);break}const $=Ki(p)||Ji(String.fromCharCode(p)),g=Ki(m)||Ji(String.fromCharCode(m)),b=Gi(p),y=Gi(m);if(y?l=!1:g&&(b||$||(l=!1)),b?f=!1:$&&(y||g||(f=!1)),34===m&&'"'===h[0]&&p>=48&&p<=57&&(f=l=!1),l&&f&&(l=$,f=g),l||f){if(f)for(i=r.length-1;i>=0;i--){let l=r[i];if(r[i].level<o)break;if(l.single===d&&r[i].level===o){let o,f;l=r[i],d?(o=e.md.options.quotes[2],f=e.md.options.quotes[3]):(o=e.md.options.quotes[0],f=e.md.options.quotes[1]),n.content=gr(n.content,h.index,f),t[l.token].content=gr(t[l.token].content,l.pos,o),u+=f.length-1,l.token===s&&(u+=o.length-1),a=n.content,c=a.length,r.length=i;continue t}}l?r.push({token:s,pos:h.index,single:d,level:o}):f&&d&&(n.content=gr(n.content,h.index,""))}else d&&(n.content=gr(n.content,h.index,""))}}}const yr=[["normalize",function(t){let e;e=t.src.replace(nr,"\n"),e=e.replace(or,""),t.src=e}],["block",function(t){let e;t.inlineMode?(e=new t.Token("inline","",0),e.content=t.src,e.map=[0,1],e.children=[],t.tokens.push(e)):t.md.block.parse(t.src,t.md,t.env,t.tokens)}],["inline",function(t){const e=t.tokens;for(let i=0,r=e.length;i<r;i++){const r=e[i];"inline"===r.type&&t.md.inline.parse(r.content,t.md,t.env,r.children)}}],["linkify",function(t){const e=t.tokens;var i;if(t.md.options.linkify)for(let r=0,s=e.length;r<s;r++){if("inline"!==e[r].type||!t.md.linkify.pretest(e[r].content))continue;let s=e[r].children,n=0;for(let o=s.length-1;o>=0;o--){const a=s[o];if("link_close"!==a.type){if("html_inline"===a.type&&(i=a.content,/^<a[>\s]/i.test(i)&&n>0&&n--,ar(a.content)&&n++),!(n>0)&&"text"===a.type&&t.md.linkify.test(a.content)){const i=a.content;let n=t.md.linkify.match(i);const u=[];let c=a.level,h=0;n.length>0&&0===n[0].index&&o>0&&"text_special"===s[o-1].type&&(n=n.slice(1));for(let e=0;e<n.length;e++){const r=n[e].url,s=t.md.normalizeLink(r);if(!t.md.validateLink(s))continue;let o=n[e].text;o=n[e].schema?"mailto:"!==n[e].schema||/^mailto:/i.test(o)?t.md.normalizeLinkText(o):t.md.normalizeLinkText("mailto:"+o).replace(/^mailto:/,""):t.md.normalizeLinkText("http://"+o).replace(/^http:\/\//,"");const a=n[e].index;if(a>h){const e=new t.Token("text","",0);e.content=i.slice(h,a),e.level=c,u.push(e)}const l=new t.Token("link_open","a",1);l.attrs=[["href",s]],l.level=c++,l.markup="linkify",l.info="auto",u.push(l);const f=new t.Token("text","",0);f.content=o,f.level=c,u.push(f);const d=new t.Token("link_close","a",-1);d.level=--c,d.markup="linkify",d.info="auto",u.push(d),h=n[e].lastIndex}if(h<i.length){const e=new t.Token("text","",0);e.content=i.slice(h),e.level=c,u.push(e)}e[r].children=s=Oi(s,o,u)}}else for(o--;s[o].level!==a.level&&"link_open"!==s[o].type;)o--}}}],["replacements",function(t){let e;if(t.md.options.typographer)for(e=t.tokens.length-1;e>=0;e--)"inline"===t.tokens[e].type&&(cr.test(t.tokens[e].content)&&dr(t.tokens[e].children),ur.test(t.tokens[e].content)&&pr(t.tokens[e].children))}],["smartquotes",function(t){if(t.md.options.typographer)for(let e=t.tokens.length-1;e>=0;e--)"inline"===t.tokens[e].type&&mr.test(t.tokens[e].content)&&br(t.tokens[e].children,t)}],["text_join",function(t){let e,i;const r=t.tokens,s=r.length;for(let t=0;t<s;t++){if("inline"!==r[t].type)continue;const s=r[t].children,n=s.length;for(e=0;e<n;e++)"text_special"===s[e].type&&(s[e].type="text");for(e=i=0;e<n;e++)"text"===s[e].type&&e+1<n&&"text"===s[e+1].type?s[e+1].content=s[e].content+s[e+1].content:(e!==i&&(s[i]=s[e]),i++);e!==i&&(s.length=i)}}]];function vr(){this.ruler=new ir;for(let t=0;t<yr.length;t++)this.ruler.push(yr[t][0],yr[t][1])}function wr(t,e,i,r){this.src=t,this.md=e,this.env=i,this.tokens=r,this.bMarks=[],this.eMarks=[],this.tShift=[],this.sCount=[],this.bsCount=[],this.blkIndent=0,this.line=0,this.lineMax=0,this.tight=!1,this.ddIndent=-1,this.listIndent=-1,this.parentType="root",this.level=0;const s=this.src;for(let t=0,e=0,i=0,r=0,n=s.length,o=!1;e<n;e++){const a=s.charCodeAt(e);if(!o){if(Zi(a)){i++,9===a?r+=4-r%4:r++;continue}o=!0}10!==a&&e!==n-1||(10!==a&&e++,this.bMarks.push(t),this.eMarks.push(e),this.tShift.push(i),this.sCount.push(r),this.bsCount.push(0),o=!1,i=0,r=0,t=e+1)}this.bMarks.push(s.length),this.eMarks.push(s.length),this.tShift.push(0),this.sCount.push(0),this.bsCount.push(0),this.lineMax=this.bMarks.length-1}vr.prototype.process=function(t){const e=this.ruler.getRules("");for(let i=0,r=e.length;i<r;i++)e[i](t)},vr.prototype.State=sr,wr.prototype.push=function(t,e,i){const r=new rr(t,e,i);return r.block=!0,i<0&&this.level--,r.level=this.level,i>0&&this.level++,this.tokens.push(r),r},wr.prototype.isEmpty=function(t){return this.bMarks[t]+this.tShift[t]>=this.eMarks[t]},wr.prototype.skipEmptyLines=function(t){for(let e=this.lineMax;t<e&&!(this.bMarks[t]+this.tShift[t]<this.eMarks[t]);t++);return t},wr.prototype.skipSpaces=function(t){for(let e=this.src.length;t<e;t++){if(!Zi(this.src.charCodeAt(t)))break}return t},wr.prototype.skipSpacesBack=function(t,e){if(t<=e)return t;for(;t>e;)if(!Zi(this.src.charCodeAt(--t)))return t+1;return t},wr.prototype.skipChars=function(t,e){for(let i=this.src.length;t<i&&this.src.charCodeAt(t)===e;t++);return t},wr.prototype.skipCharsBack=function(t,e,i){if(t<=i)return t;for(;t>i;)if(e!==this.src.charCodeAt(--t))return t+1;return t},wr.prototype.getLines=function(t,e,i,r){if(t>=e)return"";const s=new Array(e-t);for(let n=0,o=t;o<e;o++,n++){let t=0;const a=this.bMarks[o];let u,c=a;for(u=o+1<e||r?this.eMarks[o]+1:this.eMarks[o];c<u&&t<i;){const e=this.src.charCodeAt(c);if(Zi(e))9===e?t+=4-(t+this.bsCount[o])%4:t++;else{if(!(c-a<this.tShift[o]))break;t++}c++}s[n]=t>i?new Array(t-i+1).join(" ")+this.src.slice(c,u):this.src.slice(c,u)}return s.join("")},wr.prototype.Token=rr;function kr(t,e){const i=t.bMarks[e]+t.tShift[e],r=t.eMarks[e];return t.src.slice(i,r)}function Er(t){const e=[],i=t.length;let r=0,s=t.charCodeAt(r),n=!1,o=0,a="";for(;r<i;)124===s&&(n?(a+=t.substring(o,r-1),o=r):(e.push(a+t.substring(o,r)),a="",o=r+1)),n=92===s,r++,s=t.charCodeAt(r);return e.push(a+t.substring(o)),e}function Dr(t,e){const i=t.eMarks[e];let r=t.bMarks[e]+t.tShift[e];const s=t.src.charCodeAt(r++);if(42!==s&&45!==s&&43!==s)return-1;if(r<i){if(!Zi(t.src.charCodeAt(r)))return-1}return r}function xr(t,e){const i=t.bMarks[e]+t.tShift[e],r=t.eMarks[e];let s=i;if(s+1>=r)return-1;let n=t.src.charCodeAt(s++);if(n<48||n>57)return-1;for(;;){if(s>=r)return-1;if(n=t.src.charCodeAt(s++),!(n>=48&&n<=57)){if(41===n||46===n)break;return-1}if(s-i>=10)return-1}return s<r&&(n=t.src.charCodeAt(s),!Zi(n))?-1:s}const Fr="<[A-Za-z][A-Za-z0-9\\-]*(?:\\s+[a-zA-Z_:][a-zA-Z0-9:._-]*(?:\\s*=\\s*(?:[^\"'=<>`\\x00-\\x20]+|'[^']*'|\"[^\"]*\"))?)*\\s*\\/?>",_r="<\\/[A-Za-z][A-Za-z0-9\\-]*\\s*>",Ar=new RegExp("^(?:"+Fr+"|"+_r+"|\x3c!---?>|\x3c!--(?:[^-]|-[^-]|--[^>])*--\x3e|<[?][\\s\\S]*?[?]>|<![A-Za-z][^>]*>|<!\\[CDATA\\[[\\s\\S]*?\\]\\]>)"),jr=new RegExp("^(?:"+Fr+"|"+_r+")"),Cr=[[/^<(script|pre|style|textarea)(?=(\s|>|$))/i,/<\/(script|pre|style|textarea)>/i,!0],[/^<!--/,/-->/,!0],[/^<\?/,/\?>/,!0],[/^<![A-Z]/,/>/,!0],[/^<!\[CDATA\[/,/\]\]>/,!0],[new RegExp("^</?("+["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","search","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"].join("|")+")(?=(\\s|/?>|$))","i"),/^$/,!0],[new RegExp(jr.source+"\\s*$"),/^$/,!1]];const zr=[["table",function(t,e,i,r){if(e+2>i)return!1;let s=e+1;if(t.sCount[s]<t.blkIndent)return!1;if(t.sCount[s]-t.blkIndent>=4)return!1;let n=t.bMarks[s]+t.tShift[s];if(n>=t.eMarks[s])return!1;const o=t.src.charCodeAt(n++);if(124!==o&&45!==o&&58!==o)return!1;if(n>=t.eMarks[s])return!1;const a=t.src.charCodeAt(n++);if(124!==a&&45!==a&&58!==a&&!Zi(a))return!1;if(45===o&&Zi(a))return!1;for(;n<t.eMarks[s];){const e=t.src.charCodeAt(n);if(124!==e&&45!==e&&58!==e&&!Zi(e))return!1;n++}let u=kr(t,e+1),c=u.split("|");const h=[];for(let t=0;t<c.length;t++){const e=c[t].trim();if(!e){if(0===t||t===c.length-1)continue;return!1}if(!/^:?-+:?$/.test(e))return!1;58===e.charCodeAt(e.length-1)?h.push(58===e.charCodeAt(0)?"center":"right"):58===e.charCodeAt(0)?h.push("left"):h.push("")}if(u=kr(t,e).trim(),-1===u.indexOf("|"))return!1;if(t.sCount[e]-t.blkIndent>=4)return!1;c=Er(u),c.length&&""===c[0]&&c.shift(),c.length&&""===c[c.length-1]&&c.pop();const l=c.length;if(0===l||l!==h.length)return!1;if(r)return!0;const f=t.parentType;t.parentType="table";const d=t.md.block.ruler.getRules("blockquote"),p=[e,0];t.push("table_open","table",1).map=p,t.push("thead_open","thead",1).map=[e,e+1],t.push("tr_open","tr",1).map=[e,e+1];for(let e=0;e<c.length;e++){const i=t.push("th_open","th",1);h[e]&&(i.attrs=[["style","text-align:"+h[e]]]);const r=t.push("inline","",0);r.content=c[e].trim(),r.children=[],t.push("th_close","th",-1)}let m;t.push("tr_close","tr",-1),t.push("thead_close","thead",-1);let $=0;for(s=e+2;s<i&&!(t.sCount[s]<t.blkIndent);s++){let r=!1;for(let e=0,n=d.length;e<n;e++)if(d[e](t,s,i,!0)){r=!0;break}if(r)break;if(u=kr(t,s).trim(),!u)break;if(t.sCount[s]-t.blkIndent>=4)break;if(c=Er(u),c.length&&""===c[0]&&c.shift(),c.length&&""===c[c.length-1]&&c.pop(),$+=l-c.length,$>65536)break;if(s===e+2){t.push("tbody_open","tbody",1).map=m=[e+2,0]}t.push("tr_open","tr",1).map=[s,s+1];for(let e=0;e<l;e++){const i=t.push("td_open","td",1);h[e]&&(i.attrs=[["style","text-align:"+h[e]]]);const r=t.push("inline","",0);r.content=c[e]?c[e].trim():"",r.children=[],t.push("td_close","td",-1)}t.push("tr_close","tr",-1)}return m&&(t.push("tbody_close","tbody",-1),m[1]=s),t.push("table_close","table",-1),p[1]=s,t.parentType=f,t.line=s,!0},["paragraph","reference"]],["code",function(t,e,i){if(t.sCount[e]-t.blkIndent<4)return!1;let r=e+1,s=r;for(;r<i;)if(t.isEmpty(r))r++;else{if(!(t.sCount[r]-t.blkIndent>=4))break;r++,s=r}t.line=s;const n=t.push("code_block","code",0);return n.content=t.getLines(e,s,4+t.blkIndent,!1)+"\n",n.map=[e,t.line],!0}],["fence",function(t,e,i,r){let s=t.bMarks[e]+t.tShift[e],n=t.eMarks[e];if(t.sCount[e]-t.blkIndent>=4)return!1;if(s+3>n)return!1;const o=t.src.charCodeAt(s);if(126!==o&&96!==o)return!1;let a=s;s=t.skipChars(s,o);let u=s-a;if(u<3)return!1;const c=t.src.slice(a,s),h=t.src.slice(s,n);if(96===o&&h.indexOf(String.fromCharCode(o))>=0)return!1;if(r)return!0;let l=e,f=!1;for(;(l++,!(l>=i))&&(s=a=t.bMarks[l]+t.tShift[l],n=t.eMarks[l],!(s<n&&t.sCount[l]<t.blkIndent));)if(t.src.charCodeAt(s)===o&&!(t.sCount[l]-t.blkIndent>=4||(s=t.skipChars(s,o),s-a<u||(s=t.skipSpaces(s),s<n)))){f=!0;break}u=t.sCount[e],t.line=l+(f?1:0);const d=t.push("fence","code",0);return d.info=h,d.content=t.getLines(e+1,l,u,!0),d.markup=c,d.map=[e,t.line],!0},["paragraph","reference","blockquote","list"]],["blockquote",function(t,e,i,r){let s=t.bMarks[e]+t.tShift[e],n=t.eMarks[e];const o=t.lineMax;if(t.sCount[e]-t.blkIndent>=4)return!1;if(62!==t.src.charCodeAt(s))return!1;if(r)return!0;const a=[],u=[],c=[],h=[],l=t.md.block.ruler.getRules("blockquote"),f=t.parentType;t.parentType="blockquote";let d,p=!1;for(d=e;d<i;d++){const e=t.sCount[d]<t.blkIndent;if(s=t.bMarks[d]+t.tShift[d],n=t.eMarks[d],s>=n)break;if(62===t.src.charCodeAt(s++)&&!e){let e,i,r=t.sCount[d]+1;32===t.src.charCodeAt(s)?(s++,r++,i=!1,e=!0):9===t.src.charCodeAt(s)?(e=!0,(t.bsCount[d]+r)%4==3?(s++,r++,i=!1):i=!0):e=!1;let o=r;for(a.push(t.bMarks[d]),t.bMarks[d]=s;s<n;){const e=t.src.charCodeAt(s);if(!Zi(e))break;9===e?o+=4-(o+t.bsCount[d]+(i?1:0))%4:o++,s++}p=s>=n,u.push(t.bsCount[d]),t.bsCount[d]=t.sCount[d]+1+(e?1:0),c.push(t.sCount[d]),t.sCount[d]=o-r,h.push(t.tShift[d]),t.tShift[d]=s-t.bMarks[d];continue}if(p)break;let r=!1;for(let e=0,s=l.length;e<s;e++)if(l[e](t,d,i,!0)){r=!0;break}if(r){t.lineMax=d,0!==t.blkIndent&&(a.push(t.bMarks[d]),u.push(t.bsCount[d]),h.push(t.tShift[d]),c.push(t.sCount[d]),t.sCount[d]-=t.blkIndent);break}a.push(t.bMarks[d]),u.push(t.bsCount[d]),h.push(t.tShift[d]),c.push(t.sCount[d]),t.sCount[d]=-1}const m=t.blkIndent;t.blkIndent=0;const $=t.push("blockquote_open","blockquote",1);$.markup=">";const g=[e,0];$.map=g,t.md.block.tokenize(t,e,d),t.push("blockquote_close","blockquote",-1).markup=">",t.lineMax=o,t.parentType=f,g[1]=t.line;for(let i=0;i<h.length;i++)t.bMarks[i+e]=a[i],t.tShift[i+e]=h[i],t.sCount[i+e]=c[i],t.bsCount[i+e]=u[i];return t.blkIndent=m,!0},["paragraph","reference","blockquote","list"]],["hr",function(t,e,i,r){const s=t.eMarks[e];if(t.sCount[e]-t.blkIndent>=4)return!1;let n=t.bMarks[e]+t.tShift[e];const o=t.src.charCodeAt(n++);if(42!==o&&45!==o&&95!==o)return!1;let a=1;for(;n<s;){const e=t.src.charCodeAt(n++);if(e!==o&&!Zi(e))return!1;e===o&&a++}if(a<3)return!1;if(r)return!0;t.line=e+1;const u=t.push("hr","hr",0);return u.map=[e,t.line],u.markup=Array(a+1).join(String.fromCharCode(o)),!0},["paragraph","reference","blockquote","list"]],["list",function(t,e,i,r){let s,n,o,a,u=e,c=!0;if(t.sCount[u]-t.blkIndent>=4)return!1;if(t.listIndent>=0&&t.sCount[u]-t.listIndent>=4&&t.sCount[u]<t.blkIndent)return!1;let h,l,f,d=!1;if(r&&"paragraph"===t.parentType&&t.sCount[u]>=t.blkIndent&&(d=!0),(f=xr(t,u))>=0){if(h=!0,o=t.bMarks[u]+t.tShift[u],l=Number(t.src.slice(o,f-1)),d&&1!==l)return!1}else{if(!((f=Dr(t,u))>=0))return!1;h=!1}if(d&&t.skipSpaces(f)>=t.eMarks[u])return!1;if(r)return!0;const p=t.src.charCodeAt(f-1),m=t.tokens.length;h?(a=t.push("ordered_list_open","ol",1),1!==l&&(a.attrs=[["start",l]])):a=t.push("bullet_list_open","ul",1);const $=[u,0];a.map=$,a.markup=String.fromCharCode(p);let g=!1;const b=t.md.block.ruler.getRules("list"),y=t.parentType;for(t.parentType="list";u<i;){n=f,s=t.eMarks[u];const e=t.sCount[u]+f-(t.bMarks[u]+t.tShift[u]);let r=e;for(;n<s;){const e=t.src.charCodeAt(n);if(9===e)r+=4-(r+t.bsCount[u])%4;else{if(32!==e)break;r++}n++}const l=n;let d;d=l>=s?1:r-e,d>4&&(d=1);const m=e+d;a=t.push("list_item_open","li",1),a.markup=String.fromCharCode(p);const $=[u,0];a.map=$,h&&(a.info=t.src.slice(o,f-1));const y=t.tight,v=t.tShift[u],w=t.sCount[u],k=t.listIndent;if(t.listIndent=t.blkIndent,t.blkIndent=m,t.tight=!0,t.tShift[u]=l-t.bMarks[u],t.sCount[u]=r,l>=s&&t.isEmpty(u+1)?t.line=Math.min(t.line+2,i):t.md.block.tokenize(t,u,i,!0),t.tight&&!g||(c=!1),g=t.line-u>1&&t.isEmpty(t.line-1),t.blkIndent=t.listIndent,t.listIndent=k,t.tShift[u]=v,t.sCount[u]=w,t.tight=y,a=t.push("list_item_close","li",-1),a.markup=String.fromCharCode(p),u=t.line,$[1]=u,u>=i)break;if(t.sCount[u]<t.blkIndent)break;if(t.sCount[u]-t.blkIndent>=4)break;let E=!1;for(let e=0,r=b.length;e<r;e++)if(b[e](t,u,i,!0)){E=!0;break}if(E)break;if(h){if(f=xr(t,u),f<0)break;o=t.bMarks[u]+t.tShift[u]}else if(f=Dr(t,u),f<0)break;if(p!==t.src.charCodeAt(f-1))break}return a=h?t.push("ordered_list_close","ol",-1):t.push("bullet_list_close","ul",-1),a.markup=String.fromCharCode(p),$[1]=u,t.line=u,t.parentType=y,c&&function(t,e){const i=t.level+2;for(let r=e+2,s=t.tokens.length-2;r<s;r++)t.tokens[r].level===i&&"paragraph_open"===t.tokens[r].type&&(t.tokens[r+2].hidden=!0,t.tokens[r].hidden=!0,r+=2)}(t,m),!0},["paragraph","reference","blockquote"]],["reference",function(t,e,i,r){let s=t.bMarks[e]+t.tShift[e],n=t.eMarks[e],o=e+1;if(t.sCount[e]-t.blkIndent>=4)return!1;if(91!==t.src.charCodeAt(s))return!1;function a(e){const i=t.lineMax;if(e>=i||t.isEmpty(e))return null;let r=!1;if(t.sCount[e]-t.blkIndent>3&&(r=!0),t.sCount[e]<0&&(r=!0),!r){const r=t.md.block.ruler.getRules("reference"),s=t.parentType;t.parentType="reference";let n=!1;for(let s=0,o=r.length;s<o;s++)if(r[s](t,e,i,!0)){n=!0;break}if(t.parentType=s,n)return null}const s=t.bMarks[e]+t.tShift[e],n=t.eMarks[e];return t.src.slice(s,n+1)}let u=t.src.slice(s,n+1);n=u.length;let c=-1;for(s=1;s<n;s++){const t=u.charCodeAt(s);if(91===t)return!1;if(93===t){c=s;break}if(10===t){const t=a(o);null!==t&&(u+=t,n=u.length,o++)}else if(92===t&&(s++,s<n&&10===u.charCodeAt(s))){const t=a(o);null!==t&&(u+=t,n=u.length,o++)}}if(c<0||58!==u.charCodeAt(c+1))return!1;for(s=c+2;s<n;s++){const t=u.charCodeAt(s);if(10===t){const t=a(o);null!==t&&(u+=t,n=u.length,o++)}else if(!Zi(t))break}const h=t.md.helpers.parseLinkDestination(u,s,n);if(!h.ok)return!1;const l=t.md.normalizeLink(h.str);if(!t.md.validateLink(l))return!1;s=h.pos;const f=s,d=o,p=s;for(;s<n;s++){const t=u.charCodeAt(s);if(10===t){const t=a(o);null!==t&&(u+=t,n=u.length,o++)}else if(!Zi(t))break}let m,$=t.md.helpers.parseLinkTitle(u,s,n);for(;$.can_continue;){const e=a(o);if(null===e)break;u+=e,s=n,n=u.length,o++,$=t.md.helpers.parseLinkTitle(u,s,n,$)}for(s<n&&p!==s&&$.ok?(m=$.str,s=$.pos):(m="",s=f,o=d);s<n;){if(!Zi(u.charCodeAt(s)))break;s++}if(s<n&&10!==u.charCodeAt(s)&&m)for(m="",s=f,o=d;s<n;){if(!Zi(u.charCodeAt(s)))break;s++}if(s<n&&10!==u.charCodeAt(s))return!1;const g=Wi(u.slice(1,c));return!!g&&(r||(void 0===t.env.references&&(t.env.references={}),void 0===t.env.references[g]&&(t.env.references[g]={title:m,href:l}),t.line=o),!0)}],["html_block",function(t,e,i,r){let s=t.bMarks[e]+t.tShift[e],n=t.eMarks[e];if(t.sCount[e]-t.blkIndent>=4)return!1;if(!t.md.options.html)return!1;if(60!==t.src.charCodeAt(s))return!1;let o=t.src.slice(s,n),a=0;for(;a<Cr.length&&!Cr[a][0].test(o);a++);if(a===Cr.length)return!1;if(r)return Cr[a][2];let u=e+1;if(!Cr[a][1].test(o))for(;u<i&&!(t.sCount[u]<t.blkIndent);u++)if(s=t.bMarks[u]+t.tShift[u],n=t.eMarks[u],o=t.src.slice(s,n),Cr[a][1].test(o)){0!==o.length&&u++;break}t.line=u;const c=t.push("html_block","",0);return c.map=[e,u],c.content=t.getLines(e,u,t.blkIndent,!0),!0},["paragraph","reference","blockquote"]],["heading",function(t,e,i,r){let s=t.bMarks[e]+t.tShift[e],n=t.eMarks[e];if(t.sCount[e]-t.blkIndent>=4)return!1;let o=t.src.charCodeAt(s);if(35!==o||s>=n)return!1;let a=1;for(o=t.src.charCodeAt(++s);35===o&&s<n&&a<=6;)a++,o=t.src.charCodeAt(++s);if(a>6||s<n&&!Zi(o))return!1;if(r)return!0;n=t.skipSpacesBack(n,s);const u=t.skipCharsBack(n,35,s);u>s&&Zi(t.src.charCodeAt(u-1))&&(n=u),t.line=e+1;const c=t.push("heading_open","h"+String(a),1);c.markup="########".slice(0,a),c.map=[e,t.line];const h=t.push("inline","",0);return h.content=t.src.slice(s,n).trim(),h.map=[e,t.line],h.children=[],t.push("heading_close","h"+String(a),-1).markup="########".slice(0,a),!0},["paragraph","reference","blockquote"]],["lheading",function(t,e,i){const r=t.md.block.ruler.getRules("paragraph");if(t.sCount[e]-t.blkIndent>=4)return!1;const s=t.parentType;t.parentType="paragraph";let n,o=0,a=e+1;for(;a<i&&!t.isEmpty(a);a++){if(t.sCount[a]-t.blkIndent>3)continue;if(t.sCount[a]>=t.blkIndent){let e=t.bMarks[a]+t.tShift[a];const i=t.eMarks[a];if(e<i&&(n=t.src.charCodeAt(e),(45===n||61===n)&&(e=t.skipChars(e,n),e=t.skipSpaces(e),e>=i))){o=61===n?1:2;break}}if(t.sCount[a]<0)continue;let e=!1;for(let s=0,n=r.length;s<n;s++)if(r[s](t,a,i,!0)){e=!0;break}if(e)break}if(!o)return!1;const u=t.getLines(e,a,t.blkIndent,!1).trim();t.line=a+1;const c=t.push("heading_open","h"+String(o),1);c.markup=String.fromCharCode(n),c.map=[e,t.line];const h=t.push("inline","",0);return h.content=u,h.map=[e,t.line-1],h.children=[],t.push("heading_close","h"+String(o),-1).markup=String.fromCharCode(n),t.parentType=s,!0}],["paragraph",function(t,e,i){const r=t.md.block.ruler.getRules("paragraph"),s=t.parentType;let n=e+1;for(t.parentType="paragraph";n<i&&!t.isEmpty(n);n++){if(t.sCount[n]-t.blkIndent>3)continue;if(t.sCount[n]<0)continue;let e=!1;for(let s=0,o=r.length;s<o;s++)if(r[s](t,n,i,!0)){e=!0;break}if(e)break}const o=t.getLines(e,n,t.blkIndent,!1).trim();t.line=n,t.push("paragraph_open","p",1).map=[e,t.line];const a=t.push("inline","",0);return a.content=o,a.map=[e,t.line],a.children=[],t.push("paragraph_close","p",-1),t.parentType=s,!0}]];function Sr(){this.ruler=new ir;for(let t=0;t<zr.length;t++)this.ruler.push(zr[t][0],zr[t][1],{alt:(zr[t][2]||[]).slice()})}function Or(t,e,i,r){this.src=t,this.env=i,this.md=e,this.tokens=r,this.tokens_meta=Array(r.length),this.pos=0,this.posMax=this.src.length,this.level=0,this.pending="",this.pendingLevel=0,this.cache={},this.delimiters=[],this._prev_delimiters=[],this.backticks={},this.backticksScanned=!1,this.linkLevel=0}function qr(t){switch(t){case 10:case 33:case 35:case 36:case 37:case 38:case 42:case 43:case 45:case 58:case 60:case 61:case 62:case 64:case 91:case 92:case 93:case 94:case 95:case 96:case 123:case 125:case 126:return!0;default:return!1}}Sr.prototype.tokenize=function(t,e,i){const r=this.ruler.getRules(""),s=r.length,n=t.md.options.maxNesting;let o=e,a=!1;for(;o<i&&(t.line=o=t.skipEmptyLines(o),!(o>=i))&&!(t.sCount[o]<t.blkIndent);){if(t.level>=n){t.line=i;break}const e=t.line;let u=!1;for(let n=0;n<s;n++)if(u=r[n](t,o,i,!1),u){if(e>=t.line)throw new Error("block rule didn't increment state.line");break}if(!u)throw new Error("none of the block rules matched");t.tight=!a,t.isEmpty(t.line-1)&&(a=!0),o=t.line,o<i&&t.isEmpty(o)&&(a=!0,o++,t.line=o)}},Sr.prototype.parse=function(t,e,i,r){if(!t)return;const s=new this.State(t,e,i,r);this.tokenize(s,s.line,s.lineMax)},Sr.prototype.State=wr,Or.prototype.pushPending=function(){const t=new rr("text","",0);return t.content=this.pending,t.level=this.pendingLevel,this.tokens.push(t),this.pending="",t},Or.prototype.push=function(t,e,i){this.pending&&this.pushPending();const r=new rr(t,e,i);let s=null;return i<0&&(this.level--,this.delimiters=this._prev_delimiters.pop()),r.level=this.level,i>0&&(this.level++,this._prev_delimiters.push(this.delimiters),this.delimiters=[],s={delimiters:this.delimiters}),this.pendingLevel=this.level,this.tokens.push(r),this.tokens_meta.push(s),r},Or.prototype.scanDelims=function(t,e){const i=this.posMax,r=this.src.charCodeAt(t),s=t>0?this.src.charCodeAt(t-1):32;let n=t;for(;n<i&&this.src.charCodeAt(n)===r;)n++;const o=n-t,a=n<i?this.src.charCodeAt(n):32,u=Ki(s)||Ji(String.fromCharCode(s)),c=Ki(a)||Ji(String.fromCharCode(a)),h=Gi(s),l=Gi(a),f=!l&&(!c||h||u),d=!h&&(!u||l||c);return{can_open:f&&(e||!d||u),can_close:d&&(e||!f||c),length:o}},Or.prototype.Token=rr;const Ir=/(?:^|[^a-z0-9.+-])([a-z][a-z0-9.+-]*)$/i;const Pr=[];for(let t=0;t<256;t++)Pr.push(0);function Tr(t,e){let i;const r=[],s=e.length;for(let n=0;n<s;n++){const s=e[n];if(126!==s.marker)continue;if(-1===s.end)continue;const o=e[s.end];i=t.tokens[s.token],i.type="s_open",i.tag="s",i.nesting=1,i.markup="~~",i.content="",i=t.tokens[o.token],i.type="s_close",i.tag="s",i.nesting=-1,i.markup="~~",i.content="","text"===t.tokens[o.token-1].type&&"~"===t.tokens[o.token-1].content&&r.push(o.token-1)}for(;r.length;){const e=r.pop();let s=e+1;for(;s<t.tokens.length&&"s_close"===t.tokens[s].type;)s++;s--,e!==s&&(i=t.tokens[s],t.tokens[s]=t.tokens[e],t.tokens[e]=i)}}"\\!\"#$%&'()*+,./:;<=>?@[]^_`{|}~-".split("").forEach((function(t){Pr[t.charCodeAt(0)]=1}));var Nr={tokenize:function(t,e){const i=t.pos,r=t.src.charCodeAt(i);if(e)return!1;if(126!==r)return!1;const s=t.scanDelims(t.pos,!0);let n=s.length;const o=String.fromCharCode(r);if(n<2)return!1;let a;n%2&&(a=t.push("text","",0),a.content=o,n--);for(let e=0;e<n;e+=2)a=t.push("text","",0),a.content=o+o,t.delimiters.push({marker:r,length:0,token:t.tokens.length-1,end:-1,open:s.can_open,close:s.can_close});return t.pos+=s.length,!0},postProcess:function(t){const e=t.tokens_meta,i=t.tokens_meta.length;Tr(t,t.delimiters);for(let r=0;r<i;r++)e[r]&&e[r].delimiters&&Tr(t,e[r].delimiters)}};function Mr(t,e){for(let i=e.length-1;i>=0;i--){const r=e[i];if(95!==r.marker&&42!==r.marker)continue;if(-1===r.end)continue;const s=e[r.end],n=i>0&&e[i-1].end===r.end+1&&e[i-1].marker===r.marker&&e[i-1].token===r.token-1&&e[r.end+1].token===s.token+1,o=String.fromCharCode(r.marker),a=t.tokens[r.token];a.type=n?"strong_open":"em_open",a.tag=n?"strong":"em",a.nesting=1,a.markup=n?o+o:o,a.content="";const u=t.tokens[s.token];u.type=n?"strong_close":"em_close",u.tag=n?"strong":"em",u.nesting=-1,u.markup=n?o+o:o,u.content="",n&&(t.tokens[e[i-1].token].content="",t.tokens[e[r.end+1].token].content="",i--)}}var Rr={tokenize:function(t,e){const i=t.pos,r=t.src.charCodeAt(i);if(e)return!1;if(95!==r&&42!==r)return!1;const s=t.scanDelims(t.pos,42===r);for(let e=0;e<s.length;e++){t.push("text","",0).content=String.fromCharCode(r),t.delimiters.push({marker:r,length:s.length,token:t.tokens.length-1,end:-1,open:s.can_open,close:s.can_close})}return t.pos+=s.length,!0},postProcess:function(t){const e=t.tokens_meta,i=t.tokens_meta.length;Mr(t,t.delimiters);for(let r=0;r<i;r++)e[r]&&e[r].delimiters&&Mr(t,e[r].delimiters)}};const Br=/^([a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*)$/,Lr=/^([a-zA-Z][a-zA-Z0-9+.-]{1,31}):([^<>\x00-\x20]*)$/;const Ur=/^&#((?:x[a-f0-9]{1,6}|[0-9]{1,7}));/i,Vr=/^&([a-z][a-z0-9]{1,31});/i;function Hr(t){const e={},i=t.length;if(!i)return;let r=0,s=-2;const n=[];for(let o=0;o<i;o++){const i=t[o];if(n.push(0),t[r].marker===i.marker&&s===i.token-1||(r=o),s=i.token,i.length=i.length||0,!i.close)continue;e.hasOwnProperty(i.marker)||(e[i.marker]=[-1,-1,-1,-1,-1,-1]);const a=e[i.marker][(i.open?3:0)+i.length%3];let u=r-n[r]-1,c=u;for(;u>a;u-=n[u]+1){const e=t[u];if(e.marker===i.marker&&(e.open&&e.end<0)){let r=!1;if((e.close||i.open)&&(e.length+i.length)%3==0&&(e.length%3==0&&i.length%3==0||(r=!0)),!r){const r=u>0&&!t[u-1].open?n[u-1]+1:0;n[o]=o-u+r,n[u]=r,i.open=!1,e.end=o,e.close=!1,c=-1,s=-2;break}}}-1!==c&&(e[i.marker][(i.open?3:0)+(i.length||0)%3]=c)}}const Zr=[["text",function(t,e){let i=t.pos;for(;i<t.posMax&&!qr(t.src.charCodeAt(i));)i++;return i!==t.pos&&(e||(t.pending+=t.src.slice(t.pos,i)),t.pos=i,!0)}],["linkify",function(t,e){if(!t.md.options.linkify)return!1;if(t.linkLevel>0)return!1;const i=t.pos;if(i+3>t.posMax)return!1;if(58!==t.src.charCodeAt(i))return!1;if(47!==t.src.charCodeAt(i+1))return!1;if(47!==t.src.charCodeAt(i+2))return!1;const r=t.pending.match(Ir);if(!r)return!1;const s=r[1],n=t.md.linkify.matchAtStart(t.src.slice(i-s.length));if(!n)return!1;let o=n.url;if(o.length<=s.length)return!1;o=o.replace(/\*+$/,"");const a=t.md.normalizeLink(o);if(!t.md.validateLink(a))return!1;if(!e){t.pending=t.pending.slice(0,-s.length);const e=t.push("link_open","a",1);e.attrs=[["href",a]],e.markup="linkify",e.info="auto";t.push("text","",0).content=t.md.normalizeLinkText(o);const i=t.push("link_close","a",-1);i.markup="linkify",i.info="auto"}return t.pos+=o.length-s.length,!0}],["newline",function(t,e){let i=t.pos;if(10!==t.src.charCodeAt(i))return!1;const r=t.pending.length-1,s=t.posMax;if(!e)if(r>=0&&32===t.pending.charCodeAt(r))if(r>=1&&32===t.pending.charCodeAt(r-1)){let e=r-1;for(;e>=1&&32===t.pending.charCodeAt(e-1);)e--;t.pending=t.pending.slice(0,e),t.push("hardbreak","br",0)}else t.pending=t.pending.slice(0,-1),t.push("softbreak","br",0);else t.push("softbreak","br",0);for(i++;i<s&&Zi(t.src.charCodeAt(i));)i++;return t.pos=i,!0}],["escape",function(t,e){let i=t.pos;const r=t.posMax;if(92!==t.src.charCodeAt(i))return!1;if(i++,i>=r)return!1;let s=t.src.charCodeAt(i);if(10===s){for(e||t.push("hardbreak","br",0),i++;i<r&&(s=t.src.charCodeAt(i),Zi(s));)i++;return t.pos=i,!0}let n=t.src[i];if(s>=55296&&s<=56319&&i+1<r){const e=t.src.charCodeAt(i+1);e>=56320&&e<=57343&&(n+=t.src[i+1],i++)}const o="\\"+n;if(!e){const e=t.push("text_special","",0);s<256&&0!==Pr[s]?e.content=n:e.content=o,e.markup=o,e.info="escape"}return t.pos=i+1,!0}],["backticks",function(t,e){let i=t.pos;if(96!==t.src.charCodeAt(i))return!1;const r=i;i++;const s=t.posMax;for(;i<s&&96===t.src.charCodeAt(i);)i++;const n=t.src.slice(r,i),o=n.length;if(t.backticksScanned&&(t.backticks[o]||0)<=r)return e||(t.pending+=n),t.pos+=o,!0;let a,u=i;for(;-1!==(a=t.src.indexOf("`",u));){for(u=a+1;u<s&&96===t.src.charCodeAt(u);)u++;const r=u-a;if(r===o){if(!e){const e=t.push("code_inline","code",0);e.markup=n,e.content=t.src.slice(i,a).replace(/\n/g," ").replace(/^ (.+) $/,"$1")}return t.pos=u,!0}t.backticks[r]=a}return t.backticksScanned=!0,e||(t.pending+=n),t.pos+=o,!0}],["strikethrough",Nr.tokenize],["emphasis",Rr.tokenize],["link",function(t,e){let i,r,s,n,o="",a="",u=t.pos,c=!0;if(91!==t.src.charCodeAt(t.pos))return!1;const h=t.pos,l=t.posMax,f=t.pos+1,d=t.md.helpers.parseLinkLabel(t,t.pos,!0);if(d<0)return!1;let p=d+1;if(p<l&&40===t.src.charCodeAt(p)){for(c=!1,p++;p<l&&(i=t.src.charCodeAt(p),Zi(i)||10===i);p++);if(p>=l)return!1;if(u=p,s=t.md.helpers.parseLinkDestination(t.src,p,t.posMax),s.ok){for(o=t.md.normalizeLink(s.str),t.md.validateLink(o)?p=s.pos:o="",u=p;p<l&&(i=t.src.charCodeAt(p),Zi(i)||10===i);p++);if(s=t.md.helpers.parseLinkTitle(t.src,p,t.posMax),p<l&&u!==p&&s.ok)for(a=s.str,p=s.pos;p<l&&(i=t.src.charCodeAt(p),Zi(i)||10===i);p++);}(p>=l||41!==t.src.charCodeAt(p))&&(c=!0),p++}if(c){if(void 0===t.env.references)return!1;if(p<l&&91===t.src.charCodeAt(p)?(u=p+1,p=t.md.helpers.parseLinkLabel(t,p),p>=0?r=t.src.slice(u,p++):p=d+1):p=d+1,r||(r=t.src.slice(f,d)),n=t.env.references[Wi(r)],!n)return t.pos=h,!1;o=n.href,a=n.title}if(!e){t.pos=f,t.posMax=d;const e=[["href",o]];t.push("link_open","a",1).attrs=e,a&&e.push(["title",a]),t.linkLevel++,t.md.inline.tokenize(t),t.linkLevel--,t.push("link_close","a",-1)}return t.pos=p,t.posMax=l,!0}],["image",function(t,e){let i,r,s,n,o,a,u,c,h="";const l=t.pos,f=t.posMax;if(33!==t.src.charCodeAt(t.pos))return!1;if(91!==t.src.charCodeAt(t.pos+1))return!1;const d=t.pos+2,p=t.md.helpers.parseLinkLabel(t,t.pos+1,!1);if(p<0)return!1;if(n=p+1,n<f&&40===t.src.charCodeAt(n)){for(n++;n<f&&(i=t.src.charCodeAt(n),Zi(i)||10===i);n++);if(n>=f)return!1;for(c=n,a=t.md.helpers.parseLinkDestination(t.src,n,t.posMax),a.ok&&(h=t.md.normalizeLink(a.str),t.md.validateLink(h)?n=a.pos:h=""),c=n;n<f&&(i=t.src.charCodeAt(n),Zi(i)||10===i);n++);if(a=t.md.helpers.parseLinkTitle(t.src,n,t.posMax),n<f&&c!==n&&a.ok)for(u=a.str,n=a.pos;n<f&&(i=t.src.charCodeAt(n),Zi(i)||10===i);n++);else u="";if(n>=f||41!==t.src.charCodeAt(n))return t.pos=l,!1;n++}else{if(void 0===t.env.references)return!1;if(n<f&&91===t.src.charCodeAt(n)?(c=n+1,n=t.md.helpers.parseLinkLabel(t,n),n>=0?s=t.src.slice(c,n++):n=p+1):n=p+1,s||(s=t.src.slice(d,p)),o=t.env.references[Wi(s)],!o)return t.pos=l,!1;h=o.href,u=o.title}if(!e){r=t.src.slice(d,p);const e=[];t.md.inline.parse(r,t.md,t.env,e);const i=t.push("image","img",0),s=[["src",h],["alt",""]];i.attrs=s,i.children=e,i.content=r,u&&s.push(["title",u])}return t.pos=n,t.posMax=f,!0}],["autolink",function(t,e){let i=t.pos;if(60!==t.src.charCodeAt(i))return!1;const r=t.pos,s=t.posMax;for(;;){if(++i>=s)return!1;const e=t.src.charCodeAt(i);if(60===e)return!1;if(62===e)break}const n=t.src.slice(r+1,i);if(Lr.test(n)){const i=t.md.normalizeLink(n);if(!t.md.validateLink(i))return!1;if(!e){const e=t.push("link_open","a",1);e.attrs=[["href",i]],e.markup="autolink",e.info="auto";t.push("text","",0).content=t.md.normalizeLinkText(n);const r=t.push("link_close","a",-1);r.markup="autolink",r.info="auto"}return t.pos+=n.length+2,!0}if(Br.test(n)){const i=t.md.normalizeLink("mailto:"+n);if(!t.md.validateLink(i))return!1;if(!e){const e=t.push("link_open","a",1);e.attrs=[["href",i]],e.markup="autolink",e.info="auto";t.push("text","",0).content=t.md.normalizeLinkText(n);const r=t.push("link_close","a",-1);r.markup="autolink",r.info="auto"}return t.pos+=n.length+2,!0}return!1}],["html_inline",function(t,e){if(!t.md.options.html)return!1;const i=t.posMax,r=t.pos;if(60!==t.src.charCodeAt(r)||r+2>=i)return!1;const s=t.src.charCodeAt(r+1);if(33!==s&&63!==s&&47!==s&&!function(t){const e=32|t;return e>=97&&e<=122}(s))return!1;const n=t.src.slice(r).match(Ar);if(!n)return!1;if(!e){const e=t.push("html_inline","",0);e.content=n[0],o=e.content,/^<a[>\s]/i.test(o)&&t.linkLevel++,function(t){return/^<\/a\s*>/i.test(t)}(e.content)&&t.linkLevel--}var o;return t.pos+=n[0].length,!0}],["entity",function(t,e){const i=t.pos,r=t.posMax;if(38!==t.src.charCodeAt(i))return!1;if(i+1>=r)return!1;if(35===t.src.charCodeAt(i+1)){const r=t.src.slice(i).match(Ur);if(r){if(!e){const e="x"===r[1][0].toLowerCase()?parseInt(r[1].slice(1),16):parseInt(r[1],10),i=t.push("text_special","",0);i.content=qi(e)?Ii(e):Ii(65533),i.markup=r[0],i.info="entity"}return t.pos+=r[0].length,!0}}else{const r=t.src.slice(i).match(Vr);if(r){const i=ji(r[0]);if(i!==r[0]){if(!e){const e=t.push("text_special","",0);e.content=i,e.markup=r[0],e.info="entity"}return t.pos+=r[0].length,!0}}}return!1}]],Gr=[["balance_pairs",function(t){const e=t.tokens_meta,i=t.tokens_meta.length;Hr(t.delimiters);for(let t=0;t<i;t++)e[t]&&e[t].delimiters&&Hr(e[t].delimiters)}],["strikethrough",Nr.postProcess],["emphasis",Rr.postProcess],["fragments_join",function(t){let e,i,r=0;const s=t.tokens,n=t.tokens.length;for(e=i=0;e<n;e++)s[e].nesting<0&&r--,s[e].level=r,s[e].nesting>0&&r++,"text"===s[e].type&&e+1<n&&"text"===s[e+1].type?s[e+1].content=s[e].content+s[e+1].content:(e!==i&&(s[i]=s[e]),i++);e!==i&&(s.length=i)}]];function Jr(){this.ruler=new ir;for(let t=0;t<Zr.length;t++)this.ruler.push(Zr[t][0],Zr[t][1]);this.ruler2=new ir;for(let t=0;t<Gr.length;t++)this.ruler2.push(Gr[t][0],Gr[t][1])}function Kr(t){return Array.prototype.slice.call(arguments,1).forEach((function(e){e&&Object.keys(e).forEach((function(i){t[i]=e[i]}))})),t}function Wr(t){return Object.prototype.toString.call(t)}function Qr(t){return"[object Function]"===Wr(t)}function Yr(t){return t.replace(/[.?*+^$[\]\\(){}|-]/g,"\\$&")}Jr.prototype.skipToken=function(t){const e=t.pos,i=this.ruler.getRules(""),r=i.length,s=t.md.options.maxNesting,n=t.cache;if(void 0!==n[e])return void(t.pos=n[e]);let o=!1;if(t.level<s){for(let s=0;s<r;s++)if(t.level++,o=i[s](t,!0),t.level--,o){if(e>=t.pos)throw new Error("inline rule didn't increment state.pos");break}}else t.pos=t.posMax;o||t.pos++,n[e]=t.pos},Jr.prototype.tokenize=function(t){const e=this.ruler.getRules(""),i=e.length,r=t.posMax,s=t.md.options.maxNesting;for(;t.pos<r;){const n=t.pos;let o=!1;if(t.level<s)for(let r=0;r<i;r++)if(o=e[r](t,!1),o){if(n>=t.pos)throw new Error("inline rule didn't increment state.pos");break}if(o){if(t.pos>=r)break}else t.pending+=t.src[t.pos++]}t.pending&&t.pushPending()},Jr.prototype.parse=function(t,e,i,r){const s=new this.State(t,e,i,r);this.tokenize(s);const n=this.ruler2.getRules(""),o=n.length;for(let t=0;t<o;t++)n[t](s)},Jr.prototype.State=Or;const Xr={fuzzyLink:!0,fuzzyEmail:!0,fuzzyIP:!1};const ts={"http:":{validate:function(t,e,i){const r=t.slice(e);return i.re.http||(i.re.http=new RegExp("^\\/\\/"+i.re.src_auth+i.re.src_host_port_strict+i.re.src_path,"i")),i.re.http.test(r)?r.match(i.re.http)[0].length:0}},"https:":"http:","ftp:":"http:","//":{validate:function(t,e,i){const r=t.slice(e);return i.re.no_http||(i.re.no_http=new RegExp("^"+i.re.src_auth+"(?:localhost|(?:(?:"+i.re.src_domain+")\\.)+"+i.re.src_domain_root+")"+i.re.src_port+i.re.src_host_terminator+i.re.src_path,"i")),i.re.no_http.test(r)?e>=3&&":"===t[e-3]||e>=3&&"/"===t[e-3]?0:r.match(i.re.no_http)[0].length:0}},"mailto:":{validate:function(t,e,i){const r=t.slice(e);return i.re.mailto||(i.re.mailto=new RegExp("^"+i.re.src_email_name+"@"+i.re.src_host_strict,"i")),i.re.mailto.test(r)?r.match(i.re.mailto)[0].length:0}}},es="biz|com|edu|gov|net|org|pro|web|xxx|aero|asia|coop|info|museum|name|shop|".split("|");function is(t){const e=t.re=function(t){const e={};t=t||{},e.src_Any=ui.source,e.src_Cc=ci.source,e.src_Z=fi.source,e.src_P=hi.source,e.src_ZPCc=[e.src_Z,e.src_P,e.src_Cc].join("|"),e.src_ZCc=[e.src_Z,e.src_Cc].join("|");const i="[><]";return e.src_pseudo_letter="(?:(?![><]|"+e.src_ZPCc+")"+e.src_Any+")",e.src_ip4="(?:(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\.){3}(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)",e.src_auth="(?:(?:(?!"+e.src_ZCc+"|[@/\\[\\]()]).)+@)?",e.src_port="(?::(?:6(?:[0-4]\\d{3}|5(?:[0-4]\\d{2}|5(?:[0-2]\\d|3[0-5])))|[1-5]?\\d{1,4}))?",e.src_host_terminator="(?=$|[><]|"+e.src_ZPCc+")(?!"+(t["---"]?"-(?!--)|":"-|")+"_|:\\d|\\.-|\\.(?!$|"+e.src_ZPCc+"))",e.src_path="(?:[/?#](?:(?!"+e.src_ZCc+"|"+i+"|[()[\\]{}.,\"'?!\\-;]).|\\[(?:(?!"+e.src_ZCc+"|\\]).)*\\]|\\((?:(?!"+e.src_ZCc+"|[)]).)*\\)|\\{(?:(?!"+e.src_ZCc+'|[}]).)*\\}|\\"(?:(?!'+e.src_ZCc+'|["]).)+\\"|\\\'(?:(?!'+e.src_ZCc+"|[']).)+\\'|\\'(?="+e.src_pseudo_letter+"|[-])|\\.{2,}[a-zA-Z0-9%/&]|\\.(?!"+e.src_ZCc+"|[.]|$)|"+(t["---"]?"\\-(?!--(?:[^-]|$))(?:-*)|":"\\-+|")+",(?!"+e.src_ZCc+"|$)|;(?!"+e.src_ZCc+"|$)|\\!+(?!"+e.src_ZCc+"|[!]|$)|\\?(?!"+e.src_ZCc+"|[?]|$))+|\\/)?",e.src_email_name='[\\-;:&=\\+\\$,\\.a-zA-Z0-9_][\\-;:&=\\+\\$,\\"\\.a-zA-Z0-9_]*',e.src_xn="xn--[a-z0-9\\-]{1,59}",e.src_domain_root="(?:"+e.src_xn+"|"+e.src_pseudo_letter+"{1,63})",e.src_domain="(?:"+e.src_xn+"|(?:"+e.src_pseudo_letter+")|(?:"+e.src_pseudo_letter+"(?:-|"+e.src_pseudo_letter+"){0,61}"+e.src_pseudo_letter+"))",e.src_host="(?:(?:(?:(?:"+e.src_domain+")\\.)*"+e.src_domain+"))",e.tpl_host_fuzzy="(?:"+e.src_ip4+"|(?:(?:(?:"+e.src_domain+")\\.)+(?:%TLDS%)))",e.tpl_host_no_ip_fuzzy="(?:(?:(?:"+e.src_domain+")\\.)+(?:%TLDS%))",e.src_host_strict=e.src_host+e.src_host_terminator,e.tpl_host_fuzzy_strict=e.tpl_host_fuzzy+e.src_host_terminator,e.src_host_port_strict=e.src_host+e.src_port+e.src_host_terminator,e.tpl_host_port_fuzzy_strict=e.tpl_host_fuzzy+e.src_port+e.src_host_terminator,e.tpl_host_port_no_ip_fuzzy_strict=e.tpl_host_no_ip_fuzzy+e.src_port+e.src_host_terminator,e.tpl_host_fuzzy_test="localhost|www\\.|\\.\\d{1,3}\\.|(?:\\.(?:%TLDS%)(?:"+e.src_ZPCc+"|>|$))",e.tpl_email_fuzzy='(^|[><]|"|\\(|'+e.src_ZCc+")("+e.src_email_name+"@"+e.tpl_host_fuzzy_strict+")",e.tpl_link_fuzzy="(^|(?![.:/\\-_@])(?:[$+<=>^`|]|"+e.src_ZPCc+"))((?![$+<=>^`|])"+e.tpl_host_port_fuzzy_strict+e.src_path+")",e.tpl_link_no_ip_fuzzy="(^|(?![.:/\\-_@])(?:[$+<=>^`|]|"+e.src_ZPCc+"))((?![$+<=>^`|])"+e.tpl_host_port_no_ip_fuzzy_strict+e.src_path+")",e}(t.M),i=t.R.slice();function r(t){return t.replace("%TLDS%",e.src_tlds)}t.onCompile(),t.L||i.push("a[cdefgilmnoqrstuwxz]|b[abdefghijmnorstvwyz]|c[acdfghiklmnoruvwxyz]|d[ejkmoz]|e[cegrstu]|f[ijkmor]|g[abdefghilmnpqrstuwy]|h[kmnrtu]|i[delmnoqrst]|j[emop]|k[eghimnprwyz]|l[abcikrstuvy]|m[acdeghklmnopqrstuvwxyz]|n[acefgilopruz]|om|p[aefghklmnrstwy]|qa|r[eosuw]|s[abcdeghijklmnortuvxyz]|t[cdfghjklmnortvwz]|u[agksyz]|v[aceginu]|w[fs]|y[et]|z[amw]"),i.push(e.src_xn),e.src_tlds=i.join("|"),e.email_fuzzy=RegExp(r(e.tpl_email_fuzzy),"i"),e.link_fuzzy=RegExp(r(e.tpl_link_fuzzy),"i"),e.link_no_ip_fuzzy=RegExp(r(e.tpl_link_no_ip_fuzzy),"i"),e.host_fuzzy_test=RegExp(r(e.tpl_host_fuzzy_test),"i");const s=[];function n(t,e){throw new Error('(LinkifyIt) Invalid schema "'+t+'": '+e)}t.U={},Object.keys(t.V).forEach((function(e){const i=t.V[e];if(null===i)return;const r={validate:null,link:null};if(t.U[e]=r,"[object Object]"===Wr(i))return!function(t){return"[object RegExp]"===Wr(t)}(i.validate)?Qr(i.validate)?r.validate=i.validate:n(e,i):r.validate=function(t){return function(e,i){const r=e.slice(i);return t.test(r)?r.match(t)[0].length:0}}(i.validate),void(Qr(i.normalize)?r.normalize=i.normalize:i.normalize?n(e,i):r.normalize=function(t,e){e.normalize(t)});!function(t){return"[object String]"===Wr(t)}(i)?n(e,i):s.push(e)})),s.forEach((function(e){t.U[t.V[e]]&&(t.U[e].validate=t.U[t.V[e]].validate,t.U[e].normalize=t.U[t.V[e]].normalize)})),t.U[""]={validate:null,normalize:function(t,e){e.normalize(t)}};const o=Object.keys(t.U).filter((function(e){return e.length>0&&t.U[e]})).map(Yr).join("|");t.re.schema_test=RegExp("(^|(?!_)(?:[><]|"+e.src_ZPCc+"))("+o+")","i"),t.re.schema_search=RegExp("(^|(?!_)(?:[><]|"+e.src_ZPCc+"))("+o+")","ig"),t.re.schema_at_start=RegExp("^"+t.re.schema_search.source,"i"),t.re.pretest=RegExp("("+t.re.schema_test.source+")|("+t.re.host_fuzzy_test.source+")|@","i"),function(t){t.H=-1,t.G=""}(t)}function rs(t,e){const i=t.H,r=t.J,s=t.G.slice(i,r);this.schema=t.K.toLowerCase(),this.index=i+e,this.lastIndex=r+e,this.raw=s,this.text=s,this.url=s}function ss(t,e){const i=new rs(t,e);return t.U[i.schema].normalize(i,t),i}function ns(t,e){if(!(this instanceof ns))return new ns(t,e);var i;e||(i=t,Object.keys(i||{}).reduce((function(t,e){return t||Xr.hasOwnProperty(e)}),!1)&&(e=t,t={})),this.M=Kr({},Xr,e),this.H=-1,this.J=-1,this.K="",this.G="",this.V=Kr({},ts,t),this.U={},this.R=es,this.L=!1,this.re={},is(this)}ns.prototype.add=function(t,e){return this.V[t]=e,is(this),this},ns.prototype.set=function(t){return this.M=Kr(this.M,t),this},ns.prototype.test=function(t){if(this.G=t,this.H=-1,!t.length)return!1;let e,i,r,s,n,o,a,u,c;if(this.re.schema_test.test(t))for(a=this.re.schema_search,a.lastIndex=0;null!==(e=a.exec(t));)if(s=this.testSchemaAt(t,e[2],a.lastIndex),s){this.K=e[2],this.H=e.index+e[1].length,this.J=e.index+e[0].length+s;break}return this.M.fuzzyLink&&this.U["http:"]&&(u=t.search(this.re.host_fuzzy_test),u>=0&&(this.H<0||u<this.H)&&null!==(i=t.match(this.M.fuzzyIP?this.re.link_fuzzy:this.re.link_no_ip_fuzzy))&&(n=i.index+i[1].length,(this.H<0||n<this.H)&&(this.K="",this.H=n,this.J=i.index+i[0].length))),this.M.fuzzyEmail&&this.U["mailto:"]&&(c=t.indexOf("@"),c>=0&&null!==(r=t.match(this.re.email_fuzzy))&&(n=r.index+r[1].length,o=r.index+r[0].length,(this.H<0||n<this.H||n===this.H&&o>this.J)&&(this.K="mailto:",this.H=n,this.J=o))),this.H>=0},ns.prototype.pretest=function(t){return this.re.pretest.test(t)},ns.prototype.testSchemaAt=function(t,e,i){return this.U[e.toLowerCase()]?this.U[e.toLowerCase()].validate(t,i,this):0},ns.prototype.match=function(t){const e=[];let i=0;this.H>=0&&this.G===t&&(e.push(ss(this,i)),i=this.J);let r=i?t.slice(i):t;for(;this.test(r);)e.push(ss(this,i)),r=r.slice(this.J),i+=this.J;return e.length?e:null},ns.prototype.matchAtStart=function(t){if(this.G=t,this.H=-1,!t.length)return null;const e=this.re.schema_at_start.exec(t);if(!e)return null;const i=this.testSchemaAt(t,e[2],e[0].length);return i?(this.K=e[2],this.H=e.index+e[1].length,this.J=e.index+e[0].length+i,ss(this,0)):null},ns.prototype.tlds=function(t,e){return t=Array.isArray(t)?t:[t],e?(this.R=this.R.concat(t).sort().filter((function(t,e,i){return t!==i[e-1]})).reverse(),is(this),this):(this.R=t.slice(),this.L=!0,is(this),this)},ns.prototype.normalize=function(t){t.schema||(t.url="http://"+t.url),"mailto:"!==t.schema||/^mailto:/i.test(t.url)||(t.url="mailto:"+t.url)},ns.prototype.onCompile=function(){};const os=2147483647,as=36,us=/^xn--/,cs=/[^\0-\x7F]/,hs=/[\x2E\u3002\uFF0E\uFF61]/g,ls={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},fs=Math.floor,ds=String.fromCharCode;function ps(t){throw new RangeError(ls[t])}function ms(t,e){const i=t.split("@");let r="";i.length>1&&(r=i[0]+"@",t=i[1]);const s=function(t,e){const i=[];let r=t.length;for(;r--;)i[r]=e(t[r]);return i}((t=t.replace(hs,".")).split("."),e).join(".");return r+s}function $s(t){const e=[];let i=0;const r=t.length;for(;i<r;){const s=t.charCodeAt(i++);if(s>=55296&&s<=56319&&i<r){const r=t.charCodeAt(i++);56320==(64512&r)?e.push(((1023&s)<<10)+(1023&r)+65536):(e.push(s),i--)}else e.push(s)}return e}const gs=function(t,e){return t+22+75*(t<26)-((0!=e)<<5)},bs=function(t,e,i){let r=0;for(t=i?fs(t/700):t>>1,t+=fs(t/e);t>455;r+=as)t=fs(t/35);return fs(r+36*t/(t+38))},ys=function(t){const e=[],i=t.length;let r=0,s=128,n=72,o=t.lastIndexOf("-");o<0&&(o=0);for(let i=0;i<o;++i)t.charCodeAt(i)>=128&&ps("not-basic"),e.push(t.charCodeAt(i));for(let u=o>0?o+1:0;u<i;){const o=r;for(let e=1,s=as;;s+=as){u>=i&&ps("invalid-input");const o=(a=t.charCodeAt(u++))>=48&&a<58?a-48+26:a>=65&&a<91?a-65:a>=97&&a<123?a-97:as;o>=as&&ps("invalid-input"),o>fs((os-r)/e)&&ps("overflow"),r+=o*e;const c=s<=n?1:s>=n+26?26:s-n;if(o<c)break;const h=as-c;e>fs(os/h)&&ps("overflow"),e*=h}const c=e.length+1;n=bs(r-o,c,0==o),fs(r/c)>os-s&&ps("overflow"),s+=fs(r/c),r%=c,e.splice(r++,0,s)}var a;return String.fromCodePoint(...e)},vs=function(t){const e=[],i=(t=$s(t)).length;let r=128,s=0,n=72;for(const i of t)i<128&&e.push(ds(i));const o=e.length;let a=o;for(o&&e.push("-");a<i;){let i=os;for(const e of t)e>=r&&e<i&&(i=e);const u=a+1;i-r>fs((os-s)/u)&&ps("overflow"),s+=(i-r)*u,r=i;for(const i of t)if(i<r&&++s>os&&ps("overflow"),i===r){let t=s;for(let i=as;;i+=as){const r=i<=n?1:i>=n+26?26:i-n;if(t<r)break;const s=t-r,o=as-r;e.push(ds(gs(r+s%o,0))),t=fs(s/o)}e.push(ds(gs(t,0))),n=bs(s,u,a===o),s=0,++a}++s,++r}return e.join("")},ws=function(t){return ms(t,(function(t){return cs.test(t)?"xn--"+vs(t):t}))},ks=function(t){return ms(t,(function(t){return us.test(t)?ys(t.slice(4).toLowerCase()):t}))};const Es={default:{options:{html:!1,xhtmlOut:!1,breaks:!1,langPrefix:"language-",linkify:!1,typographer:!1,quotes:"",highlight:null,maxNesting:100},components:{core:{},block:{},inline:{}}},zero:{options:{html:!1,xhtmlOut:!1,breaks:!1,langPrefix:"language-",linkify:!1,typographer:!1,quotes:"",highlight:null,maxNesting:20},components:{core:{rules:["normalize","block","inline","text_join"]},block:{rules:["paragraph"]},inline:{rules:["text"],rules2:["balance_pairs","fragments_join"]}}},commonmark:{options:{html:!0,xhtmlOut:!0,breaks:!1,langPrefix:"language-",linkify:!1,typographer:!1,quotes:"",highlight:null,maxNesting:20},components:{core:{rules:["normalize","block","inline","text_join"]},block:{rules:["blockquote","code","fence","heading","hr","html_block","lheading","list","reference","paragraph"]},inline:{rules:["autolink","backticks","emphasis","entity","escape","html_inline","image","link","newline","text"],rules2:["balance_pairs","emphasis","fragments_join"]}}}},Ds=/^(vbscript|javascript|file|data):/,xs=/^data:image\/(gif|png|jpeg|webp);/;function Fs(t){const e=t.trim().toLowerCase();return!Ds.test(e)||xs.test(e)}const _s=["http:","https:","mailto:"];function As(t){const e=ni(t,!0);if(e.hostname&&(!e.protocol||_s.indexOf(e.protocol)>=0))try{e.hostname=ws(e.hostname)}catch(t){}return He(Ze(e))}function js(t){const e=ni(t,!0);if(e.hostname&&(!e.protocol||_s.indexOf(e.protocol)>=0))try{e.hostname=ks(e.hostname)}catch(t){}return Ue(Ze(e),Ue.defaultChars+"%")}function Cs(t,e){if(!(this instanceof Cs))return new Cs(t,e);e||Ci(t)||(e=t||{},t="default"),this.inline=new Jr,this.block=new Sr,this.core=new vr,this.renderer=new er,this.linkify=new ns,this.validateLink=Fs,this.normalizeLink=As,this.normalizeLinkText=js,this.utils=Yi,this.helpers=Si({},Xi),this.options={},this.configure(t),e&&this.set(e)}Cs.prototype.set=function(t){return Si(this.options,t),this},Cs.prototype.configure=function(t){const e=this;if(Ci(t)){const e=t;if(!(t=Es[e]))throw new Error('Wrong `markdown-it` preset "'+e+'", check name')}if(!t)throw new Error("Wrong `markdown-it` preset, can't be empty");return t.options&&e.set(t.options),t.components&&Object.keys(t.components).forEach((function(i){t.components[i].rules&&e[i].ruler.enableOnly(t.components[i].rules),t.components[i].rules2&&e[i].ruler2.enableOnly(t.components[i].rules2)})),this},Cs.prototype.enable=function(t,e){let i=[];Array.isArray(t)||(t=[t]),["core","block","inline"].forEach((function(e){i=i.concat(this[e].ruler.enable(t,!0))}),this),i=i.concat(this.inline.ruler2.enable(t,!0));const r=t.filter((function(t){return i.indexOf(t)<0}));if(r.length&&!e)throw new Error("MarkdownIt. Failed to enable unknown rule(s): "+r);return this},Cs.prototype.disable=function(t,e){let i=[];Array.isArray(t)||(t=[t]),["core","block","inline"].forEach((function(e){i=i.concat(this[e].ruler.disable(t,!0))}),this),i=i.concat(this.inline.ruler2.disable(t,!0));const r=t.filter((function(t){return i.indexOf(t)<0}));if(r.length&&!e)throw new Error("MarkdownIt. Failed to disable unknown rule(s): "+r);return this},Cs.prototype.use=function(t){const e=[this].concat(Array.prototype.slice.call(arguments,1));return t.apply(t,e),this},Cs.prototype.parse=function(t,e){if("string"!=typeof t)throw new Error("Input data should be a String");const i=new this.core.State(t,this,e);return this.core.process(i),i.tokens},Cs.prototype.render=function(t,e){return e=e||{},this.renderer.render(this.parse(t,e),this.options,e)},Cs.prototype.parseInline=function(t,e){const i=new this.core.State(t,this,e);return i.inlineMode=!0,this.core.process(i),i.tokens},Cs.prototype.renderInline=function(t,e){return e=e||{},this.renderer.render(this.parseInline(t,e),this.options,e)};const zs=new Cs({html:!0,xhtmlOut:!1,breaks:!1,langPrefix:"language-",linkify:!0,typographer:!0,quotes:"\"\"''",highlight:function(t,e){return""}});!function(t,e,i,r){const s=t.renderer.rules.table_open||function(t,e,i,r,s){return s.renderToken(t,e,i)};t.renderer.rules[`${e}_open`]=(t,e,n,o,a)=>{const u=t[e],c=u.attrIndex(i);return c<0?u.attrPush([i,r]):u.attrs&&(u.attrs[c][1]+=` ${r}`),s(t,e,n,o,a)}}(zs,"table","class","table table-striped table-responsive"),function(t,e,i){const r=t.renderer.rules.image||function(t,e,i,r,s){return s.renderToken(t,e,i)};t.renderer.rules.image=function(t,s,n,o,a){const u=t[s];return u.attrGet("width")||u.attrSet("width",`${e}`),u.attrGet("height")||u.attrSet("height",`${i}`),r(t,s,n,o,a)}}(zs,100,100);let Ss=class extends Zt{markdown="";static styles=[...super.styles,a`
            blockquote {
                padding: 10px 20px;
                margin: 0 0 20px;
                font-size: 17.5px;
                border-left: 5px solid #eee;
            }
            pre {
                display: block;
                padding: 9.5px;
                margin: 0 0 10px;
                font-size: 13px;
                line-height: 1.42857143;
                color: #333;
                word-break: break-all;
                word-wrap: break-word;
                background-color: #f5f5f5;
                border: 1px solid #ccc;
                border-radius: 4px;
            }
            pre code {
                padding: 0;
                font-size: inherit;
                color: inherit;
                white-space: pre-wrap;
                background-color: transparent;
                border-radius: 0;
            }
            code {
                padding: 2px 4px;
                font-size: 90%;
                color: #c7254e;
                background-color: #f9f2f4;
                border-radius: 4px;
            }
            h1,h2,h3,h4,h5,h6 {
                text-decoration: underline;
            }
        `];render(){const t=zs.render(this.markdown);return Q`<div>
            ${me(t)}
        </div>`}};t([F({attribute:"markdown",type:String,reflect:!0})],Ss.prototype,"markdown",void 0),Ss=t([e("markdown-it")],Ss);let Os=class extends ue{toField(){}toValue(){}renderInput(){return Q``}renderField(){return Q`
            <div class="form-group row ${this.validationMap}"><markdown-it .markdown="${this.value??""}"></markdown-it></div>
        `}};Os=t([e("fz-markdown")],Os);let qs=class extends ue{toField(){gt(this.input)&&(this.input.value=String(this.value??""))}toValue(){gt(this.input)&&(this.value=gt(this.input.value)?this.input.value:this.empty)}renderInput(){return Q`<div class="input-group ${this.validationMap}" >${this.value}</div>`}connectedCallback(){super.connectedCallback(),null==this.value&&(this.value=Me())}};qs=t([e("fz-uuid")],qs);class Is extends ae{}let Ps=class extends Is{#d=null;get current(){return this.#d}set current(t){this.#d=t}schemas=[];currentSchema;get nomore(){return this.schema.maxItems&&this.value&&this.value.length>=this.schema.maxItems}get noless(){return this.schema.minItems&&this.value&&this.value.length<=this.schema.minItems}static get styles(){return[...super.styles,a`.panel {
                    padding:5px;
                    border: solid 1px lightgray;
                    border-radius:10px; 
                    user-select: none;
                }`]}toField(){}toValue(){}connectedCallback(){super.connectedCallback(),this.listen(this,"toggle-item",(t=>(this.close(),this.eventStop(t))))}requestUpdate(t,e){void 0!==t&&(this.solveSchemas(!0),super.requestUpdate(t,e))}renderField(){this.solveSchemas();const t=this.data&&this.value?this.value.map(((t,e)=>Q`${this.current===e?this.renderEditable(e):this.renderStatic(e)}`)):[];return Q`
            <div @focusout="${this.focusout}">
                <div class="form-group row">
                ${""===this.schema.title?Q``:this.renderLabel}
                    <div class="col-sm">
                        <ul id="content" class="list-group">
                            ${t}
                            ${this.readonly?Q``:Q`
                                <li class="list-group-item" @click="${this.close}">
                                    <button type="button" @click="${this.add}" ?disabled="${this.nomore}" class="btn btn-primary btn-sm "><b>+</b></button>
                                    ${this.schema.homogeneous?null:Q`
                                        <div class="btn-group" style="float:right" role="group">
                                            <button id="btnGroupDrop1" type="button" class="btn btn-primary dropdown-toggle btn-sm"
                                                @click="${this.toggleDropdown}" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                            ${this.currentSchema?.title||"Ajouter"}
                                            </button> 
                                            <div class="dropdown-menu" aria-labelledby="btnGroupDrop1">
                                                ${this.schema.items?.oneOf?.map(((t,e)=>Q`<a class="dropdown-item"
                                                    @click="${()=>this.selectSchema(e)}" >${t.title||"Type"+e}</a>`))}
                                            </div>
                                        </div>`}
                                </li>
                            `}
                        </ul>
                    </div>
                </div>
            </div>`}renderStatic(t){return this.solveOrder(),this.solveSchemas(),Q`
        <li 
                id="${t}"
                draggable="true" 
                @dragstart="${e=>this.drag(t,e)}"
                @dragover="${this.allowDrop}"
                @drop="${this.drop}"   
                @click="${e=>this.open(t,e)}"              
                class="list-group-item"
            >
            ${this.abstract(t,this.schemas[t])}
            ${this.readonly?Q``:Q`<button ?hidden="${this.noless}" @click="${e=>this.del(t,e)}" type="button" style="float:right" class="btn-close" aria-label="Close"></button>`}
        </li>`}renderEditable(t){const e=this.schemas[t];return Q`<li class="list-group-item"> ${this.renderItem(e,t)} </li>`}focusout(){this.change()}focus(){if(this.fields().length>0){this.fields()[0].dofocus()}}open(t,e){this.current===t?this.close():(this.current=t,this.dofocus()),this.eventStop(e)}close(t){this.eventStop(t),this.current=null,this.change()}drag(t,e){e.dataTransfer?e.dataTransfer.setData("text",t.toString()):e.originalEvent.dataTransfer&&e.originalEvent.dataTransfer.setData("text",t.toString()),this.current=null,this.requestUpdate()}drop(t){if(t.dataTransfer){const e=parseInt(t.dataTransfer.getData("text"),10),i=parseInt(t.target.id);this.value.splice(i,0,this.value.splice(e,1)[0]),this.schemas.splice(i,0,this.schemas.splice(e,1)[0]),this.requestUpdate()}this.eventStop(t)}allowDrop(t){t.preventDefault()}del(t,e){this.noless||(this.remItem(t),this.eventStop(e))}add(t){!this.nomore&&this.currentSchema&&(this.addItem(this.currentSchema),this.eventStop(t))}remItem(t){this.value.splice(t,1),this.schemas.splice(t,1),this.current=null,this.change()}addItem(t,e=!0){null==this.value&&(this.value=[]);const i=t._default(this.data);this.value.push(i),this.schemas.push(t),e&&this.open(this.value.length-1),this.change()}toggleDropdown(){const t=this.shadowRoot?.querySelector(".dropdown-menu")?.style.display;"block"==t?this.closeDropdown():this.openDropdown()}closeDropdown(){const t=this.shadowRoot?.querySelector(".dropdown-menu");null!=t&&(t.style.display="none")}openDropdown(){const t=this.shadowRoot?.querySelector(".dropdown-menu");null!=t&&(t.style.display="block")}selectSchema(t){this.currentSchema=this.schema.items?.oneOf?.[t],this.closeDropdown(),this.requestUpdate()}solveSchemas(t=!1){kt(this.schema.items)&&(!t&&this.currentSchema&&this.schemas||(this.currentSchema||(this.currentSchema=this.schema.homogeneous?this.schema.items:this.schema.items.oneOf?.[0]??te),this.schemas=null==this.value?[]:this.schema.homogeneous?this.value.map((()=>this.schema.items)):this.value.map((t=>Tt(t)??this.schema.items?.oneOf?.find((e=>Dt(e.case)&&e.case(te,t,this.data,this.key,this.derefFunc,this.form.options.userdata)))))))}solveOrder(){if(null==this.value)return;const t=this.value,e=t.map(((t,e)=>e)).sort(((e,i)=>{const r=this.evalExpr("orderBy",this.schemas[e],t[e],this.value,e),s=this.evalExpr("orderBy",this.schemas[i],t[i],this.value,i);switch(!0){case r===s:return 0;case null==r:return-1;case null==s:case r>s:return 1;case r<s:return-1;default:return 0}})),i=this.schemas.map((t=>t)),r=t.map((t=>t));for(let t=0;t<e.length;t++)this.schemas[t]=i[e[t]],this.value[t]=r[e[t]]}};t([F({attribute:!1})],Ps.prototype,"current",null),Ps=t([e("fz-array")],Ps);let Ts=class extends Is{#p=!1;get collapsed(){return this.#p}set collapsed(t){this.#p=t}#m={};get activegroup(){return this.#m}set activegroup(t){this.#m=t}seen;static get styles(){return[...super.styles,a`
                .panel {
                    padding:5px;
                    border: solid 1px lightgray;
                    border-radius:10px; 
                    user-select: none;
                }
                `]}toField(){}toValue(){}firstUpdated(t){super.firstUpdated(t),this.setCollapsed()}setCollapsed(){this.collapsed=null!=this.schema.parent&&this.evalExpr("collapsed")}renderSingle(t,e,i){const r=e[i].fieldname,s=this.schema.properties?.[r];return t.push(s?this.renderItem(s,r):Q``),i+=1}renderGroup(t,e,i){const r=[],s=e[i].groupnum,n=e[i].groupname;for(;i<e.length&&s===e[i].groupnum;i++){const t=e[i].fieldname,s=this.schema.properties?.[t];r.push(s?this.renderItem(s,t):Q``)}return t.push(Q`
                <div class="card shadow" style="margin-bottom:5px">
                    <div class="card-header d-flex justify-content-between align-items-center">${n}</div>
                    <div class="card-body">${r}</div>
                </div>`),i}renderTabGroup(t,e,i){const r=[],s=e[i].groupnum,n=e[i].groupname,o=e[i].tabname;for(;i<e.length&&s===e[i].groupnum;i++){const t=e[i].fieldname,s=this.schema.properties?.[t],a=this.activegroup[o]!==n;r.push(Q`<div 
                        class="tab-pane active container" 
                        style="margin:0;max-width:100%"  
                        id="content" 
                        ?hidden="${a}" 
                        data-tabname="${o}" 
                        data-groupname="${n}">
                        ${s?this.renderItem(s,t):""}
                    </div>`)}return t.push(Q`${r}`),i}renderTab(t,e,i){const r=[],s=e[i].tabnum,n=e[i].tabname,o=i;for(this.activegroup[n]=e[i].groupname;i<e.length&&s===e[i].tabnum;)i=this.renderTabGroup(r,e,i);const a={};for(let t=o;t<i;t++){a[e[t].groupname]=1}const u=Object.keys(a);return t.push(Q`<ul class="nav nav-tabs" id="content">
                ${u.map((t=>Q`<li class="nav-item">
                        <a class="nav-link" data-tabname="${n}" data-groupname="${t}" @click="${this.toggleTab}" aria-current="page" href="#" data-toggle="tab" href="#${t}">${t}</a>
                    </li>`))}
            </ul>`),t.push(Q`<div class="tab-content border border-top-0" id="content" style="padding-bottom:5px;margin-bottom:5px">${r}</div>`),i}get deletable(){return null!=this.schema.parent&&!this.isEmpty&&(!(!this.schema.nullAllowed||!this.nullable)||!this.schema.nullAllowed&&!this.required)}async delete(){null!==this.collapsed&&(this.collapsed=!0),this.value=this.empty}renderField(){if(!this.schema.properties)return Q``;const t=[],e=this.schema.order;let i=0;for(;e&&i<e.length;){const r=e[i];i=r.tabname&&r.groupname?this.renderTab(t,e,i):r.groupname?this.renderGroup(t,e,i):this.renderSingle(t,e,i)}return Q`${this.isItem?Q`<div>${this.renderLabel}</div>${t}`:""===this.schema.title?Q`<div ?hidden="${this.collapsed}" > ${t} </div>`:Q`<div class="panel" id="content" >
                <div class="panel-heading">
                    <div>
                        ${this.renderLabel}
                        ${this.collapsed?Q`${this.abstract()}`:Q``}
                        <button
                            ?hidden="${!this.deletable}"
                            @click="${()=>this.delete()}" 
                            type="button" style="float:right" class="btn-close" aria-label="Close">
                        </button>
                    </div>
                </div>
                <hr ?hidden="${this.collapsed}" style="margin: 0 0" >
                <div ?hidden="${this.collapsed}" > ${t} </div>
                </div>`}`}isRequiredProperty(t){return!!this.schema.required?.includes(t)}fields(){const t=[],e=Object.values(this.schema.properties??{}).map((t=>t.field)).join(", "),i=this.shadowRoot?.querySelectorAll(e);return i?.forEach((e=>t.push(e))),t}focus(){this.fields()[0].dofocus()}labelClicked(t){this.isItem?this.dispatchEvent(new CustomEvent("toggle-item",{detail:{field:this},bubbles:!0,composed:!0})):this.toggle(t),super.labelClicked(t)}toggleTab(t){const e=t.target,i=e.getAttribute("data-tabname"),r=e.getAttribute("data-groupname"),s=e.parentElement?.parentElement,n=s?.querySelectorAll("a")??[];for(const t of n)t.classList.remove("active");e.classList.add("active"),this.activegroup[i]=r;const o=s.nextElementSibling,a=o?.querySelectorAll(".tab-pane")??[];if(a)for(const t of a)t.hidden=t.getAttribute("data-groupname")!==r;this.eventStop(t)}toggle(t){null!==this.collapsed&&(this.collapsed=!this.collapsed),this.eventStop(t),this.requestUpdate()}};t([F({attribute:!1})],Ts.prototype,"collapsed",null),t([F({attribute:!1})],Ts.prototype,"activegroup",null),Ts=t([e("fz-object")],Ts);
/**
 * @license
 * Copyright 2020 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */
const{I:Ns}=dt,Ms=()=>document.createComment(""),Rs=(t,e,i)=>{const r=t._$AA.parentNode,s=void 0===e?t._$AB:e._$AA;if(void 0===i){const e=r.insertBefore(Ms(),s),n=r.insertBefore(Ms(),s);i=new Ns(e,n,t,t.options)}else{const e=i._$AB.nextSibling,n=i._$AM,o=n!==t;if(o){let e;i._$AQ?.(t),i._$AM=t,void 0!==i._$AP&&(e=t._$AU)!==n._$AU&&i._$AP(e)}if(e!==s||o){let t=i._$AA;for(;t!==e;){const e=t.nextSibling;r.insertBefore(t,s),t=e}}}return i},Bs=(t,e,i=t)=>(t._$AI(e,i),t),Ls={},Us=t=>{t._$AP?.(!1,!0);let e=t._$AA;const i=t._$AB.nextSibling;for(;e!==i;){const t=e.nextSibling;e.remove(),e=t}},Vs=(t,e,i)=>{const r=new Map;for(let s=e;s<=i;s++)r.set(t[s],s);return r},Hs=re(class extends se{constructor(t){if(super(t),t.type!==ie)throw Error("repeat() can only be used in text expressions")}dt(t,e,i){let r;void 0===i?i=e:void 0!==e&&(r=e);const s=[],n=[];let o=0;for(const e of t)s[o]=r?r(e,o):o,n[o]=i(e,o),o++;return{values:n,keys:s}}render(t,e,i){return this.dt(t,e,i).values}update(t,[e,i,r]){const s=(t=>t._$AH)(t),{values:n,keys:o}=this.dt(e,i,r);if(!Array.isArray(s))return this.ut=o,n;const a=this.ut??=[],u=[];let c,h,l=0,f=s.length-1,d=0,p=n.length-1;for(;l<=f&&d<=p;)if(null===s[l])l++;else if(null===s[f])f--;else if(a[l]===o[d])u[d]=Bs(s[l],n[d]),l++,d++;else if(a[f]===o[p])u[p]=Bs(s[f],n[p]),f--,p--;else if(a[l]===o[p])u[p]=Bs(s[l],n[p]),Rs(t,u[p+1],s[l]),l++,p--;else if(a[f]===o[d])u[d]=Bs(s[f],n[d]),Rs(t,s[l],s[f]),f--,d++;else if(void 0===c&&(c=Vs(o,d,p),h=Vs(a,l,f)),c.has(a[l]))if(c.has(a[f])){const e=h.get(o[d]),i=void 0!==e?s[e]:null;if(null===i){const e=Rs(t,s[l]);Bs(e,n[d]),u[d]=e}else u[d]=Bs(i,n[d]),Rs(t,s[l],i),s[e]=null;d++}else Us(s[f]),f--;else Us(s[l]),l++;for(;d<=p;){const e=Rs(t,u[p+1]);Bs(e,n[d]),u[d++]=e}for(;l<=f;){const t=s[l++];null!==t&&Us(t)}return this.ut=o,((t,e=Ls)=>{t._$AH=e})(t,u),Y}});
/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */let Zs=class extends Is{toField(){}toValue(){}renderField(){return Q`
            <div class="form-group row">
                ${this.renderLabel}
                <div class="col-sm">
                    <ul id="content" class="list-group"   style="max-height: 300px; overflow-y: scroll">
                            ${Hs(this.getItems(),(t=>t),(t=>Q`
                                    <li class="list-group-item">
                                        <div>
                                            <input
                                                class="form-check-input"
                                                type="checkbox"
                                                ?disabled="${!!this.readonly}"
                                                ?checked="${this.value?.includes(t.value)}"
                                                @click="${()=>this.toggle(t.value)}"
                                                autocomplete=off  spellcheck="false"/>
                                            <label class="form-check-label">${t.label}</label>
                                        </div>
                                    </li>
                                `))}
                    </ul>
                </div>
            </div>`}connectedCallback(){super.connectedCallback()}toggle(t){if(null==this.value&&(this.value=[]),this.value.includes(t)){const e=this.value.indexOf(t);e>=0&&this.value.splice(e,1)}else this.value.push(t)}getItems(){const t=this.schema.items?.enum,e=this.data;if(t)return t.reduce(((t,i)=>(this.evalExpr("filter",this.schema.items,i,e[this.key],-1)&&t.push({label:String(i),value:i}),t)),[]);const i=this.schema.items?.oneOf;return i?i.reduce(((t,e)=>(this.evalExpr("filter",e,e.const,this.data[this.key],-1)&&t.push({label:e.title??e.description??e.const,value:e.const}),t)),[]):[]}};Zs=t([e("fz-enum-array")],Zs);let Gs=class extends Zt{modal;backdrop;validable=!1;#$="Dialogue";get modalTitle(){return this.#$}set modalTitle(t){this.#$=t}#g="Valider";get okLabel(){return this.#g}set okLabel(t){this.#g=t}#b="Annuler";get dismissLabel(){return this.#b}set dismissLabel(t){this.#b=t}static get styles(){return[...super.styles,a`
            .modal-body {
                max-height: 75vh; min-height: 50vh; overflow-y: auto;
            }`]}render(){return Q`
            <div class="modal fade" id="modal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-modal="true" role="dialog">
                <div class="modal-dialog" role="document">
                    <div class="modal-content">
                        <div class="modal-header">
                            <h5 class="modal-title" >${this.modalTitle}</h5>
                            <button type="button" class="btn btn-secondary " aria-label="Close"  @click="${this.dismiss}">
                                <span aria-hidden="true"></span>
                            </button>
                        </div>
                        <div class="modal-body">
                            <slot></slot>
                        </div>
                        <div class="modal-footer">
                            <button ?disabled="${!this.validable}" type="button" class="btn btn-primary" @click="${this.validate}">${this.okLabel}</button>
                            <button type="button" class="btn btn-danger" @click="${this.dismiss}" >${this.dismissLabel}</button>
                        </div>
                    </div>
                </div>
            </div>
            <div class="modal-backdrop fade show" id="backdrop"  style="display: none;" @click="${this.dismiss}"></div>`}get isOpen(){return this.modal?.classList.contains("show")}firstUpdated(){this.modal=this.shadowRoot?.getElementById("modal"),this.backdrop=this.shadowRoot?.getElementById("backdrop")}open(){this.backdrop&&(this.backdrop.style.display="block"),this.modal&&(this.modal.style.display="block",this.modal.classList.add("show")),this.requestUpdate(),this.dispatchEvent(new CustomEvent("fz-dialog-open",{detail:{}}))}close(){this.backdrop&&(this.backdrop.style.display="none"),this.modal&&(this.modal.style.display="none",this.modal.classList.remove("show"))}validate(t){this.close(),t.preventDefault(),t.stopPropagation(),this.dispatchEvent(new CustomEvent("close",{detail:{dismissed:!1}}))}dismiss(t){this.close(),t.preventDefault(),t.stopPropagation(),this.dispatchEvent(new CustomEvent("close",{detail:{dismissed:!0}}))}valid(t=!0){this.validable=t,this.requestUpdate()}};var Js;t([F({attribute:"modal-title"})],Gs.prototype,"modalTitle",null),t([F({attribute:"ok-label"})],Gs.prototype,"okLabel",null),t([F({attribute:"dismiss-label"})],Gs.prototype,"dismissLabel",null),Gs=t([e("fz-dialog")],Gs),function(t){t[t.notready=0]="notready",t[t.scanning=1]="scanning",t[t.done=2]="done",t[t.fail=3]="fail"}(Js||(Js={}));const Ks=["code_128","code_39","code_93","codabar","ean_13","ean_8","itf","pdf417","upc_a","upc_e","aztec","data_matrix","qr_code"];let Ws=class extends Zt{detector;code;#f=Js.notready;get state(){return this.#f}set state(t){this.#f=t}modal;video;status="Initializing";static get styles(){return[...super.styles,a`
            div {
                color: black
            }
            `]}render(){return Q`
            <fz-dialog modal-title="Scanner un codebar" @click="${this.stopEvent}" @close="${this.close}" > 
                <div class="row">
                    <video  class=col autoplay style="display:block" .title="${this.status}">Chargement en cours ...</video>
                </div>
                <div class="btn-toolbar m-3 row" role="toolbar">
                    <button class="btn btn-primary col m-1" ?disabled="${!this.code}" @click="${this.scan}"><i class="bi bi-upc-scan"></i></button>
                </div>
                <div>${this.status}</div>
            </fz-dialog>
            `}stopEvent(t){t.preventDefault(),t.stopPropagation()}close(t){this.video&&(this.video?.pause(),this.video.srcObject=null);const e=t.detail;t.detail.dismissed||(t.detail.code=this.code),this.dispatchEvent(new CustomEvent("close",{detail:e})),this.modal?.valid(!1)}firstUpdated(){BarcodeDetector&&(this.detector=new BarcodeDetector({formats:Ks})),this.modal=this.shadowRoot?.querySelector("fz-dialog"),this.video=this.shadowRoot?.querySelector("video"),this.video&&this.listen(this.video,"play",(t=>this.scan()))}async initCamera(){try{const t=await navigator.mediaDevices.getUserMedia({video:{facingMode:{exact:"environment"}}});this.video&&(this.video.srcObject=t)}catch(t){this.status=`Unable to initialize Camera : ${String(t)}`}}scan(){this.setState(Js.scanning);const t=async()=>{try{(await this.detector.detect(this.video)).filter((t=>t.rawValue)).forEach((t=>{this.code=t.rawValue,this.setState(Js.done)}))}catch(t){}},e=()=>{this.state===Js.scanning&&(requestAnimationFrame(e),t())};e()}async open(){this.setState(Js.notready),this.modal&&this.modal.open(),await this.initCamera()}setState(t){switch(this.state=t,this.modal?.valid(!1),t){case Js.fail:this.status=`${this.state}  Pas de flux video`;break;case Js.notready:this.status=`${this.state}  En initialisation`;break;case Js.scanning:this.status=`${this.state}  Scannez`;break;case Js.done:this.status=`${this.state}  Resultat: ${this.code}`,this.modal?.valid(!0)}}};var Qs;t([_()],Ws.prototype,"state",null),Ws=t([e("fz-barcode-dlg")],Ws),function(t){t[t.notready=0]="notready",t[t.video=1]="video",t[t.lowres=2]="lowres",t[t.hires=3]="hires"}(Qs||(Qs={}));let Ys=class extends Zt{#f=Qs.video;get state(){return this.#f}set state(t){this.#f=t}modal;video;canvas;imageCapture;imageBitmap;status="Initializing";get isVideo(){return this.state===Qs.video}static get styles(){return[...super.styles,a`
            div {
                color: black
            }
            `]}render(){return Q`
            <fz-dialog modal-title="Prendre une photo ..." @click="${this.stopEvent}" @close="${this.close}" > 
                <div class="row">
                    <video  class=col autoplay style="display:block" .title="${this.status}">Chargement en cours ...</video>
                </div>
                <div class="row">
                    <canvas class=col id='canvas' style="display:none" ></canvas>
                </div>
                <div class="btn-toolbar m-3 row" role="toolbar">
                        <button class="btn btn-primary col m-1" ?disabled="${this.isVideo}" @click="${this.retry}"><i class="bi bi-arrow-counterclockwise"></i></button>
                        <button class="btn btn-primary col m-1" ?disabled="${!this.isVideo}" @click="${this.takePhotoLowres}"><i class="bi bi-camera"></i><sup> - </sup></button>
                        <button class="btn btn-primary col m-1" ?disabled="${!this.isVideo}" @click="${this.takePhotoHires}"><i class="bi bi-camera"></i><sup> + </sup></button>
               </div>
            </fz-dialog>
            `}stopEvent(t){t.preventDefault(),t.stopPropagation()}close(t){this.video&&(this.video?.pause(),this.video.srcObject=null,this.imageCapture?.track.stop());const e=t.detail;this.canvas?.toBlob((i=>{if(!i)return;const r=URL.createObjectURL(i);t.detail.dismissed||(t.detail.imageBitmap=this.imageBitmap,t.detail.url=r,t.detail.blob=i),this.dispatchEvent(new CustomEvent("close",{detail:e})),this.imageBitmap=void 0,this.modal?.valid(!1)}),"image/png",.8)}firstUpdated(){this.modal=this.shadowRoot?.querySelector("fz-dialog"),this.video=this.shadowRoot?.querySelector("video"),this.canvas=this.shadowRoot?.querySelector("canvas")}getUserMedia(){navigator.mediaDevices.getUserMedia({video:{facingMode:"environment"}}).then((t=>{if(this.video){this.video.srcObject=t;const e=t.getVideoTracks()[0];this.imageCapture=new ImageCapture(e),this.setState(Qs.video)}})).catch((t=>this.status=`Unable to initialize Camera : ${String(t)}`))}retry(t){t.preventDefault(),t.stopPropagation(),this.imageBitmap=void 0,this.modal?.valid(!1),this.setState(Qs.video)}takePhotoLowres(t){t.preventDefault(),t.stopPropagation(),this.imageCapture&&this.imageCapture.grabFrame().then((t=>{this.imageBitmap=t,this.modal?.valid(!0),this.drawCanvas(),this.setState(Qs.lowres)})).catch((t=>this.status=`Unable to grab Lowres photo : ${String(t)}`))}takePhotoHires(t){t.preventDefault(),t.stopPropagation(),this.imageCapture&&this.imageCapture.takePhoto().then((t=>createImageBitmap(t))).then((t=>{this.imageBitmap=t,this.modal?.valid(!0),this.drawCanvas(),this.setState(Qs.hires)})).catch((t=>this.status=`Unable to grab Hires photo : ${String(t)}`))}drawCanvas(){if(!this.canvas||!this.video||!this.imageBitmap)return;this.canvas.width=this.video.offsetWidth,this.canvas.height=this.video.offsetHeight;const t=Math.min(this.canvas.width/this.imageBitmap.width,this.canvas.height/this.imageBitmap.height),e=(this.canvas.width-this.imageBitmap.width*t)/2,i=(this.canvas.height-this.imageBitmap.height*t)/2;this.canvas.getContext("2d")?.clearRect(0,0,this.canvas.width,this.canvas.height),this.canvas.getContext("2d")?.drawImage(this.imageBitmap,0,0,this.imageBitmap.width,this.imageBitmap.height,e,i,this.imageBitmap.width*t,this.imageBitmap.height*t)}open(){this.setState(Qs.notready),this.modal&&this.modal.open(),this.getUserMedia()}setState(t){if(this.video&&this.canvas)switch(t){case Qs.notready:this.video.style.display="block",this.canvas.style.display="none",this.status="NOTREADY";break;case Qs.video:this.video.style.display="block",this.canvas.style.display="none",this.status="VIDEO";break;case Qs.lowres:this.video.style.display="none",this.canvas.style.display="block",this.status=`IMAGE LOWRES : ${this.imageBitmap?.width} x ${this.imageBitmap?.height} px`;break;case Qs.hires:this.video.style.display="none",this.canvas.style.display="block",this.status=`IMAGE HIRES : ${this.imageBitmap?.width} x ${this.imageBitmap?.height} px`}this.state=t}};t([_()],Ys.prototype,"state",null),Ys=t([e("fz-photo-dlg")],Ys);let Xs=class extends Zt{#y;get reference(){return this.#y}set reference(t){this.#y=t}modal;arraySchema;itemSchema;array;index;pointer;refname;static get styles(){return[...super.styles,a`
            div {
                color: black
            }
            `]}render(){return Q`
            <fz-dialog modal-title="Ajouter un element ..." @click="${this.stopEvent}" @close="${this.close}" > 
                ${null!=this.itemSchema||null==this.arraySchema?.items?.oneOf?"":Q`<div class="btn-group" role="group">
                    <button id="btnGroupDrop1" type="button" class="btn btn-primary dropdown-toggle btn-sm"
                        @click="${this.toggleDropdown}" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                    ${"Choose type"}
                    </button> 
                    <div class="dropdown-menu" aria-labelledby="btnGroupDrop1">
                        ${this.arraySchema?.items.oneOf.map(((t,e)=>Q`<a class="dropdown-item"
                        @click="${()=>this.addItem(t)}" >${t.title||"Type"+e}</a>`))}
                    </div>
                </div>`}
                ${null==this.itemSchema?"":Q`<fz-object id="form-object" .pointer="${this.pointer}/${this.index}"  .schema="${this.itemSchema}" .name="${void 0}" .index="${this.index}" .data="${this.array}"></fz-object>`}
            </fz-dialog>`}updated(t){this.reference?(this.pointer=this.reference?.pointer,this.array=this.reference?.target,this.refname=this.reference?.name,this.arraySchema=Tt(this.array)):(this.pointer=void 0,this.array=void 0,this.refname=void 0,this.arraySchema=void 0,this.itemSchema=void 0)}toggleDropdown(){const t=this.shadowRoot?.querySelector(".dropdown-menu");t?.style.setProperty("display","block"==t?.style.display?"none":"block")}addItem(t){this.itemSchema=t;const e=this.itemSchema._default(this.array);this.index=this.array?.length,this.array?.push(e),this.modal?.valid(),this.requestUpdate()}stopEvent(t){t.preventDefault(),t.stopPropagation()}close(t){const e=t.detail;if(!t.detail.dismissed){const e=this.shadowRoot?.getElementById("form-object");t.detail.value=e.value[this.refname??"id"],t.detail.abstract=e.abstract()}this.reference=void 0,this.stopEvent(t),this.dispatchEvent(new CustomEvent("close",{detail:e})),this.modal?.valid(!1)}firstUpdated(){this.modal=this.shadowRoot?.querySelector("fz-dialog")}open(){this.modal&&this.modal.open(),this.arraySchema?.homogeneous&&void 0===this.index&&this.arraySchema?.items&&this.addItem(this.arraySchema?.items)}};t([F({type:Object})],Xs.prototype,"reference",null),Xs=t([e("fz-item-dlg")],Xs);var tn={$schema:"http://json-schema.org/draft-07/schema#",$id:"http://json-schema.org/draft-07/schema-3s#",title:"Core schema meta-schema",definitions:{schemaArray:{type:"array",minItems:1,items:{$ref:"#"}},nonNegativeInteger:{type:"integer",minimum:0},nonNegativeIntegerDefault0:{allOf:[{$ref:"#/definitions/nonNegativeInteger"},{default:0}]},simpleTypes:{enum:["array","boolean","integer","null","number","object","string"]},stringArray:{type:"array",items:{type:"string"},uniqueItems:!0,default:[]}},type:["object","boolean"],properties:{$id:{type:"string",format:"uri-reference"},$schema:{type:"string",format:"uri"},$ref:{type:"string",format:"uri-reference"},$comment:{type:"string"},title:{type:"string"},description:{type:"string"},default:!0,readOnly:{type:"boolean",default:!1},examples:{type:"array",items:!0},multipleOf:{type:"number",exclusiveMinimum:0},maximum:{type:"number"},exclusiveMaximum:{type:"number"},minimum:{type:"number"},exclusiveMinimum:{type:"number"},maxLength:{$ref:"#/definitions/nonNegativeInteger"},minLength:{$ref:"#/definitions/nonNegativeIntegerDefault0"},pattern:{type:"string",format:"regex"},additionalItems:{$ref:"#"},items:{anyOf:[{$ref:"#"},{$ref:"#/definitions/schemaArray"}],default:!0},maxItems:{$ref:"#/definitions/nonNegativeInteger"},minItems:{$ref:"#/definitions/nonNegativeIntegerDefault0"},uniqueItems:{type:"boolean",default:!1},contains:{$ref:"#"},maxProperties:{$ref:"#/definitions/nonNegativeInteger"},minProperties:{$ref:"#/definitions/nonNegativeIntegerDefault0"},required:{$ref:"#/definitions/stringArray"},additionalProperties:{$ref:"#"},definitions:{type:"object",additionalProperties:{$ref:"#"},default:{}},properties:{type:"object",additionalProperties:{$ref:"#"},default:{}},patternProperties:{type:"object",additionalProperties:{$ref:"#"},propertyNames:{format:"regex"},default:{}},dependencies:{type:"object",additionalProperties:{anyOf:[{$ref:"#"},{$ref:"#/definitions/stringArray"}]}},propertyNames:{$ref:"#"},const:!0,enum:{type:"array",items:!0,minItems:1,uniqueItems:!0},type:{anyOf:[{$ref:"#/definitions/simpleTypes"},{type:"array",items:{$ref:"#/definitions/simpleTypes"},minItems:1,uniqueItems:!0}]},format:{type:"string"},contentMediaType:{type:"string"},contentEncoding:{type:"string"},if:{$ref:"#"},then:{$ref:"#"},else:{$ref:"#"},allOf:{$ref:"#/definitions/schemaArray"},anyOf:{$ref:"#/definitions/schemaArray"},oneOf:{$ref:"#/definitions/schemaArray"},not:{$ref:"#"}},default:!0};function en(t){return t&&t.W&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var rn,sn={exports:{}},nn={},on={},an={},un={},cn={},hn={};function ln(){return rn||(rn=1,function(t){Object.defineProperty(t,"W",{value:!0}),t.regexpCode=t.getEsmExportName=t.getProperty=t.safeStringify=t.stringify=t.strConcat=t.addCodeArg=t.str=t._=t.nil=t._Code=t.Name=t.IDENTIFIER=t._CodeOrName=void 0;class e{}t._CodeOrName=e,t.IDENTIFIER=/^[a-z$_][a-z$_0-9]*$/i;class i extends e{constructor(e){if(super(),!t.IDENTIFIER.test(e))throw new Error("CodeGen: name must be a valid identifier");this.str=e}toString(){return this.str}emptyStr(){return!1}get names(){return{[this.str]:1}}}t.Name=i;class r extends e{constructor(t){super(),this._items="string"==typeof t?[t]:t}toString(){return this.str}emptyStr(){if(this._items.length>1)return!1;const t=this._items[0];return""===t||'""'===t}get str(){var t;return null!==(t=this._str)&&void 0!==t?t:this._str=this._items.reduce(((t,e)=>`${t}${e}`),"")}get names(){var t;return null!==(t=this._names)&&void 0!==t?t:this._names=this._items.reduce(((t,e)=>(e instanceof i&&(t[e.str]=(t[e.str]||0)+1),t)),{})}}function s(t,...e){const i=[t[0]];let s=0;for(;s<e.length;)a(i,e[s]),i.push(t[++s]);return new r(i)}t._Code=r,t.nil=new r(""),t._=s;const n=new r("+");function o(t,...e){const i=[c(t[0])];let s=0;for(;s<e.length;)i.push(n),a(i,e[s]),i.push(n,c(t[++s]));return function(t){let e=1;for(;e<t.length-1;){if(t[e]===n){const i=u(t[e-1],t[e+1]);if(void 0!==i){t.splice(e-1,3,i);continue}t[e++]="+"}e++}}(i),new r(i)}function a(t,e){e instanceof r?t.push(...e._items):e instanceof i?t.push(e):t.push(function(t){return"number"==typeof t||"boolean"==typeof t||null===t?t:c(Array.isArray(t)?t.join(","):t)}(e))}function u(t,e){if('""'===e)return t;if('""'===t)return e;if("string"==typeof t){if(e instanceof i||'"'!==t[t.length-1])return;return"string"!=typeof e?`${t.slice(0,-1)}${e}"`:'"'===e[0]?t.slice(0,-1)+e.slice(1):void 0}return"string"!=typeof e||'"'!==e[0]||t instanceof i?void 0:`"${t}${e.slice(1)}`}function c(t){return JSON.stringify(t).replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")}t.str=o,t.addCodeArg=a,t.strConcat=function(t,e){return e.emptyStr()?t:t.emptyStr()?e:o`${t}${e}`},t.stringify=function(t){return new r(c(t))},t.safeStringify=c,t.getProperty=function(e){return"string"==typeof e&&t.IDENTIFIER.test(e)?new r(`.${e}`):s`[${e}]`},t.getEsmExportName=function(e){if("string"==typeof e&&t.IDENTIFIER.test(e))return new r(`${e}`);throw new Error(`CodeGen: invalid export name: ${e}, use explicit $id name mapping`)},t.regexpCode=function(t){return new r(t.toString())}}(hn)),hn}var fn,dn,pn={};function mn(){return fn||(fn=1,function(t){Object.defineProperty(t,"W",{value:!0}),t.ValueScope=t.ValueScopeName=t.Scope=t.varKinds=t.UsedValueState=void 0;const e=ln();class i extends Error{constructor(t){super(`CodeGen: "code" for ${t} not defined`),this.value=t.value}}var r;!function(t){t[t.Started=0]="Started",t[t.Completed=1]="Completed"}(r||(t.UsedValueState=r={})),t.varKinds={const:new e.Name("const"),let:new e.Name("let"),var:new e.Name("var")};class s{constructor({prefixes:t,parent:e}={}){this._names={},this._prefixes=t,this._parent=e}toName(t){return t instanceof e.Name?t:this.name(t)}name(t){return new e.Name(this._newName(t))}_newName(t){return`${t}${(this._names[t]||this._nameGroup(t)).index++}`}_nameGroup(t){var e,i;if((null===(i=null===(e=this._parent)||void 0===e?void 0:e._prefixes)||void 0===i?void 0:i.has(t))||this._prefixes&&!this._prefixes.has(t))throw new Error(`CodeGen: prefix "${t}" is not allowed in this scope`);return this._names[t]={prefix:t,index:0}}}t.Scope=s;class n extends e.Name{constructor(t,e){super(e),this.prefix=t}setValue(t,{property:i,itemIndex:r}){this.value=t,this.scopePath=e._`.${new e.Name(i)}[${r}]`}}t.ValueScopeName=n;const o=e._`\n`;t.ValueScope=class extends s{constructor(t){super(t),this._values={},this._scope=t.scope,this.opts={...t,_n:t.lines?o:e.nil}}get(){return this._scope}name(t){return new n(t,this._newName(t))}value(t,e){var i;if(void 0===e.ref)throw new Error("CodeGen: ref must be passed in value");const r=this.toName(t),{prefix:s}=r,n=null!==(i=e.key)&&void 0!==i?i:e.ref;let o=this._values[s];if(o){const t=o.get(n);if(t)return t}else o=this._values[s]=new Map;o.set(n,r);const a=this._scope[s]||(this._scope[s]=[]),u=a.length;return a[u]=e.ref,r.setValue(e,{property:s,itemIndex:u}),r}getValue(t,e){const i=this._values[t];if(i)return i.get(e)}scopeRefs(t,i=this._values){return this._reduceValues(i,(i=>{if(void 0===i.scopePath)throw new Error(`CodeGen: name "${i}" has no value`);return e._`${t}${i.scopePath}`}))}scopeCode(t=this._values,e,i){return this._reduceValues(t,(t=>{if(void 0===t.value)throw new Error(`CodeGen: name "${t}" has no value`);return t.value.code}),e,i)}_reduceValues(s,n,o={},a){let u=e.nil;for(const c in s){const h=s[c];if(!h)continue;const l=o[c]=o[c]||new Map;h.forEach((s=>{if(l.has(s))return;l.set(s,r.Started);let o=n(s);if(o){const i=this.opts.es5?t.varKinds.var:t.varKinds.const;u=e._`${u}${i} ${s} = ${o};${this.opts._n}`}else{if(!(o=null==a?void 0:a(s)))throw new i(s);u=e._`${u}${o}${this.opts._n}`}l.set(s,r.Completed)}))}return u}}}(pn)),pn}function $n(){return dn||(dn=1,function(t){Object.defineProperty(t,"W",{value:!0}),t.or=t.and=t.not=t.CodeGen=t.operators=t.varKinds=t.ValueScopeName=t.ValueScope=t.Scope=t.Name=t.regexpCode=t.stringify=t.getProperty=t.nil=t.strConcat=t.str=t._=void 0;const e=ln(),i=mn();var r=ln();Object.defineProperty(t,"_",{enumerable:!0,get:function(){return r._}}),Object.defineProperty(t,"str",{enumerable:!0,get:function(){return r.str}}),Object.defineProperty(t,"strConcat",{enumerable:!0,get:function(){return r.strConcat}}),Object.defineProperty(t,"nil",{enumerable:!0,get:function(){return r.nil}}),Object.defineProperty(t,"getProperty",{enumerable:!0,get:function(){return r.getProperty}}),Object.defineProperty(t,"stringify",{enumerable:!0,get:function(){return r.stringify}}),Object.defineProperty(t,"regexpCode",{enumerable:!0,get:function(){return r.regexpCode}}),Object.defineProperty(t,"Name",{enumerable:!0,get:function(){return r.Name}});var s=mn();Object.defineProperty(t,"Scope",{enumerable:!0,get:function(){return s.Scope}}),Object.defineProperty(t,"ValueScope",{enumerable:!0,get:function(){return s.ValueScope}}),Object.defineProperty(t,"ValueScopeName",{enumerable:!0,get:function(){return s.ValueScopeName}}),Object.defineProperty(t,"varKinds",{enumerable:!0,get:function(){return s.varKinds}}),t.operators={GT:new e._Code(">"),GTE:new e._Code(">="),LT:new e._Code("<"),LTE:new e._Code("<="),EQ:new e._Code("==="),NEQ:new e._Code("!=="),NOT:new e._Code("!"),OR:new e._Code("||"),AND:new e._Code("&&"),ADD:new e._Code("+")};class n{optimizeNodes(){return this}optimizeNames(t,e){return this}}class o extends n{constructor(t,e,i){super(),this.varKind=t,this.name=e,this.rhs=i}render({es5:t,_n:e}){const r=t?i.varKinds.var:this.varKind,s=void 0===this.rhs?"":` = ${this.rhs}`;return`${r} ${this.name}${s};`+e}optimizeNames(t,e){if(t[this.name.str])return this.rhs&&(this.rhs=j(this.rhs,t,e)),this}get names(){return this.rhs instanceof e._CodeOrName?this.rhs.names:{}}}class a extends n{constructor(t,e,i){super(),this.lhs=t,this.rhs=e,this.sideEffects=i}render({_n:t}){return`${this.lhs} = ${this.rhs};`+t}optimizeNames(t,i){if(!(this.lhs instanceof e.Name)||t[this.lhs.str]||this.sideEffects)return this.rhs=j(this.rhs,t,i),this}get names(){return A(this.lhs instanceof e.Name?{}:{...this.lhs.names},this.rhs)}}class u extends a{constructor(t,e,i,r){super(t,i,r),this.op=e}render({_n:t}){return`${this.lhs} ${this.op}= ${this.rhs};`+t}}class c extends n{constructor(t){super(),this.label=t,this.names={}}render({_n:t}){return`${this.label}:`+t}}class h extends n{constructor(t){super(),this.label=t,this.names={}}render({_n:t}){return`break${this.label?` ${this.label}`:""};`+t}}class l extends n{constructor(t){super(),this.error=t}render({_n:t}){return`throw ${this.error};`+t}get names(){return this.error.names}}class f extends n{constructor(t){super(),this.code=t}render({_n:t}){return`${this.code};`+t}optimizeNodes(){return`${this.code}`?this:void 0}optimizeNames(t,e){return this.code=j(this.code,t,e),this}get names(){return this.code instanceof e._CodeOrName?this.code.names:{}}}class d extends n{constructor(t=[]){super(),this.nodes=t}render(t){return this.nodes.reduce(((e,i)=>e+i.render(t)),"")}optimizeNodes(){const{nodes:t}=this;let e=t.length;for(;e--;){const i=t[e].optimizeNodes();Array.isArray(i)?t.splice(e,1,...i):i?t[e]=i:t.splice(e,1)}return t.length>0?this:void 0}optimizeNames(t,e){const{nodes:i}=this;let r=i.length;for(;r--;){const s=i[r];s.optimizeNames(t,e)||(C(t,s.names),i.splice(r,1))}return i.length>0?this:void 0}get names(){return this.nodes.reduce(((t,e)=>_(t,e.names)),{})}}class p extends d{render(t){return"{"+t._n+super.render(t)+"}"+t._n}}class m extends d{}class $ extends p{}$.kind="else";class g extends p{constructor(t,e){super(e),this.condition=t}render(t){let e=`if(${this.condition})`+super.render(t);return this.else&&(e+="else "+this.else.render(t)),e}optimizeNodes(){super.optimizeNodes();const t=this.condition;if(!0===t)return this.nodes;let e=this.else;if(e){const t=e.optimizeNodes();e=this.else=Array.isArray(t)?new $(t):t}return e?!1===t?e instanceof g?e:e.nodes:this.nodes.length?this:new g(z(t),e instanceof g?[e]:e.nodes):!1!==t&&this.nodes.length?this:void 0}optimizeNames(t,e){var i;if(this.else=null===(i=this.else)||void 0===i?void 0:i.optimizeNames(t,e),super.optimizeNames(t,e)||this.else)return this.condition=j(this.condition,t,e),this}get names(){const t=super.names;return A(t,this.condition),this.else&&_(t,this.else.names),t}}g.kind="if";class b extends p{}b.kind="for";class y extends b{constructor(t){super(),this.iteration=t}render(t){return`for(${this.iteration})`+super.render(t)}optimizeNames(t,e){if(super.optimizeNames(t,e))return this.iteration=j(this.iteration,t,e),this}get names(){return _(super.names,this.iteration.names)}}class v extends b{constructor(t,e,i,r){super(),this.varKind=t,this.name=e,this.from=i,this.to=r}render(t){const e=t.es5?i.varKinds.var:this.varKind,{name:r,from:s,to:n}=this;return`for(${e} ${r}=${s}; ${r}<${n}; ${r}++)`+super.render(t)}get names(){const t=A(super.names,this.from);return A(t,this.to)}}class w extends b{constructor(t,e,i,r){super(),this.loop=t,this.varKind=e,this.name=i,this.iterable=r}render(t){return`for(${this.varKind} ${this.name} ${this.loop} ${this.iterable})`+super.render(t)}optimizeNames(t,e){if(super.optimizeNames(t,e))return this.iterable=j(this.iterable,t,e),this}get names(){return _(super.names,this.iterable.names)}}class k extends p{constructor(t,e,i){super(),this.name=t,this.args=e,this.async=i}render(t){return`${this.async?"async ":""}function ${this.name}(${this.args})`+super.render(t)}}k.kind="func";class E extends d{render(t){return"return "+super.render(t)}}E.kind="return";class D extends p{render(t){let e="try"+super.render(t);return this.catch&&(e+=this.catch.render(t)),this.finally&&(e+=this.finally.render(t)),e}optimizeNodes(){var t,e;return super.optimizeNodes(),null===(t=this.catch)||void 0===t||t.optimizeNodes(),null===(e=this.finally)||void 0===e||e.optimizeNodes(),this}optimizeNames(t,e){var i,r;return super.optimizeNames(t,e),null===(i=this.catch)||void 0===i||i.optimizeNames(t,e),null===(r=this.finally)||void 0===r||r.optimizeNames(t,e),this}get names(){const t=super.names;return this.catch&&_(t,this.catch.names),this.finally&&_(t,this.finally.names),t}}class x extends p{constructor(t){super(),this.error=t}render(t){return`catch(${this.error})`+super.render(t)}}x.kind="catch";class F extends p{render(t){return"finally"+super.render(t)}}F.kind="finally";function _(t,e){for(const i in e)t[i]=(t[i]||0)+(e[i]||0);return t}function A(t,i){return i instanceof e._CodeOrName?_(t,i.names):t}function j(t,i,r){return t instanceof e.Name?s(t):function(t){return t instanceof e._Code&&t._items.some((t=>t instanceof e.Name&&1===i[t.str]&&void 0!==r[t.str]))}(t)?new e._Code(t._items.reduce(((t,i)=>(i instanceof e.Name&&(i=s(i)),i instanceof e._Code?t.push(...i._items):t.push(i),t)),[])):t;function s(t){const e=r[t.str];return void 0===e||1!==i[t.str]?t:(delete i[t.str],e)}}function C(t,e){for(const i in e)t[i]=(t[i]||0)-(e[i]||0)}function z(t){return"boolean"==typeof t||"number"==typeof t||null===t?!t:e._`!${I(t)}`}t.CodeGen=class{constructor(t,e={}){this._values={},this._blockStarts=[],this._constants={},this.opts={...e,_n:e.lines?"\n":""},this._extScope=t,this._scope=new i.Scope({parent:t}),this._nodes=[new m]}toString(){return this._root.render(this.opts)}name(t){return this._scope.name(t)}scopeName(t){return this._extScope.name(t)}scopeValue(t,e){const i=this._extScope.value(t,e);return(this._values[i.prefix]||(this._values[i.prefix]=new Set)).add(i),i}getScopeValue(t,e){return this._extScope.getValue(t,e)}scopeRefs(t){return this._extScope.scopeRefs(t,this._values)}scopeCode(){return this._extScope.scopeCode(this._values)}_def(t,e,i,r){const s=this._scope.toName(e);return void 0!==i&&r&&(this._constants[s.str]=i),this._leafNode(new o(t,s,i)),s}const(t,e,r){return this._def(i.varKinds.const,t,e,r)}let(t,e,r){return this._def(i.varKinds.let,t,e,r)}var(t,e,r){return this._def(i.varKinds.var,t,e,r)}assign(t,e,i){return this._leafNode(new a(t,e,i))}add(e,i){return this._leafNode(new u(e,t.operators.ADD,i))}code(t){return"function"==typeof t?t():t!==e.nil&&this._leafNode(new f(t)),this}object(...t){const i=["{"];for(const[r,s]of t)i.length>1&&i.push(","),i.push(r),(r!==s||this.opts.es5)&&(i.push(":"),(0,e.addCodeArg)(i,s));return i.push("}"),new e._Code(i)}if(t,e,i){if(this._blockNode(new g(t)),e&&i)this.code(e).else().code(i).endIf();else if(e)this.code(e).endIf();else if(i)throw new Error('CodeGen: "else" body without "then" body');return this}elseIf(t){return this._elseNode(new g(t))}else(){return this._elseNode(new $)}endIf(){return this._endBlockNode(g,$)}_for(t,e){return this._blockNode(t),e&&this.code(e).endFor(),this}for(t,e){return this._for(new y(t),e)}forRange(t,e,r,s,n=(this.opts.es5?i.varKinds.var:i.varKinds.let)){const o=this._scope.toName(t);return this._for(new v(n,o,e,r),(()=>s(o)))}forOf(t,r,s,n=i.varKinds.const){const o=this._scope.toName(t);if(this.opts.es5){const t=r instanceof e.Name?r:this.var("_arr",r);return this.forRange("_i",0,e._`${t}.length`,(i=>{this.var(o,e._`${t}[${i}]`),s(o)}))}return this._for(new w("of",n,o,r),(()=>s(o)))}forIn(t,r,s,n=(this.opts.es5?i.varKinds.var:i.varKinds.const)){if(this.opts.ownProperties)return this.forOf(t,e._`Object.keys(${r})`,s);const o=this._scope.toName(t);return this._for(new w("in",n,o,r),(()=>s(o)))}endFor(){return this._endBlockNode(b)}label(t){return this._leafNode(new c(t))}break(t){return this._leafNode(new h(t))}return(t){const e=new E;if(this._blockNode(e),this.code(t),1!==e.nodes.length)throw new Error('CodeGen: "return" should have one node');return this._endBlockNode(E)}try(t,e,i){if(!e&&!i)throw new Error('CodeGen: "try" without "catch" and "finally"');const r=new D;if(this._blockNode(r),this.code(t),e){const t=this.name("e");this._currNode=r.catch=new x(t),e(t)}return i&&(this._currNode=r.finally=new F,this.code(i)),this._endBlockNode(x,F)}throw(t){return this._leafNode(new l(t))}block(t,e){return this._blockStarts.push(this._nodes.length),t&&this.code(t).endBlock(e),this}endBlock(t){const e=this._blockStarts.pop();if(void 0===e)throw new Error("CodeGen: not in self-balancing block");const i=this._nodes.length-e;if(i<0||void 0!==t&&i!==t)throw new Error(`CodeGen: wrong number of nodes: ${i} vs ${t} expected`);return this._nodes.length=e,this}func(t,i=e.nil,r,s){return this._blockNode(new k(t,i,r)),s&&this.code(s).endFunc(),this}endFunc(){return this._endBlockNode(k)}optimize(t=1){for(;t-- >0;)this._root.optimizeNodes(),this._root.optimizeNames(this._root.names,this._constants)}_leafNode(t){return this._currNode.nodes.push(t),this}_blockNode(t){this._currNode.nodes.push(t),this._nodes.push(t)}_endBlockNode(t,e){const i=this._currNode;if(i instanceof t||e&&i instanceof e)return this._nodes.pop(),this;throw new Error(`CodeGen: not in block "${e?`${t.kind}/${e.kind}`:t.kind}"`)}_elseNode(t){const e=this._currNode;if(!(e instanceof g))throw new Error('CodeGen: "else" without "if"');return this._currNode=e.else=t,this}get _root(){return this._nodes[0]}get _currNode(){const t=this._nodes;return t[t.length-1]}set _currNode(t){const e=this._nodes;e[e.length-1]=t}},t.not=z;const S=q(t.operators.AND);t.and=function(...t){return t.reduce(S)};const O=q(t.operators.OR);function q(t){return(i,r)=>i===e.nil?r:r===e.nil?i:e._`${I(i)} ${t} ${I(r)}`}function I(t){return t instanceof e.Name?t:e._`(${t})`}t.or=function(...t){return t.reduce(O)}}(cn)),cn}var gn,bn={};function yn(){if(gn)return bn;gn=1,Object.defineProperty(bn,"W",{value:!0}),bn.checkStrictMode=bn.getErrorPath=bn.Type=bn.useFunc=bn.setEvaluated=bn.evaluatedPropsToName=bn.mergeEvaluated=bn.eachItem=bn.unescapeJsonPointer=bn.escapeJsonPointer=bn.escapeFragment=bn.unescapeFragment=bn.schemaRefOrVal=bn.schemaHasRulesButRef=bn.schemaHasRules=bn.checkUnknownRules=bn.alwaysValidSchema=bn.toHash=void 0;const t=$n(),e=ln();function i(t,e=t.schema){const{opts:i,self:r}=t;if(!i.strictSchema)return;if("boolean"==typeof e)return;const s=r.RULES.keywords;for(const i in e)s[i]||l(t,`unknown keyword: "${i}"`)}function r(t,e){if("boolean"==typeof t)return!t;for(const i in t)if(e[i])return!0;return!1}function s(t){return"number"==typeof t?`${t}`:t.replace(/~/g,"~0").replace(/\//g,"~1")}function n(t){return t.replace(/~1/g,"/").replace(/~0/g,"~")}function o({mergeNames:e,mergeToName:i,mergeValues:r,resultToName:s}){return(n,o,a,u)=>{const c=void 0===a?o:a instanceof t.Name?(o instanceof t.Name?e(n,o,a):i(n,o,a),a):o instanceof t.Name?(i(n,a,o),o):r(o,a);return u!==t.Name||c instanceof t.Name?c:s(n,c)}}function a(e,i){if(!0===i)return e.var("props",!0);const r=e.var("props",t._`{}`);return void 0!==i&&u(e,r,i),r}function u(e,i,r){Object.keys(r).forEach((r=>e.assign(t._`${i}${(0,t.getProperty)(r)}`,!0)))}bn.toHash=function(t){const e={};for(const i of t)e[i]=!0;return e},bn.alwaysValidSchema=function(t,e){return"boolean"==typeof e?e:0===Object.keys(e).length||(i(t,e),!r(e,t.self.RULES.all))},bn.checkUnknownRules=i,bn.schemaHasRules=r,bn.schemaHasRulesButRef=function(t,e){if("boolean"==typeof t)return!t;for(const i in t)if("$ref"!==i&&e.all[i])return!0;return!1},bn.schemaRefOrVal=function({topSchemaRef:e,schemaPath:i},r,s,n){if(!n){if("number"==typeof r||"boolean"==typeof r)return r;if("string"==typeof r)return t._`${r}`}return t._`${e}${i}${(0,t.getProperty)(s)}`},bn.unescapeFragment=function(t){return n(decodeURIComponent(t))},bn.escapeFragment=function(t){return encodeURIComponent(s(t))},bn.escapeJsonPointer=s,bn.unescapeJsonPointer=n,bn.eachItem=function(t,e){if(Array.isArray(t))for(const i of t)e(i);else e(t)},bn.mergeEvaluated={props:o({mergeNames:(e,i,r)=>e.if(t._`${r} !== true && ${i} !== undefined`,(()=>{e.if(t._`${i} === true`,(()=>e.assign(r,!0)),(()=>e.assign(r,t._`${r} || {}`).code(t._`Object.assign(${r}, ${i})`)))})),mergeToName:(e,i,r)=>e.if(t._`${r} !== true`,(()=>{!0===i?e.assign(r,!0):(e.assign(r,t._`${r} || {}`),u(e,r,i))})),mergeValues:(t,e)=>!0===t||{...t,...e},resultToName:a}),items:o({mergeNames:(e,i,r)=>e.if(t._`${r} !== true && ${i} !== undefined`,(()=>e.assign(r,t._`${i} === true ? true : ${r} > ${i} ? ${r} : ${i}`))),mergeToName:(e,i,r)=>e.if(t._`${r} !== true`,(()=>e.assign(r,!0===i||t._`${r} > ${i} ? ${r} : ${i}`))),mergeValues:(t,e)=>!0===t||Math.max(t,e),resultToName:(t,e)=>t.var("items",e)})},bn.evaluatedPropsToName=a,bn.setEvaluated=u;const c={};var h;function l(t,e,i=t.opts.strictSchema){if(i){if(e=`strict mode: ${e}`,!0===i)throw new Error(e);t.self.logger.warn(e)}}return bn.useFunc=function(t,i){return t.scopeValue("func",{ref:i,code:c[i.code]||(c[i.code]=new e._Code(i.code))})},function(t){t[t.Num=0]="Num",t[t.Str=1]="Str"}(h||(bn.Type=h={})),bn.getErrorPath=function(e,i,r){if(e instanceof t.Name){const s=i===h.Num;return r?s?t._`"[" + ${e} + "]"`:t._`"['" + ${e} + "']"`:s?t._`"/" + ${e}`:t._`"/" + ${e}.replace(/~/g, "~0").replace(/\\//g, "~1")`}return r?(0,t.getProperty)(e).toString():"/"+s(e)},bn.checkStrictMode=l,bn}var vn,wn,kn,En={};function Dn(){if(vn)return En;vn=1,Object.defineProperty(En,"W",{value:!0});const t=$n(),e={data:new t.Name("data"),valCxt:new t.Name("valCxt"),instancePath:new t.Name("instancePath"),parentData:new t.Name("parentData"),parentDataProperty:new t.Name("parentDataProperty"),rootData:new t.Name("rootData"),dynamicAnchors:new t.Name("dynamicAnchors"),vErrors:new t.Name("vErrors"),errors:new t.Name("errors"),this:new t.Name("this"),self:new t.Name("self"),scope:new t.Name("scope"),json:new t.Name("json"),jsonPos:new t.Name("jsonPos"),jsonLen:new t.Name("jsonLen"),jsonPart:new t.Name("jsonPart")};return En.default=e,En}function xn(){return wn||(wn=1,function(t){Object.defineProperty(t,"W",{value:!0}),t.extendErrors=t.resetErrorsCount=t.reportExtraError=t.reportError=t.keyword$DataError=t.keywordError=void 0;const e=$n(),i=yn(),r=Dn();function s(t,i){const s=t.const("err",i);t.if(e._`${r.default.vErrors} === null`,(()=>t.assign(r.default.vErrors,e._`[${s}]`)),e._`${r.default.vErrors}.push(${s})`),t.code(e._`${r.default.errors}++`)}function n(t,i){const{gen:r,validateName:s,schemaEnv:n}=t;n.$async?r.throw(e._`new ${t.ValidationError}(${i})`):(r.assign(e._`${s}.errors`,i),r.return(!1))}t.keywordError={message:({keyword:t})=>e.str`must pass "${t}" keyword validation`},t.keyword$DataError={message:({keyword:t,schemaType:i})=>i?e.str`"${t}" keyword must be ${i} ($data)`:e.str`"${t}" keyword is invalid ($data)`},t.reportError=function(i,r=t.keywordError,o,u){const{it:c}=i,{gen:h,compositeRule:l,allErrors:f}=c,d=a(i,r,o);(null!=u?u:l||f)?s(h,d):n(c,e._`[${d}]`)},t.reportExtraError=function(e,i=t.keywordError,o){const{it:u}=e,{gen:c,compositeRule:h,allErrors:l}=u;s(c,a(e,i,o)),h||l||n(u,r.default.vErrors)},t.resetErrorsCount=function(t,i){t.assign(r.default.errors,i),t.if(e._`${r.default.vErrors} !== null`,(()=>t.if(i,(()=>t.assign(e._`${r.default.vErrors}.length`,i)),(()=>t.assign(r.default.vErrors,null)))))},t.extendErrors=function({gen:t,keyword:i,schemaValue:s,data:n,errsCount:o,it:a}){if(void 0===o)throw new Error("ajv implementation error");const u=t.name("err");t.forRange("i",o,r.default.errors,(o=>{t.const(u,e._`${r.default.vErrors}[${o}]`),t.if(e._`${u}.instancePath === undefined`,(()=>t.assign(e._`${u}.instancePath`,(0,e.strConcat)(r.default.instancePath,a.errorPath)))),t.assign(e._`${u}.schemaPath`,e.str`${a.errSchemaPath}/${i}`),a.opts.verbose&&(t.assign(e._`${u}.schema`,s),t.assign(e._`${u}.data`,n))}))};const o={keyword:new e.Name("keyword"),schemaPath:new e.Name("schemaPath"),params:new e.Name("params"),propertyName:new e.Name("propertyName"),message:new e.Name("message"),schema:new e.Name("schema"),parentSchema:new e.Name("parentSchema")};function a(t,i,s){const{createErrors:n}=t.it;return!1===n?e._`{}`:function(t,i,s={}){const{gen:n,it:a}=t,h=[u(a,s),c(t,s)];return function(t,{params:i,message:s},n){const{keyword:a,data:u,schemaValue:c,it:h}=t,{opts:l,propertyName:f,topSchemaRef:d,schemaPath:p}=h;n.push([o.keyword,a],[o.params,"function"==typeof i?i(t):i||e._`{}`]),l.messages&&n.push([o.message,"function"==typeof s?s(t):s]);l.verbose&&n.push([o.schema,c],[o.parentSchema,e._`${d}${p}`],[r.default.data,u]);f&&n.push([o.propertyName,f])}(t,i,h),n.object(...h)}(t,i,s)}function u({errorPath:t},{instancePath:s}){const n=s?e.str`${t}${(0,i.getErrorPath)(s,i.Type.Str)}`:t;return[r.default.instancePath,(0,e.strConcat)(r.default.instancePath,n)]}function c({keyword:t,it:{errSchemaPath:r}},{schemaPath:s,parentSchema:n}){let a=n?r:e.str`${r}/${t}`;return s&&(a=e.str`${a}${(0,i.getErrorPath)(s,i.Type.Str)}`),[o.schemaPath,a]}}(un)),un}var Fn,_n={},An={};function jn(){if(Fn)return An;Fn=1,Object.defineProperty(An,"W",{value:!0}),An.getRules=An.isJSONType=void 0;const t=new Set(["string","number","integer","boolean","null","object","array"]);return An.isJSONType=function(e){return"string"==typeof e&&t.has(e)},An.getRules=function(){const t={number:{type:"number",rules:[]},string:{type:"string",rules:[]},array:{type:"array",rules:[]},object:{type:"object",rules:[]}};return{types:{...t,integer:!0,boolean:!0,null:!0},rules:[{rules:[]},t.number,t.string,t.array,t.object],post:{rules:[]},all:{},keywords:{}}},An}var Cn,zn,Sn={};function On(){if(Cn)return Sn;function t(t,i){return i.rules.some((i=>e(t,i)))}function e(t,e){var i;return void 0!==t[e.keyword]||(null===(i=e.definition.implements)||void 0===i?void 0:i.some((e=>void 0!==t[e])))}return Cn=1,Object.defineProperty(Sn,"W",{value:!0}),Sn.shouldUseRule=Sn.shouldUseGroup=Sn.schemaHasRulesForType=void 0,Sn.schemaHasRulesForType=function({schema:e,self:i},r){const s=i.RULES.types[r];return s&&!0!==s&&t(e,s)},Sn.shouldUseGroup=t,Sn.shouldUseRule=e,Sn}function qn(){if(zn)return _n;zn=1,Object.defineProperty(_n,"W",{value:!0}),_n.reportTypeError=_n.checkDataTypes=_n.checkDataType=_n.coerceAndCheckDataType=_n.getJSONTypes=_n.getSchemaTypes=_n.DataType=void 0;const t=jn(),e=On(),i=xn(),r=$n(),s=yn();var n;function o(e){const i=Array.isArray(e)?e:e?[e]:[];if(i.every(t.isJSONType))return i;throw new Error("type must be JSONType or JSONType[]: "+i.join(","))}!function(t){t[t.Correct=0]="Correct",t[t.Wrong=1]="Wrong"}(n||(_n.DataType=n={})),_n.getSchemaTypes=function(t){const e=o(t.type);if(e.includes("null")){if(!1===t.nullable)throw new Error("type: null contradicts nullable: false")}else{if(!e.length&&void 0!==t.nullable)throw new Error('"nullable" cannot be used without "type"');!0===t.nullable&&e.push("null")}return e},_n.getJSONTypes=o,_n.coerceAndCheckDataType=function(t,i){const{gen:s,data:o,opts:u}=t,h=function(t,e){return e?t.filter((t=>a.has(t)||"array"===e&&"array"===t)):[]}(i,u.coerceTypes),f=i.length>0&&!(0===h.length&&1===i.length&&(0,e.schemaHasRulesForType)(t,i[0]));if(f){const e=c(i,o,u.strictNumbers,n.Wrong);s.if(e,(()=>{h.length?function(t,e,i){const{gen:s,data:n,opts:o}=t,u=s.let("dataType",r._`typeof ${n}`),h=s.let("coerced",r._`undefined`);"array"===o.coerceTypes&&s.if(r._`${u} == 'object' && Array.isArray(${n}) && ${n}.length == 1`,(()=>s.assign(n,r._`${n}[0]`).assign(u,r._`typeof ${n}`).if(c(e,n,o.strictNumbers),(()=>s.assign(h,n)))));s.if(r._`${h} !== undefined`);for(const t of i)(a.has(t)||"array"===t&&"array"===o.coerceTypes)&&f(t);function f(t){switch(t){case"string":return void s.elseIf(r._`${u} == "number" || ${u} == "boolean"`).assign(h,r._`"" + ${n}`).elseIf(r._`${n} === null`).assign(h,r._`""`);case"number":return void s.elseIf(r._`${u} == "boolean" || ${n} === null
              || (${u} == "string" && ${n} && ${n} == +${n})`).assign(h,r._`+${n}`);case"integer":return void s.elseIf(r._`${u} === "boolean" || ${n} === null
              || (${u} === "string" && ${n} && ${n} == +${n} && !(${n} % 1))`).assign(h,r._`+${n}`);case"boolean":return void s.elseIf(r._`${n} === "false" || ${n} === 0 || ${n} === null`).assign(h,!1).elseIf(r._`${n} === "true" || ${n} === 1`).assign(h,!0);case"null":return s.elseIf(r._`${n} === "" || ${n} === 0 || ${n} === false`),void s.assign(h,null);case"array":s.elseIf(r._`${u} === "string" || ${u} === "number"
              || ${u} === "boolean" || ${n} === null`).assign(h,r._`[${n}]`)}}s.else(),l(t),s.endIf(),s.if(r._`${h} !== undefined`,(()=>{s.assign(n,h),function({gen:t,parentData:e,parentDataProperty:i},s){t.if(r._`${e} !== undefined`,(()=>t.assign(r._`${e}[${i}]`,s)))}(t,h)}))}(t,i,h):l(t)}))}return f};const a=new Set(["string","number","integer","boolean","null"]);function u(t,e,i,s=n.Correct){const o=s===n.Correct?r.operators.EQ:r.operators.NEQ;let a;switch(t){case"null":return r._`${e} ${o} null`;case"array":a=r._`Array.isArray(${e})`;break;case"object":a=r._`${e} && typeof ${e} == "object" && !Array.isArray(${e})`;break;case"integer":a=u(r._`!(${e} % 1) && !isNaN(${e})`);break;case"number":a=u();break;default:return r._`typeof ${e} ${o} ${t}`}return s===n.Correct?a:(0,r.not)(a);function u(t=r.nil){return(0,r.and)(r._`typeof ${e} == "number"`,t,i?r._`isFinite(${e})`:r.nil)}}function c(t,e,i,n){if(1===t.length)return u(t[0],e,i,n);let o;const a=(0,s.toHash)(t);if(a.array&&a.object){const t=r._`typeof ${e} != "object"`;o=a.null?t:r._`!${e} || ${t}`,delete a.null,delete a.array,delete a.object}else o=r.nil;a.number&&delete a.integer;for(const t in a)o=(0,r.and)(o,u(t,e,i,n));return o}_n.checkDataType=u,_n.checkDataTypes=c;const h={message:({schema:t})=>`must be ${t}`,params:({schema:t,schemaValue:e})=>"string"==typeof t?r._`{type: ${t}}`:r._`{type: ${e}}`};function l(t){const e=function(t){const{gen:e,data:i,schema:r}=t,n=(0,s.schemaRefOrVal)(t,r,"type");return{gen:e,keyword:"type",data:i,schema:r.type,schemaCode:n,schemaValue:n,parentSchema:r,params:{},it:t}}(t);(0,i.reportError)(e,h)}return _n.reportTypeError=l,_n}var In,Pn={};var Tn,Nn,Mn={},Rn={};function Bn(){if(Tn)return Rn;Tn=1,Object.defineProperty(Rn,"W",{value:!0}),Rn.validateUnion=Rn.validateArray=Rn.usePattern=Rn.callValidateCode=Rn.schemaProperties=Rn.allSchemaProperties=Rn.noPropertyInData=Rn.propertyInData=Rn.isOwnProperty=Rn.hasPropFunc=Rn.reportMissingProp=Rn.checkMissingProp=Rn.checkReportMissingProp=void 0;const t=$n(),e=yn(),i=Dn(),r=yn();function s(e){return e.scopeValue("func",{ref:Object.prototype.hasOwnProperty,code:t._`Object.prototype.hasOwnProperty`})}function n(e,i,r){return t._`${s(e)}.call(${i}, ${r})`}function o(e,i,r,s){const o=t._`${i}${(0,t.getProperty)(r)} === undefined`;return s?(0,t.or)(o,(0,t.not)(n(e,i,r))):o}function a(t){return t?Object.keys(t).filter((t=>"__proto__"!==t)):[]}Rn.checkReportMissingProp=function(e,i){const{gen:r,data:s,it:n}=e;r.if(o(r,s,i,n.opts.ownProperties),(()=>{e.setParams({missingProperty:t._`${i}`},!0),e.error()}))},Rn.checkMissingProp=function({gen:e,data:i,it:{opts:r}},s,n){return(0,t.or)(...s.map((s=>(0,t.and)(o(e,i,s,r.ownProperties),t._`${n} = ${s}`))))},Rn.reportMissingProp=function(t,e){t.setParams({missingProperty:e},!0),t.error()},Rn.hasPropFunc=s,Rn.isOwnProperty=n,Rn.propertyInData=function(e,i,r,s){const o=t._`${i}${(0,t.getProperty)(r)} !== undefined`;return s?t._`${o} && ${n(e,i,r)}`:o},Rn.noPropertyInData=o,Rn.allSchemaProperties=a,Rn.schemaProperties=function(t,i){return a(i).filter((r=>!(0,e.alwaysValidSchema)(t,i[r])))},Rn.callValidateCode=function({schemaCode:e,data:r,it:{gen:s,topSchemaRef:n,schemaPath:o,errorPath:a},it:u},c,h,l){const f=l?t._`${e}, ${r}, ${n}${o}`:r,d=[[i.default.instancePath,(0,t.strConcat)(i.default.instancePath,a)],[i.default.parentData,u.parentData],[i.default.parentDataProperty,u.parentDataProperty],[i.default.rootData,i.default.rootData]];u.opts.dynamicRef&&d.push([i.default.dynamicAnchors,i.default.dynamicAnchors]);const p=t._`${f}, ${s.object(...d)}`;return h!==t.nil?t._`${c}.call(${h}, ${p})`:t._`${c}(${p})`};const u=t._`new RegExp`;return Rn.usePattern=function({gen:e,it:{opts:i}},s){const n=i.unicodeRegExp?"u":"",{regExp:o}=i.code,a=o(s,n);return e.scopeValue("pattern",{key:a.toString(),ref:a,code:t._`${"new RegExp"===o.code?u:(0,r.useFunc)(e,o)}(${s}, ${n})`})},Rn.validateArray=function(i){const{gen:r,data:s,keyword:n,it:o}=i,a=r.name("valid");if(o.allErrors){const t=r.let("valid",!0);return u((()=>r.assign(t,!1))),t}return r.var(a,!0),u((()=>r.break())),a;function u(o){const u=r.const("len",t._`${s}.length`);r.forRange("i",0,u,(s=>{i.subschema({keyword:n,dataProp:s,dataPropType:e.Type.Num},a),r.if((0,t.not)(a),o)}))}},Rn.validateUnion=function(i){const{gen:r,schema:s,keyword:n,it:o}=i;if(!Array.isArray(s))throw new Error("ajv implementation error");if(s.some((t=>(0,e.alwaysValidSchema)(o,t)))&&!o.opts.unevaluated)return;const a=r.let("valid",!1),u=r.name("_valid");r.block((()=>s.forEach(((e,s)=>{const o=i.subschema({keyword:n,schemaProp:s,compositeRule:!0},u);r.assign(a,t._`${a} || ${u}`);i.mergeValidEvaluated(o,u)||r.if((0,t.not)(a))})))),i.result(a,(()=>i.reset()),(()=>i.error(!0)))},Rn}function Ln(){if(Nn)return Mn;Nn=1,Object.defineProperty(Mn,"W",{value:!0}),Mn.validateKeywordUsage=Mn.validSchemaType=Mn.funcKeywordCode=Mn.macroKeywordCode=void 0;const t=$n(),e=Dn(),i=Bn(),r=xn();function s(e){const{gen:i,data:r,it:s}=e;i.if(s.parentData,(()=>i.assign(r,t._`${s.parentData}[${s.parentDataProperty}]`)))}function n(e,i,r){if(void 0===r)throw new Error(`keyword "${i}" failed to compile`);return e.scopeValue("keyword","function"==typeof r?{ref:r}:{ref:r,code:(0,t.stringify)(r)})}return Mn.macroKeywordCode=function(e,i){const{gen:r,keyword:s,schema:o,parentSchema:a,it:u}=e,c=i.macro.call(u.self,o,a,u),h=n(r,s,c);!1!==u.opts.validateSchema&&u.self.validateSchema(c,!0);const l=r.name("valid");e.subschema({schema:c,schemaPath:t.nil,errSchemaPath:`${u.errSchemaPath}/${s}`,topSchemaRef:h,compositeRule:!0},l),e.pass(l,(()=>e.error(!0)))},Mn.funcKeywordCode=function(o,a){var u;const{gen:c,keyword:h,schema:l,parentSchema:f,$data:d,it:p}=o;!function({schemaEnv:t},e){if(e.async&&!t.$async)throw new Error("async keyword in sync schema")}(p,a);const m=!d&&a.compile?a.compile.call(p.self,l,f,p):a.validate,$=n(c,h,m),g=c.let("valid");function b(r=(a.async?t._`await `:t.nil)){const s=p.opts.passContext?e.default.this:e.default.self,n=!("compile"in a&&!d||!1===a.schema);c.assign(g,t._`${r}${(0,i.callValidateCode)(o,$,s,n)}`,a.modifying)}function y(e){var i;c.if((0,t.not)(null!==(i=a.valid)&&void 0!==i?i:g),e)}o.block$data(g,(function(){if(!1===a.errors)b(),a.modifying&&s(o),y((()=>o.error()));else{const i=a.async?function(){const e=c.let("ruleErrs",null);return c.try((()=>b(t._`await `)),(i=>c.assign(g,!1).if(t._`${i} instanceof ${p.ValidationError}`,(()=>c.assign(e,t._`${i}.errors`)),(()=>c.throw(i))))),e}():function(){const e=t._`${$}.errors`;return c.assign(e,null),b(t.nil),e}();a.modifying&&s(o),y((()=>function(i,s){const{gen:n}=i;n.if(t._`Array.isArray(${s})`,(()=>{n.assign(e.default.vErrors,t._`${e.default.vErrors} === null ? ${s} : ${e.default.vErrors}.concat(${s})`).assign(e.default.errors,t._`${e.default.vErrors}.length`),(0,r.extendErrors)(i)}),(()=>i.error()))}(o,i)))}})),o.ok(null!==(u=a.valid)&&void 0!==u?u:g)},Mn.validSchemaType=function(t,e,i=!1){return!e.length||e.some((e=>"array"===e?Array.isArray(t):"object"===e?t&&"object"==typeof t&&!Array.isArray(t):typeof t==e||i&&void 0===t))},Mn.validateKeywordUsage=function({schema:t,opts:e,self:i,errSchemaPath:r},s,n){if(Array.isArray(s.keyword)?!s.keyword.includes(n):s.keyword!==n)throw new Error("ajv implementation error");const o=s.dependencies;if(null==o?void 0:o.some((e=>!Object.prototype.hasOwnProperty.call(t,e))))throw new Error(`parent schema must have dependencies of ${n}: ${o.join(",")}`);if(s.validateSchema){if(!s.validateSchema(t[n])){const t=`keyword "${n}" value is invalid at path "${r}": `+i.errorsText(s.validateSchema.errors);if("log"!==e.validateSchema)throw new Error(t);i.logger.error(t)}}},Mn}var Un,Vn={};var Hn,Zn,Gn={};function Jn(){return Zn||(Zn=1,Hn=function t(e,i){if(e===i)return!0;if(e&&i&&"object"==typeof e&&"object"==typeof i){if(e.constructor!==i.constructor)return!1;var r,s,n;if(Array.isArray(e)){if((r=e.length)!=i.length)return!1;for(s=r;0!=s--;)if(!t(e[s],i[s]))return!1;return!0}if(e.constructor===RegExp)return e.source===i.source&&e.flags===i.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===i.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===i.toString();if((r=(n=Object.keys(e)).length)!==Object.keys(i).length)return!1;for(s=r;0!=s--;)if(!Object.prototype.hasOwnProperty.call(i,n[s]))return!1;for(s=r;0!=s--;){var o=n[s];if(!t(e[o],i[o]))return!1}return!0}return e!=e&&i!=i}),Hn}var Kn,Wn,Qn,Yn={exports:{}};function Xn(){if(Kn)return Yn.exports;Kn=1;var t=Yn.exports=function(t,i,r){"function"==typeof i&&(r=i,i={}),e(i,"function"==typeof(r=i.cb||r)?r:r.pre||function(){},r.post||function(){},t,"",t)};function e(i,r,s,n,o,a,u,c,h,l){if(n&&"object"==typeof n&&!Array.isArray(n)){for(var f in r(n,o,a,u,c,h,l),n){var d=n[f];if(Array.isArray(d)){if(f in t.arrayKeywords)for(var p=0;p<d.length;p++)e(i,r,s,d[p],o+"/"+f+"/"+p,a,o,f,n,p)}else if(f in t.propsKeywords){if(d&&"object"==typeof d)for(var m in d)e(i,r,s,d[m],o+"/"+f+"/"+m.replace(/~/g,"~0").replace(/\//g,"~1"),a,o,f,n,m)}else(f in t.keywords||i.allKeys&&!(f in t.skipKeywords))&&e(i,r,s,d,o+"/"+f,a,o,f,n)}s(n,o,a,u,c,h,l)}}return t.keywords={additionalItems:!0,items:!0,contains:!0,additionalProperties:!0,propertyNames:!0,not:!0,if:!0,then:!0,else:!0},t.arrayKeywords={items:!0,allOf:!0,anyOf:!0,oneOf:!0},t.propsKeywords={$defs:!0,definitions:!0,properties:!0,patternProperties:!0,dependencies:!0},t.skipKeywords={default:!0,enum:!0,const:!0,required:!0,maximum:!0,minimum:!0,exclusiveMaximum:!0,exclusiveMinimum:!0,multipleOf:!0,maxLength:!0,minLength:!0,pattern:!0,format:!0,maxItems:!0,minItems:!0,uniqueItems:!0,maxProperties:!0,minProperties:!0},Yn.exports}function to(){if(Wn)return Gn;Wn=1,Object.defineProperty(Gn,"W",{value:!0}),Gn.getSchemaRefs=Gn.resolveUrl=Gn.normalizeId=Gn._getFullPath=Gn.getFullPath=Gn.inlineRef=void 0;const t=yn(),e=Jn(),i=Xn(),r=new Set(["type","format","pattern","maxLength","minLength","maxProperties","minProperties","maxItems","minItems","maximum","minimum","uniqueItems","multipleOf","required","enum","const"]);Gn.inlineRef=function(t,e=!0){return"boolean"==typeof t||(!0===e?!n(t):!!e&&o(t)<=e)};const s=new Set(["$ref","$recursiveRef","$recursiveAnchor","$dynamicRef","$dynamicAnchor"]);function n(t){for(const e in t){if(s.has(e))return!0;const i=t[e];if(Array.isArray(i)&&i.some(n))return!0;if("object"==typeof i&&n(i))return!0}return!1}function o(e){let i=0;for(const s in e){if("$ref"===s)return 1/0;if(i++,!r.has(s)&&("object"==typeof e[s]&&(0,t.eachItem)(e[s],(t=>i+=o(t))),i===1/0))return 1/0}return i}function a(t,e="",i){!1!==i&&(e=h(e));const r=t.parse(e);return u(t,r)}function u(t,e){return t.serialize(e).split("#")[0]+"#"}Gn.getFullPath=a,Gn._getFullPath=u;const c=/#\/?$/;function h(t){return t?t.replace(c,""):""}Gn.normalizeId=h,Gn.resolveUrl=function(t,e,i){return i=h(i),t.resolve(e,i)};const l=/^[a-z_][-a-z0-9._]*$/i;return Gn.getSchemaRefs=function(t,r){if("boolean"==typeof t)return{};const{schemaId:s,uriResolver:n}=this.opts,o=h(t[s]||r),u={"":o},c=a(n,o,!1),f={},d=new Set;return i(t,{allKeys:!0},((t,e,i,r)=>{if(void 0===r)return;const n=c+e;let o=u[r];function a(e){const i=this.opts.uriResolver.resolve;if(e=h(o?i(o,e):e),d.has(e))throw m(e);d.add(e);let r=this.refs[e];return"string"==typeof r&&(r=this.refs[r]),"object"==typeof r?p(t,r.schema,e):e!==h(n)&&("#"===e[0]?(p(t,f[e],e),f[e]=t):this.refs[e]=n),e}function $(t){if("string"==typeof t){if(!l.test(t))throw new Error(`invalid anchor "${t}"`);a.call(this,`#${t}`)}}"string"==typeof t[s]&&(o=a.call(this,t[s])),$.call(this,t.$anchor),$.call(this,t.$dynamicAnchor),u[e]=o})),f;function p(t,i,r){if(void 0!==i&&!e(t,i))throw m(r)}function m(t){return new Error(`reference "${t}" resolves to more than one schema`)}},Gn}function eo(){if(Qn)return on;Qn=1,Object.defineProperty(on,"W",{value:!0}),on.getData=on.KeywordCxt=on.validateFunctionCode=void 0;const t=function(){if(kn)return an;kn=1,Object.defineProperty(an,"W",{value:!0}),an.boolOrEmptySchema=an.topBoolOrEmptySchema=void 0;const t=xn(),e=$n(),i=Dn(),r={message:"boolean schema is false"};function s(e,i){const{gen:s,data:n}=e,o={gen:s,keyword:"false schema",data:n,schema:!1,schemaCode:!1,schemaValue:!1,params:{},it:e};(0,t.reportError)(o,r,void 0,i)}return an.topBoolOrEmptySchema=function(t){const{gen:r,schema:n,validateName:o}=t;!1===n?s(t,!1):"object"==typeof n&&!0===n.$async?r.return(i.default.data):(r.assign(e._`${o}.errors`,null),r.return(!0))},an.boolOrEmptySchema=function(t,e){const{gen:i,schema:r}=t;!1===r?(i.var(e,!1),s(t)):i.var(e,!0)},an}(),e=qn(),i=On(),r=qn(),s=function(){if(In)return Pn;In=1,Object.defineProperty(Pn,"W",{value:!0}),Pn.assignDefaults=void 0;const t=$n(),e=yn();function i(i,r,s){const{gen:n,compositeRule:o,data:a,opts:u}=i;if(void 0===s)return;const c=t._`${a}${(0,t.getProperty)(r)}`;if(o)return void(0,e.checkStrictMode)(i,`default is ignored for: ${c}`);let h=t._`${c} === undefined`;"empty"===u.useDefaults&&(h=t._`${h} || ${c} === null || ${c} === ""`),n.if(h,t._`${c} = ${(0,t.stringify)(s)}`)}return Pn.assignDefaults=function(t,e){const{properties:r,items:s}=t.schema;if("object"===e&&r)for(const e in r)i(t,e,r[e].default);else"array"===e&&Array.isArray(s)&&s.forEach(((e,r)=>i(t,r,e.default)))},Pn}(),n=Ln(),o=function(){if(Un)return Vn;Un=1,Object.defineProperty(Vn,"W",{value:!0}),Vn.extendSubschemaMode=Vn.extendSubschemaData=Vn.getSubschema=void 0;const t=$n(),e=yn();return Vn.getSubschema=function(i,{keyword:r,schemaProp:s,schema:n,schemaPath:o,errSchemaPath:a,topSchemaRef:u}){if(void 0!==r&&void 0!==n)throw new Error('both "keyword" and "schema" passed, only one allowed');if(void 0!==r){const n=i.schema[r];return void 0===s?{schema:n,schemaPath:t._`${i.schemaPath}${(0,t.getProperty)(r)}`,errSchemaPath:`${i.errSchemaPath}/${r}`}:{schema:n[s],schemaPath:t._`${i.schemaPath}${(0,t.getProperty)(r)}${(0,t.getProperty)(s)}`,errSchemaPath:`${i.errSchemaPath}/${r}/${(0,e.escapeFragment)(s)}`}}if(void 0!==n){if(void 0===o||void 0===a||void 0===u)throw new Error('"schemaPath", "errSchemaPath" and "topSchemaRef" are required with "schema"');return{schema:n,schemaPath:o,topSchemaRef:u,errSchemaPath:a}}throw new Error('either "keyword" or "schema" must be passed')},Vn.extendSubschemaData=function(i,r,{dataProp:s,dataPropType:n,data:o,dataTypes:a,propertyName:u}){if(void 0!==o&&void 0!==s)throw new Error('both "data" and "dataProp" passed, only one allowed');const{gen:c}=r;if(void 0!==s){const{errorPath:o,dataPathArr:a,opts:u}=r;h(c.let("data",t._`${r.data}${(0,t.getProperty)(s)}`,!0)),i.errorPath=t.str`${o}${(0,e.getErrorPath)(s,n,u.jsPropertySyntax)}`,i.parentDataProperty=t._`${s}`,i.dataPathArr=[...a,i.parentDataProperty]}function h(t){i.data=t,i.dataLevel=r.dataLevel+1,i.dataTypes=[],r.definedProperties=new Set,i.parentData=r.data,i.dataNames=[...r.dataNames,t]}void 0!==o&&(h(o instanceof t.Name?o:c.let("data",o,!0)),void 0!==u&&(i.propertyName=u)),a&&(i.dataTypes=a)},Vn.extendSubschemaMode=function(t,{jtdDiscriminator:e,jtdMetadata:i,compositeRule:r,createErrors:s,allErrors:n}){void 0!==r&&(t.compositeRule=r),void 0!==s&&(t.createErrors=s),void 0!==n&&(t.allErrors=n),t.jtdDiscriminator=e,t.jtdMetadata=i},Vn}(),a=$n(),u=Dn(),c=to(),h=yn(),l=xn();function f({gen:t,validateName:e,schema:i,schemaEnv:r,opts:s},n){s.code.es5?t.func(e,a._`${u.default.data}, ${u.default.valCxt}`,r.$async,(()=>{t.code(a._`"use strict"; ${d(i,s)}`),function(t,e){t.if(u.default.valCxt,(()=>{t.var(u.default.instancePath,a._`${u.default.valCxt}.${u.default.instancePath}`),t.var(u.default.parentData,a._`${u.default.valCxt}.${u.default.parentData}`),t.var(u.default.parentDataProperty,a._`${u.default.valCxt}.${u.default.parentDataProperty}`),t.var(u.default.rootData,a._`${u.default.valCxt}.${u.default.rootData}`),e.dynamicRef&&t.var(u.default.dynamicAnchors,a._`${u.default.valCxt}.${u.default.dynamicAnchors}`)}),(()=>{t.var(u.default.instancePath,a._`""`),t.var(u.default.parentData,a._`undefined`),t.var(u.default.parentDataProperty,a._`undefined`),t.var(u.default.rootData,u.default.data),e.dynamicRef&&t.var(u.default.dynamicAnchors,a._`{}`)}))}(t,s),t.code(n)})):t.func(e,a._`${u.default.data}, ${function(t){return a._`{${u.default.instancePath}="", ${u.default.parentData}, ${u.default.parentDataProperty}, ${u.default.rootData}=${u.default.data}${t.dynamicRef?a._`, ${u.default.dynamicAnchors}={}`:a.nil}}={}`}(s)}`,r.$async,(()=>t.code(d(i,s)).code(n)))}function d(t,e){const i="object"==typeof t&&t[e.schemaId];return i&&(e.code.source||e.code.process)?a._`/*# sourceURL=${i} */`:a.nil}function p(e,i){$(e)&&(g(e),m(e))?function(t,e){const{schema:i,gen:r,opts:s}=t;s.$comment&&i.$comment&&y(t);(function(t){const e=t.schema[t.opts.schemaId];e&&(t.baseId=(0,c.resolveUrl)(t.opts.uriResolver,t.baseId,e))})(t),function(t){if(t.schema.$async&&!t.schemaEnv.$async)throw new Error("async schema in sync schema")}(t);const n=r.const("_errs",u.default.errors);b(t,n),r.var(e,a._`${n} === ${u.default.errors}`)}(e,i):(0,t.boolOrEmptySchema)(e,i)}function m({schema:t,self:e}){if("boolean"==typeof t)return!t;for(const i in t)if(e.RULES.all[i])return!0;return!1}function $(t){return"boolean"!=typeof t.schema}function g(t){(0,h.checkUnknownRules)(t),function(t){const{schema:e,errSchemaPath:i,opts:r,self:s}=t;e.$ref&&r.ignoreKeywordsWithRef&&(0,h.schemaHasRulesButRef)(e,s.RULES)&&s.logger.warn(`$ref: keywords ignored in schema at path "${i}"`)}(t)}function b(t,i){if(t.opts.jtd)return v(t,[],!1,i);const r=(0,e.getSchemaTypes)(t.schema);v(t,r,!(0,e.coerceAndCheckDataType)(t,r),i)}function y({gen:t,schemaEnv:e,schema:i,errSchemaPath:r,opts:s}){const n=i.$comment;if(!0===s.$comment)t.code(a._`${u.default.self}.logger.log(${n})`);else if("function"==typeof s.$comment){const i=a.str`${r}/$comment`,s=t.scopeValue("root",{ref:e.root});t.code(a._`${u.default.self}.opts.$comment(${n}, ${i}, ${s}.schema)`)}}function v(t,e,s,n){const{gen:o,schema:c,data:l,allErrors:f,opts:d,self:p}=t,{RULES:m}=p;function $(h){(0,i.shouldUseGroup)(c,h)&&(h.type?(o.if((0,r.checkDataType)(h.type,l,d.strictNumbers)),w(t,h),1===e.length&&e[0]===h.type&&s&&(o.else(),(0,r.reportTypeError)(t)),o.endIf()):w(t,h),f||o.if(a._`${u.default.errors} === ${n||0}`))}!c.$ref||!d.ignoreKeywordsWithRef&&(0,h.schemaHasRulesButRef)(c,m)?(d.jtd||function(t,e){if(t.schemaEnv.meta||!t.opts.strictTypes)return;(function(t,e){if(!e.length)return;if(!t.dataTypes.length)return void(t.dataTypes=e);e.forEach((e=>{E(t.dataTypes,e)||D(t,`type "${e}" not allowed by context "${t.dataTypes.join(",")}"`)})),function(t,e){const i=[];for(const r of t.dataTypes)E(e,r)?i.push(r):e.includes("integer")&&"number"===r&&i.push("integer");t.dataTypes=i}(t,e)})(t,e),t.opts.allowUnionTypes||function(t,e){e.length>1&&(2!==e.length||!e.includes("null"))&&D(t,"use allowUnionTypes to allow union type keyword")}(t,e);!function(t,e){const r=t.self.RULES.all;for(const s in r){const n=r[s];if("object"==typeof n&&(0,i.shouldUseRule)(t.schema,n)){const{type:i}=n.definition;i.length&&!i.some((t=>k(e,t)))&&D(t,`missing type "${i.join(",")}" for keyword "${s}"`)}}}(t,t.dataTypes)}(t,e),o.block((()=>{for(const t of m.rules)$(t);$(m.post)}))):o.block((()=>F(t,"$ref",m.all.$ref.definition)))}function w(t,e){const{gen:r,schema:n,opts:{useDefaults:o}}=t;o&&(0,s.assignDefaults)(t,e.type),r.block((()=>{for(const r of e.rules)(0,i.shouldUseRule)(n,r)&&F(t,r.keyword,r.definition,e.type)}))}function k(t,e){return t.includes(e)||"number"===e&&t.includes("integer")}function E(t,e){return t.includes(e)||"integer"===e&&t.includes("number")}function D(t,e){e+=` at "${t.schemaEnv.baseId+t.errSchemaPath}" (strictTypes)`,(0,h.checkStrictMode)(t,e,t.opts.strictTypes)}on.validateFunctionCode=function(e){$(e)&&(g(e),m(e))?function(t){const{schema:e,opts:i,gen:r}=t;f(t,(()=>{i.$comment&&e.$comment&&y(t),function(t){const{schema:e,opts:i}=t;void 0!==e.default&&i.useDefaults&&i.strictSchema&&(0,h.checkStrictMode)(t,"default is ignored in the schema root")}(t),r.let(u.default.vErrors,null),r.let(u.default.errors,0),i.unevaluated&&function(t){const{gen:e,validateName:i}=t;t.evaluated=e.const("evaluated",a._`${i}.evaluated`),e.if(a._`${t.evaluated}.dynamicProps`,(()=>e.assign(a._`${t.evaluated}.props`,a._`undefined`))),e.if(a._`${t.evaluated}.dynamicItems`,(()=>e.assign(a._`${t.evaluated}.items`,a._`undefined`)))}(t),b(t),function(t){const{gen:e,schemaEnv:i,validateName:r,ValidationError:s,opts:n}=t;i.$async?e.if(a._`${u.default.errors} === 0`,(()=>e.return(u.default.data)),(()=>e.throw(a._`new ${s}(${u.default.vErrors})`))):(e.assign(a._`${r}.errors`,u.default.vErrors),n.unevaluated&&function({gen:t,evaluated:e,props:i,items:r}){i instanceof a.Name&&t.assign(a._`${e}.props`,i);r instanceof a.Name&&t.assign(a._`${e}.items`,r)}(t),e.return(a._`${u.default.errors} === 0`))}(t)}))}(e):f(e,(()=>(0,t.topBoolOrEmptySchema)(e)))};class x{constructor(t,e,i){if((0,n.validateKeywordUsage)(t,e,i),this.gen=t.gen,this.allErrors=t.allErrors,this.keyword=i,this.data=t.data,this.schema=t.schema[i],this.$data=e.$data&&t.opts.$data&&this.schema&&this.schema.$data,this.schemaValue=(0,h.schemaRefOrVal)(t,this.schema,i,this.$data),this.schemaType=e.schemaType,this.parentSchema=t.schema,this.params={},this.it=t,this.def=e,this.$data)this.schemaCode=t.gen.const("vSchema",j(this.$data,t));else if(this.schemaCode=this.schemaValue,!(0,n.validSchemaType)(this.schema,e.schemaType,e.allowUndefined))throw new Error(`${i} value must be ${JSON.stringify(e.schemaType)}`);("code"in e?e.trackErrors:!1!==e.errors)&&(this.errsCount=t.gen.const("_errs",u.default.errors))}result(t,e,i){this.failResult((0,a.not)(t),e,i)}failResult(t,e,i){this.gen.if(t),i?i():this.error(),e?(this.gen.else(),e(),this.allErrors&&this.gen.endIf()):this.allErrors?this.gen.endIf():this.gen.else()}pass(t,e){this.failResult((0,a.not)(t),void 0,e)}fail(t){if(void 0===t)return this.error(),void(this.allErrors||this.gen.if(!1));this.gen.if(t),this.error(),this.allErrors?this.gen.endIf():this.gen.else()}fail$data(t){if(!this.$data)return this.fail(t);const{schemaCode:e}=this;this.fail(a._`${e} !== undefined && (${(0,a.or)(this.invalid$data(),t)})`)}error(t,e,i){if(e)return this.setParams(e),this._error(t,i),void this.setParams({});this._error(t,i)}_error(t,e){(t?l.reportExtraError:l.reportError)(this,this.def.error,e)}$dataError(){(0,l.reportError)(this,this.def.$dataError||l.keyword$DataError)}reset(){if(void 0===this.errsCount)throw new Error('add "trackErrors" to keyword definition');(0,l.resetErrorsCount)(this.gen,this.errsCount)}ok(t){this.allErrors||this.gen.if(t)}setParams(t,e){e?Object.assign(this.params,t):this.params=t}block$data(t,e,i=a.nil){this.gen.block((()=>{this.check$data(t,i),e()}))}check$data(t=a.nil,e=a.nil){if(!this.$data)return;const{gen:i,schemaCode:r,schemaType:s,def:n}=this;i.if((0,a.or)(a._`${r} === undefined`,e)),t!==a.nil&&i.assign(t,!0),(s.length||n.validateSchema)&&(i.elseIf(this.invalid$data()),this.$dataError(),t!==a.nil&&i.assign(t,!1)),i.else()}invalid$data(){const{gen:t,schemaCode:e,schemaType:i,def:s,it:n}=this;return(0,a.or)(function(){if(i.length){if(!(e instanceof a.Name))throw new Error("ajv implementation error");const t=Array.isArray(i)?i:[i];return a._`${(0,r.checkDataTypes)(t,e,n.opts.strictNumbers,r.DataType.Wrong)}`}return a.nil}(),function(){if(s.validateSchema){const i=t.scopeValue("validate$data",{ref:s.validateSchema});return a._`!${i}(${e})`}return a.nil}())}subschema(t,e){const i=(0,o.getSubschema)(this.it,t);(0,o.extendSubschemaData)(i,this.it,t),(0,o.extendSubschemaMode)(i,t);const r={...this.it,...i,items:void 0,props:void 0};return p(r,e),r}mergeEvaluated(t,e){const{it:i,gen:r}=this;i.opts.unevaluated&&(!0!==i.props&&void 0!==t.props&&(i.props=h.mergeEvaluated.props(r,t.props,i.props,e)),!0!==i.items&&void 0!==t.items&&(i.items=h.mergeEvaluated.items(r,t.items,i.items,e)))}mergeValidEvaluated(t,e){const{it:i,gen:r}=this;if(i.opts.unevaluated&&(!0!==i.props||!0!==i.items))return r.if(e,(()=>this.mergeEvaluated(t,a.Name))),!0}}function F(t,e,i,r){const s=new x(t,i,e);"code"in i?i.code(s,r):s.$data&&i.validate?(0,n.funcKeywordCode)(s,i):"macro"in i?(0,n.macroKeywordCode)(s,i):(i.compile||i.validate)&&(0,n.funcKeywordCode)(s,i)}on.KeywordCxt=x;const _=/^\/(?:[^~]|~0|~1)*$/,A=/^([0-9]+)(#|\/(?:[^~]|~0|~1)*)?$/;function j(t,{dataLevel:e,dataNames:i,dataPathArr:r}){let s,n;if(""===t)return u.default.rootData;if("/"===t[0]){if(!_.test(t))throw new Error(`Invalid JSON-pointer: ${t}`);s=t,n=u.default.rootData}else{const o=A.exec(t);if(!o)throw new Error(`Invalid JSON-pointer: ${t}`);const a=+o[1];if(s=o[2],"#"===s){if(a>=e)throw new Error(l("property/index",a));return r[e-a]}if(a>e)throw new Error(l("data",a));if(n=i[e-a],!s)return n}let o=n;const c=s.split("/");for(const t of c)t&&(n=a._`${n}${(0,a.getProperty)((0,h.unescapeJsonPointer)(t))}`,o=a._`${o} && ${n}`);return o;function l(t,i){return`Cannot access ${t} ${i} levels up, current level is ${e}`}}return on.getData=j,on}var io,ro={};function so(){if(io)return ro;io=1,Object.defineProperty(ro,"W",{value:!0});class t extends Error{constructor(t){super("validation failed"),this.errors=t,this.ajv=this.validation=!0}}return ro.default=t,ro}var no,oo={};function ao(){if(no)return oo;no=1,Object.defineProperty(oo,"W",{value:!0});const t=to();class e extends Error{constructor(e,i,r,s){super(s||`can't resolve reference ${r} from id ${i}`),this.missingRef=(0,t.resolveUrl)(e,i,r),this.missingSchema=(0,t.normalizeId)((0,t.getFullPath)(e,this.missingRef))}}return oo.default=e,oo}var uo,co={};function ho(){if(uo)return co;uo=1,Object.defineProperty(co,"W",{value:!0}),co.resolveSchema=co.getCompilingSchema=co.resolveRef=co.compileSchema=co.SchemaEnv=void 0;const t=$n(),e=so(),i=Dn(),r=to(),s=yn(),n=eo();class o{constructor(t){var e;let i;this.refs={},this.dynamicAnchors={},"object"==typeof t.schema&&(i=t.schema),this.schema=t.schema,this.schemaId=t.schemaId,this.root=t.root||this,this.baseId=null!==(e=t.baseId)&&void 0!==e?e:(0,r.normalizeId)(null==i?void 0:i[t.schemaId||"$id"]),this.schemaPath=t.schemaPath,this.localRefs=t.localRefs,this.meta=t.meta,this.$async=null==i?void 0:i.$async,this.refs={}}}function a(s){const o=c.call(this,s);if(o)return o;const a=(0,r.getFullPath)(this.opts.uriResolver,s.root.baseId),{es5:u,lines:h}=this.opts.code,{ownProperties:l}=this.opts,f=new t.CodeGen(this.scope,{es5:u,lines:h,ownProperties:l});let d;s.$async&&(d=f.scopeValue("Error",{ref:e.default,code:t._`require("ajv/dist/runtime/validation_error").default`}));const p=f.scopeName("validate");s.validateName=p;const m={gen:f,allErrors:this.opts.allErrors,data:i.default.data,parentData:i.default.parentData,parentDataProperty:i.default.parentDataProperty,dataNames:[i.default.data],dataPathArr:[t.nil],dataLevel:0,dataTypes:[],definedProperties:new Set,topSchemaRef:f.scopeValue("schema",!0===this.opts.code.source?{ref:s.schema,code:(0,t.stringify)(s.schema)}:{ref:s.schema}),validateName:p,ValidationError:d,schema:s.schema,schemaEnv:s,rootId:a,baseId:s.baseId||a,schemaPath:t.nil,errSchemaPath:s.schemaPath||(this.opts.jtd?"":"#"),errorPath:t._`""`,opts:this.opts,self:this};let $;try{this._compilations.add(s),(0,n.validateFunctionCode)(m),f.optimize(this.opts.code.optimize);const e=f.toString();$=`${f.scopeRefs(i.default.scope)}return ${e}`,this.opts.code.process&&($=this.opts.code.process($,s));const r=new Function(`${i.default.self}`,`${i.default.scope}`,$)(this,this.scope.get());if(this.scope.value(p,{ref:r}),r.errors=null,r.schema=s.schema,r.schemaEnv=s,s.$async&&(r.$async=!0),!0===this.opts.code.source&&(r.source={validateName:p,validateCode:e,scopeValues:f._values}),this.opts.unevaluated){const{props:e,items:i}=m;r.evaluated={props:e instanceof t.Name?void 0:e,items:i instanceof t.Name?void 0:i,dynamicProps:e instanceof t.Name,dynamicItems:i instanceof t.Name},r.source&&(r.source.evaluated=(0,t.stringify)(r.evaluated))}return s.validate=r,s}catch(t){throw delete s.validate,delete s.validateName,$&&this.logger.error("Error compiling schema, function code:",$),t}finally{this._compilations.delete(s)}}function u(t){return(0,r.inlineRef)(t.schema,this.opts.inlineRefs)?t.schema:t.validate?t:a.call(this,t)}function c(t){for(const r of this._compilations)if(i=t,(e=r).schema===i.schema&&e.root===i.root&&e.baseId===i.baseId)return r;var e,i}function h(t,e){let i;for(;"string"==typeof(i=this.refs[e]);)e=i;return i||this.schemas[e]||l.call(this,t,e)}function l(t,e){const i=this.opts.uriResolver.parse(e),s=(0,r._getFullPath)(this.opts.uriResolver,i);let n=(0,r.getFullPath)(this.opts.uriResolver,t.baseId,void 0);if(Object.keys(t.schema).length>0&&s===n)return d.call(this,i,t);const u=(0,r.normalizeId)(s),c=this.refs[u]||this.schemas[u];if("string"==typeof c){const e=l.call(this,t,c);if("object"!=typeof(null==e?void 0:e.schema))return;return d.call(this,i,e)}if("object"==typeof(null==c?void 0:c.schema)){if(c.validate||a.call(this,c),u===(0,r.normalizeId)(e)){const{schema:e}=c,{schemaId:i}=this.opts,s=e[i];return s&&(n=(0,r.resolveUrl)(this.opts.uriResolver,n,s)),new o({schema:e,schemaId:i,root:t,baseId:n})}return d.call(this,i,c)}}co.SchemaEnv=o,co.compileSchema=a,co.resolveRef=function(t,e,i){var s;i=(0,r.resolveUrl)(this.opts.uriResolver,e,i);const n=t.refs[i];if(n)return n;let a=h.call(this,t,i);if(void 0===a){const r=null===(s=t.localRefs)||void 0===s?void 0:s[i],{schemaId:n}=this.opts;r&&(a=new o({schema:r,schemaId:n,root:t,baseId:e}))}return void 0!==a?t.refs[i]=u.call(this,a):void 0},co.getCompilingSchema=c,co.resolveSchema=l;const f=new Set(["properties","patternProperties","enum","dependencies","definitions"]);function d(t,{baseId:e,schema:i,root:n}){var a;if("/"!==(null===(a=t.fragment)||void 0===a?void 0:a[0]))return;for(const n of t.fragment.slice(1).split("/")){if("boolean"==typeof i)return;const t=i[(0,s.unescapeFragment)(n)];if(void 0===t)return;const o="object"==typeof(i=t)&&i[this.opts.schemaId];!f.has(n)&&o&&(e=(0,r.resolveUrl)(this.opts.uriResolver,e,o))}let u;if("boolean"!=typeof i&&i.$ref&&!(0,s.schemaHasRulesButRef)(i,this.RULES)){const t=(0,r.resolveUrl)(this.opts.uriResolver,e,i.$ref);u=l.call(this,n,t)}const{schemaId:c}=this.opts;return u=u||new o({schema:i,schemaId:c,root:n,baseId:e}),u.schema!==u.root.schema?u:void 0}return co}var lo,fo,po,mo,$o,go,bo,yo,vo,wo={$id:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#",description:"Meta-schema for $data reference (JSON AnySchema extension proposal)",type:"object",required:["$data"],properties:{$data:{type:"string",anyOf:[{format:"relative-json-pointer"},{format:"json-pointer"}]}},additionalProperties:!1},ko={},Eo={exports:{}};function Do(){if(mo)return po;mo=1;const{HEX:t}=fo?lo:(fo=1,lo={HEX:{0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,a:10,A:10,b:11,B:11,c:12,C:12,d:13,D:13,e:14,E:14,f:15,F:15}}),e=/^(?:(?:25[0-5]|2[0-4]\d|1\d{2}|[1-9]\d|\d)\.){3}(?:25[0-5]|2[0-4]\d|1\d{2}|[1-9]\d|\d)$/u;function i(t){if(o(t,".")<3)return{host:t,isIPV4:!1};const i=t.match(e)||[],[r]=i;return r?{host:n(r,"."),isIPV4:!0}:{host:t,isIPV4:!1}}function r(e,i=!1){let r="",s=!0;for(const i of e){if(void 0===t[i])return;"0"!==i&&!0===s&&(s=!1),s||(r+=i)}return i&&0===r.length&&(r="0"),r}function s(t){if(o(t,":")<2)return{host:t,isIPV6:!1};const e=function(t){let e=0;const i={error:!1,address:"",zone:""},s=[],n=[];let o=!1,a=!1,u=!1;function c(){if(n.length){if(!1===o){const t=r(n);if(void 0===t)return i.error=!0,!1;s.push(t)}n.length=0}return!0}for(let r=0;r<t.length;r++){const h=t[r];if("["!==h&&"]"!==h)if(":"!==h)if("%"===h){if(!c())break;o=!0}else n.push(h);else{if(!0===a&&(u=!0),!c())break;if(e++,s.push(":"),e>7){i.error=!0;break}r-1>=0&&":"===t[r-1]&&(a=!0)}}return n.length&&(o?i.zone=n.join(""):u?s.push(n.join("")):s.push(r(n))),i.address=s.join(""),i}(t);if(e.error)return{host:t,isIPV6:!1};{let t=e.address,i=e.address;return e.zone&&(t+="%"+e.zone,i+="%25"+e.zone),{host:t,escapedHost:i,isIPV6:!0}}}function n(t,e){let i="",r=!0;const s=t.length;for(let n=0;n<s;n++){const o=t[n];"0"===o&&r?(n+1<=s&&t[n+1]===e||n+1===s)&&(i+=o,r=!1):(r=o===e,i+=o)}return i}function o(t,e){let i=0;for(let r=0;r<t.length;r++)t[r]===e&&i++;return i}const a=/^\.\.?\//u,u=/^\/\.(?:\/|$)/u,c=/^\/\.\.(?:\/|$)/u,h=/^\/?(?:.|\n)*?(?=\/|$)/u;return po={recomposeAuthority:function(t){const e=[];if(void 0!==t.userinfo&&(e.push(t.userinfo),e.push("@")),void 0!==t.host){let r=unescape(t.host);const n=i(r);if(n.isIPV4)r=n.host;else{const e=s(n.host);r=!0===e.isIPV6?`[${e.escapedHost}]`:t.host}e.push(r)}return"number"!=typeof t.port&&"string"!=typeof t.port||(e.push(":"),e.push(String(t.port))),e.length?e.join(""):void 0},normalizeComponentEncoding:function(t,e){const i=!0!==e?escape:unescape;return void 0!==t.scheme&&(t.scheme=i(t.scheme)),void 0!==t.userinfo&&(t.userinfo=i(t.userinfo)),void 0!==t.host&&(t.host=i(t.host)),void 0!==t.path&&(t.path=i(t.path)),void 0!==t.query&&(t.query=i(t.query)),void 0!==t.fragment&&(t.fragment=i(t.fragment)),t},removeDotSegments:function(t){const e=[];for(;t.length;)if(t.match(a))t=t.replace(a,"");else if(t.match(u))t=t.replace(u,"/");else if(t.match(c))t=t.replace(c,"/"),e.pop();else if("."===t||".."===t)t="";else{const i=t.match(h);if(!i)throw new Error("Unexpected dot segment condition");{const r=i[0];t=t.slice(r.length),e.push(r)}}return e.join("")},normalizeIPv4:i,normalizeIPv6:s,stringArrayToHexStripped:r},po}function xo(){if(bo)return Eo.exports;bo=1;const{normalizeIPv6:t,normalizeIPv4:e,removeDotSegments:i,recomposeAuthority:r,normalizeComponentEncoding:s}=Do(),n=function(){if(go)return $o;go=1;const t=/^[\da-f]{8}-[\da-f]{4}-[\da-f]{4}-[\da-f]{4}-[\da-f]{12}$/iu,e=/([\da-z][\d\-a-z]{0,31}):((?:[\w!$'()*+,\-.:;=@]|%[\da-f]{2})+)/iu;function i(t){return"boolean"==typeof t.secure?t.secure:"wss"===String(t.scheme).toLowerCase()}function r(t){return t.host||(t.error=t.error||"HTTP URIs must have a host."),t}function s(t){const e="https"===String(t.scheme).toLowerCase();return t.port!==(e?443:80)&&""!==t.port||(t.port=void 0),t.path||(t.path="/"),t}const n={scheme:"http",domainHost:!0,parse:r,serialize:s},o={scheme:"ws",domainHost:!0,parse:function(t){return t.secure=i(t),t.resourceName=(t.path||"/")+(t.query?"?"+t.query:""),t.path=void 0,t.query=void 0,t},serialize:function(t){if(t.port!==(i(t)?443:80)&&""!==t.port||(t.port=void 0),"boolean"==typeof t.secure&&(t.scheme=t.secure?"wss":"ws",t.secure=void 0),t.resourceName){const[e,i]=t.resourceName.split("?");t.path=e&&"/"!==e?e:void 0,t.query=i,t.resourceName=void 0}return t.fragment=void 0,t}},a={http:n,https:{scheme:"https",domainHost:n.domainHost,parse:r,serialize:s},ws:o,wss:{scheme:"wss",domainHost:o.domainHost,parse:o.parse,serialize:o.serialize},urn:{scheme:"urn",parse:function(t,i){if(!t.path)return t.error="URN can not be parsed",t;const r=t.path.match(e);if(r){const e=i.scheme||t.scheme||"urn";t.nid=r[1].toLowerCase(),t.nss=r[2];const s=`${e}:${i.nid||t.nid}`,n=a[s];t.path=void 0,n&&(t=n.parse(t,i))}else t.error=t.error||"URN can not be parsed.";return t},serialize:function(t,e){const i=e.scheme||t.scheme||"urn",r=t.nid.toLowerCase(),s=`${i}:${e.nid||r}`,n=a[s];n&&(t=n.serialize(t,e));const o=t,u=t.nss;return o.path=`${r||e.nid}:${u}`,e.skipEscape=!0,o},skipNormalize:!0},"urn:uuid":{scheme:"urn:uuid",parse:function(e,i){const r=e;return r.uuid=r.nss,r.nss=void 0,i.tolerant||r.uuid&&t.test(r.uuid)||(r.error=r.error||"UUID is not valid."),r},serialize:function(t){const e=t;return e.nss=(t.uuid||"").toLowerCase(),e},skipNormalize:!0}};return $o=a}();function o(t,e,r,s){const n={};return s||(t=h(a(t,r),r),e=h(a(e,r),r)),!(r=r||{}).tolerant&&e.scheme?(n.scheme=e.scheme,n.userinfo=e.userinfo,n.host=e.host,n.port=e.port,n.path=i(e.path||""),n.query=e.query):(void 0!==e.userinfo||void 0!==e.host||void 0!==e.port?(n.userinfo=e.userinfo,n.host=e.host,n.port=e.port,n.path=i(e.path||""),n.query=e.query):(e.path?("/"===e.path.charAt(0)?n.path=i(e.path):(void 0===t.userinfo&&void 0===t.host&&void 0===t.port||t.path?t.path?n.path=t.path.slice(0,t.path.lastIndexOf("/")+1)+e.path:n.path=e.path:n.path="/"+e.path,n.path=i(n.path)),n.query=e.query):(n.path=t.path,void 0!==e.query?n.query=e.query:n.query=t.query),n.userinfo=t.userinfo,n.host=t.host,n.port=t.port),n.scheme=t.scheme),n.fragment=e.fragment,n}function a(t,e){const s={host:t.host,scheme:t.scheme,userinfo:t.userinfo,port:t.port,path:t.path,query:t.query,nid:t.nid,nss:t.nss,uuid:t.uuid,fragment:t.fragment,reference:t.reference,resourceName:t.resourceName,secure:t.secure,error:""},o=Object.assign({},e),a=[],u=n[(o.scheme||s.scheme||"").toLowerCase()];u&&u.serialize&&u.serialize(s,o),void 0!==s.path&&(o.skipEscape?s.path=unescape(s.path):(s.path=escape(s.path),void 0!==s.scheme&&(s.path=s.path.split("%3A").join(":")))),"suffix"!==o.reference&&s.scheme&&a.push(s.scheme,":");const c=r(s);if(void 0!==c&&("suffix"!==o.reference&&a.push("//"),a.push(c),s.path&&"/"!==s.path.charAt(0)&&a.push("/")),void 0!==s.path){let t=s.path;o.absolutePath||u&&u.absolutePath||(t=i(t)),void 0===c&&(t=t.replace(/^\/\//u,"/%2F")),a.push(t)}return void 0!==s.query&&a.push("?",s.query),void 0!==s.fragment&&a.push("#",s.fragment),a.join("")}const u=Array.from({length:127},((t,e)=>/[^!"$&'()*+,\-.;=_`a-z{}~]/u.test(String.fromCharCode(e))));const c=/^(?:([^#/:?]+):)?(?:\/\/((?:([^#/?@]*)@)?(\[[^#/?\]]+\]|[^#/:?]*)(?::(\d*))?))?([^#?]*)(?:\?([^#]*))?(?:#((?:.|[\n\r])*))?/u;function h(i,r){const s=Object.assign({},r),o={scheme:void 0,userinfo:void 0,host:"",port:void 0,path:"",query:void 0,fragment:void 0},a=-1!==i.indexOf("%");let h=!1;"suffix"===s.reference&&(i=(s.scheme?s.scheme+":":"")+"//"+i);const l=i.match(c);if(l){if(o.scheme=l[1],o.userinfo=l[3],o.host=l[4],o.port=parseInt(l[5],10),o.path=l[6]||"",o.query=l[7],o.fragment=l[8],isNaN(o.port)&&(o.port=l[5]),o.host){const i=e(o.host);if(!1===i.isIPV4){const e=t(i.host);o.host=e.host.toLowerCase(),h=e.isIPV6}else o.host=i.host,h=!0}void 0!==o.scheme||void 0!==o.userinfo||void 0!==o.host||void 0!==o.port||void 0!==o.query||o.path?void 0===o.scheme?o.reference="relative":void 0===o.fragment?o.reference="absolute":o.reference="uri":o.reference="same-document",s.reference&&"suffix"!==s.reference&&s.reference!==o.reference&&(o.error=o.error||"URI is not a "+s.reference+" reference.");const i=n[(s.scheme||o.scheme||"").toLowerCase()];if(!(s.unicodeSupport||i&&i.unicodeSupport)&&o.host&&(s.domainHost||i&&i.domainHost)&&!1===h&&function(t){let e=0;for(let i=0,r=t.length;i<r;++i)if(e=t.charCodeAt(i),e>126||u[e])return!0;return!1}(o.host))try{o.host=URL.domainToASCII(o.host.toLowerCase())}catch(t){o.error=o.error||"Host's domain name can not be converted to ASCII: "+t}(!i||i&&!i.skipNormalize)&&(a&&void 0!==o.scheme&&(o.scheme=unescape(o.scheme)),a&&void 0!==o.host&&(o.host=unescape(o.host)),o.path&&(o.path=escape(unescape(o.path))),o.fragment&&(o.fragment=encodeURI(decodeURIComponent(o.fragment)))),i&&i.parse&&i.parse(o,s)}else o.error=o.error||"URI can not be parsed.";return o}const l={SCHEMES:n,normalize:function(t,e){return"string"==typeof t?t=a(h(t,e),e):"object"==typeof t&&(t=h(a(t,e),e)),t},resolve:function(t,e,i){const r=Object.assign({scheme:"null"},i);return a(o(h(t,r),h(e,r),r,!0),{...r,skipEscape:!0})},resolveComponents:o,equal:function(t,e,i){return"string"==typeof t?(t=unescape(t),t=a(s(h(t,i),!0),{...i,skipEscape:!0})):"object"==typeof t&&(t=a(s(t,!0),{...i,skipEscape:!0})),"string"==typeof e?(e=unescape(e),e=a(s(h(e,i),!0),{...i,skipEscape:!0})):"object"==typeof e&&(e=a(s(e,!0),{...i,skipEscape:!0})),t.toLowerCase()===e.toLowerCase()},serialize:a,parse:h};return Eo.exports=l,Eo.exports.default=l,Eo.exports.fastUri=l,Eo.exports}function Fo(){return vo||(vo=1,function(t){Object.defineProperty(t,"W",{value:!0}),t.CodeGen=t.Name=t.nil=t.stringify=t.str=t._=t.KeywordCxt=void 0;var e=eo();Object.defineProperty(t,"KeywordCxt",{enumerable:!0,get:function(){return e.KeywordCxt}});var i=$n();Object.defineProperty(t,"_",{enumerable:!0,get:function(){return i._}}),Object.defineProperty(t,"str",{enumerable:!0,get:function(){return i.str}}),Object.defineProperty(t,"stringify",{enumerable:!0,get:function(){return i.stringify}}),Object.defineProperty(t,"nil",{enumerable:!0,get:function(){return i.nil}}),Object.defineProperty(t,"Name",{enumerable:!0,get:function(){return i.Name}}),Object.defineProperty(t,"CodeGen",{enumerable:!0,get:function(){return i.CodeGen}});const r=so(),s=ao(),n=jn(),o=ho(),a=$n(),u=to(),c=qn(),h=yn(),l=wo,f=function(){if(yo)return ko;yo=1,Object.defineProperty(ko,"W",{value:!0});const t=xo();return t.code='require("ajv/dist/runtime/uri").default',ko.default=t,ko}(),d=(t,e)=>new RegExp(t,e);d.code="new RegExp";const p=["removeAdditional","useDefaults","coerceTypes"],m=new Set(["validate","serialize","parse","wrapper","root","schema","keyword","pattern","formats","validate$data","func","obj","Error"]),$={errorDataPath:"",format:"`validateFormats: false` can be used instead.",nullable:'"nullable" keyword is supported by default.',jsonPointers:"Deprecated jsPropertySyntax can be used instead.",extendRefs:"Deprecated ignoreKeywordsWithRef can be used instead.",missingRefs:"Pass empty schema with $id that should be ignored to ajv.addSchema.",processCode:"Use option `code: {process: (code, schemaEnv: object) => string}`",sourceCode:"Use option `code: {source: true}`",strictDefaults:"It is default now, see option `strict`.",strictKeywords:"It is default now, see option `strict`.",uniqueItems:'"uniqueItems" keyword is always validated.',unknownFormats:"Disable strict mode or pass `true` to `ajv.addFormat` (or `formats` option).",cache:"Map is used as cache, schema object as key.",serialize:"Map is used as cache, schema object as key.",ajvErrors:"It is default now."},g={ignoreKeywordsWithRef:"",jsPropertySyntax:"",unicode:'"minLength"/"maxLength" account for unicode characters by default.'};function b(t){var e,i,r,s,n,o,a,u,c,h,l,p,m,$,g,b,y,v,w,k,E,D,x,F,_;const A=t.strict,j=null===(e=t.code)||void 0===e?void 0:e.optimize,C=!0===j||void 0===j?1:j||0,z=null!==(r=null===(i=t.code)||void 0===i?void 0:i.regExp)&&void 0!==r?r:d,S=null!==(s=t.uriResolver)&&void 0!==s?s:f.default;return{strictSchema:null===(o=null!==(n=t.strictSchema)&&void 0!==n?n:A)||void 0===o||o,strictNumbers:null===(u=null!==(a=t.strictNumbers)&&void 0!==a?a:A)||void 0===u||u,strictTypes:null!==(h=null!==(c=t.strictTypes)&&void 0!==c?c:A)&&void 0!==h?h:"log",strictTuples:null!==(p=null!==(l=t.strictTuples)&&void 0!==l?l:A)&&void 0!==p?p:"log",strictRequired:null!==($=null!==(m=t.strictRequired)&&void 0!==m?m:A)&&void 0!==$&&$,code:t.code?{...t.code,optimize:C,regExp:z}:{optimize:C,regExp:z},loopRequired:null!==(g=t.loopRequired)&&void 0!==g?g:200,loopEnum:null!==(b=t.loopEnum)&&void 0!==b?b:200,meta:null===(y=t.meta)||void 0===y||y,messages:null===(v=t.messages)||void 0===v||v,inlineRefs:null===(w=t.inlineRefs)||void 0===w||w,schemaId:null!==(k=t.schemaId)&&void 0!==k?k:"$id",addUsedSchema:null===(E=t.addUsedSchema)||void 0===E||E,validateSchema:null===(D=t.validateSchema)||void 0===D||D,validateFormats:null===(x=t.validateFormats)||void 0===x||x,unicodeRegExp:null===(F=t.unicodeRegExp)||void 0===F||F,int32range:null===(_=t.int32range)||void 0===_||_,uriResolver:S}}class y{constructor(t={}){this.schemas={},this.refs={},this.formats={},this._compilations=new Set,this._loading={},this._cache=new Map,t=this.opts={...t,...b(t)};const{es5:e,lines:i}=this.opts.code;this.scope=new a.ValueScope({scope:{},prefixes:m,es5:e,lines:i}),this.logger=function(t){if(!1===t)return F;if(void 0===t)return console;if(t.log&&t.warn&&t.error)return t;throw new Error("logger must implement log, warn and error methods")}(t.logger);const r=t.validateFormats;t.validateFormats=!1,this.RULES=(0,n.getRules)(),v.call(this,$,t,"NOT SUPPORTED"),v.call(this,g,t,"DEPRECATED","warn"),this._metaOpts=x.call(this),t.formats&&E.call(this),this._addVocabularies(),this._addDefaultMetaSchema(),t.keywords&&D.call(this,t.keywords),"object"==typeof t.meta&&this.addMetaSchema(t.meta),k.call(this),t.validateFormats=r}_addVocabularies(){this.addKeyword("$async")}_addDefaultMetaSchema(){const{$data:t,meta:e,schemaId:i}=this.opts;let r=l;"id"===i&&(r={...l},r.id=r.$id,delete r.$id),e&&t&&this.addMetaSchema(r,r[i],!1)}defaultMeta(){const{meta:t,schemaId:e}=this.opts;return this.opts.defaultMeta="object"==typeof t?t[e]||t:void 0}validate(t,e){let i;if("string"==typeof t){if(i=this.getSchema(t),!i)throw new Error(`no schema with key or ref "${t}"`)}else i=this.compile(t);const r=i(e);return"$async"in i||(this.errors=i.errors),r}compile(t,e){const i=this._addSchema(t,e);return i.validate||this._compileSchemaEnv(i)}compileAsync(t,e){if("function"!=typeof this.opts.loadSchema)throw new Error("options.loadSchema should be a function");const{loadSchema:i}=this.opts;return r.call(this,t,e);async function r(t,e){await n.call(this,t.$schema);const i=this._addSchema(t,e);return i.validate||o.call(this,i)}async function n(t){t&&!this.getSchema(t)&&await r.call(this,{$ref:t},!0)}async function o(t){try{return this._compileSchemaEnv(t)}catch(e){if(!(e instanceof s.default))throw e;return a.call(this,e),await u.call(this,e.missingSchema),o.call(this,t)}}function a({missingSchema:t,missingRef:e}){if(this.refs[t])throw new Error(`AnySchema ${t} is loaded but ${e} cannot be resolved`)}async function u(t){const i=await c.call(this,t);this.refs[t]||await n.call(this,i.$schema),this.refs[t]||this.addSchema(i,t,e)}async function c(t){const e=this._loading[t];if(e)return e;try{return await(this._loading[t]=i(t))}finally{delete this._loading[t]}}}addSchema(t,e,i,r=this.opts.validateSchema){if(Array.isArray(t)){for(const e of t)this.addSchema(e,void 0,i,r);return this}let s;if("object"==typeof t){const{schemaId:e}=this.opts;if(s=t[e],void 0!==s&&"string"!=typeof s)throw new Error(`schema ${e} must be string`)}return e=(0,u.normalizeId)(e||s),this._checkUnique(e),this.schemas[e]=this._addSchema(t,i,e,r,!0),this}addMetaSchema(t,e,i=this.opts.validateSchema){return this.addSchema(t,e,!0,i),this}validateSchema(t,e){if("boolean"==typeof t)return!0;let i;if(i=t.$schema,void 0!==i&&"string"!=typeof i)throw new Error("$schema must be a string");if(i=i||this.opts.defaultMeta||this.defaultMeta(),!i)return this.logger.warn("meta-schema not available"),this.errors=null,!0;const r=this.validate(i,t);if(!r&&e){const t="schema is invalid: "+this.errorsText();if("log"!==this.opts.validateSchema)throw new Error(t);this.logger.error(t)}return r}getSchema(t){let e;for(;"string"==typeof(e=w.call(this,t));)t=e;if(void 0===e){const{schemaId:i}=this.opts,r=new o.SchemaEnv({schema:{},schemaId:i});if(e=o.resolveSchema.call(this,r,t),!e)return;this.refs[t]=e}return e.validate||this._compileSchemaEnv(e)}removeSchema(t){if(t instanceof RegExp)return this._removeAllSchemas(this.schemas,t),this._removeAllSchemas(this.refs,t),this;switch(typeof t){case"undefined":return this._removeAllSchemas(this.schemas),this._removeAllSchemas(this.refs),this._cache.clear(),this;case"string":{const e=w.call(this,t);return"object"==typeof e&&this._cache.delete(e.schema),delete this.schemas[t],delete this.refs[t],this}case"object":{const e=t;this._cache.delete(e);let i=t[this.opts.schemaId];return i&&(i=(0,u.normalizeId)(i),delete this.schemas[i],delete this.refs[i]),this}default:throw new Error("ajv.removeSchema: invalid parameter")}}addVocabulary(t){for(const e of t)this.addKeyword(e);return this}addKeyword(t,e){let i;if("string"==typeof t)i=t,"object"==typeof e&&(this.logger.warn("these parameters are deprecated, see docs for addKeyword"),e.keyword=i);else{if("object"!=typeof t||void 0!==e)throw new Error("invalid addKeywords parameters");if(i=(e=t).keyword,Array.isArray(i)&&!i.length)throw new Error("addKeywords: keyword must be string or non-empty array")}if(A.call(this,i,e),!e)return(0,h.eachItem)(i,(t=>j.call(this,t))),this;z.call(this,e);const r={...e,type:(0,c.getJSONTypes)(e.type),schemaType:(0,c.getJSONTypes)(e.schemaType)};return(0,h.eachItem)(i,0===r.type.length?t=>j.call(this,t,r):t=>r.type.forEach((e=>j.call(this,t,r,e)))),this}getKeyword(t){const e=this.RULES.all[t];return"object"==typeof e?e.definition:!!e}removeKeyword(t){const{RULES:e}=this;delete e.keywords[t],delete e.all[t];for(const i of e.rules){const e=i.rules.findIndex((e=>e.keyword===t));e>=0&&i.rules.splice(e,1)}return this}addFormat(t,e){return"string"==typeof e&&(e=new RegExp(e)),this.formats[t]=e,this}errorsText(t=this.errors,{separator:e=", ",dataVar:i="data"}={}){return t&&0!==t.length?t.map((t=>`${i}${t.instancePath} ${t.message}`)).reduce(((t,i)=>t+e+i)):"No errors"}$dataMetaSchema(t,e){const i=this.RULES.all;t=JSON.parse(JSON.stringify(t));for(const r of e){const e=r.split("/").slice(1);let s=t;for(const t of e)s=s[t];for(const t in i){const e=i[t];if("object"!=typeof e)continue;const{$data:r}=e.definition,n=s[t];r&&n&&(s[t]=O(n))}}return t}_removeAllSchemas(t,e){for(const i in t){const r=t[i];e&&!e.test(i)||("string"==typeof r?delete t[i]:r&&!r.meta&&(this._cache.delete(r.schema),delete t[i]))}}_addSchema(t,e,i,r=this.opts.validateSchema,s=this.opts.addUsedSchema){let n;const{schemaId:a}=this.opts;if("object"==typeof t)n=t[a];else{if(this.opts.jtd)throw new Error("schema must be object");if("boolean"!=typeof t)throw new Error("schema must be object or boolean")}let c=this._cache.get(t);if(void 0!==c)return c;i=(0,u.normalizeId)(n||i);const h=u.getSchemaRefs.call(this,t,i);return c=new o.SchemaEnv({schema:t,schemaId:a,meta:e,baseId:i,localRefs:h}),this._cache.set(c.schema,c),s&&!i.startsWith("#")&&(i&&this._checkUnique(i),this.refs[i]=c),r&&this.validateSchema(t,!0),c}_checkUnique(t){if(this.schemas[t]||this.refs[t])throw new Error(`schema with key or id "${t}" already exists`)}_compileSchemaEnv(t){if(t.meta?this._compileMetaSchema(t):o.compileSchema.call(this,t),!t.validate)throw new Error("ajv implementation error");return t.validate}_compileMetaSchema(t){const e=this.opts;this.opts=this._metaOpts;try{o.compileSchema.call(this,t)}finally{this.opts=e}}}function v(t,e,i,r="error"){for(const s in t){const n=s;n in e&&this.logger[r](`${i}: option ${s}. ${t[n]}`)}}function w(t){return t=(0,u.normalizeId)(t),this.schemas[t]||this.refs[t]}function k(){const t=this.opts.schemas;if(t)if(Array.isArray(t))this.addSchema(t);else for(const e in t)this.addSchema(t[e],e)}function E(){for(const t in this.opts.formats){const e=this.opts.formats[t];e&&this.addFormat(t,e)}}function D(t){if(Array.isArray(t))this.addVocabulary(t);else{this.logger.warn("keywords option as map is deprecated, pass array");for(const e in t){const i=t[e];i.keyword||(i.keyword=e),this.addKeyword(i)}}}function x(){const t={...this.opts};for(const e of p)delete t[e];return t}y.ValidationError=r.default,y.MissingRefError=s.default,t.default=y;const F={log(){},warn(){},error(){}};const _=/^[a-z_$][a-z0-9_$:-]*$/i;function A(t,e){const{RULES:i}=this;if((0,h.eachItem)(t,(t=>{if(i.keywords[t])throw new Error(`Keyword ${t} is already defined`);if(!_.test(t))throw new Error(`Keyword ${t} has invalid name`)})),e&&e.$data&&!("code"in e)&&!("validate"in e))throw new Error('$data keyword must have "code" or "validate" function')}function j(t,e,i){var r;const s=null==e?void 0:e.post;if(i&&s)throw new Error('keyword with "post" flag cannot have "type"');const{RULES:n}=this;let o=s?n.post:n.rules.find((({type:t})=>t===i));if(o||(o={type:i,rules:[]},n.rules.push(o)),n.keywords[t]=!0,!e)return;const a={keyword:t,definition:{...e,type:(0,c.getJSONTypes)(e.type),schemaType:(0,c.getJSONTypes)(e.schemaType)}};e.before?C.call(this,o,a,e.before):o.rules.push(a),n.all[t]=a,null===(r=e.implements)||void 0===r||r.forEach((t=>this.addKeyword(t)))}function C(t,e,i){const r=t.rules.findIndex((t=>t.keyword===i));r>=0?t.rules.splice(r,0,e):(t.rules.push(e),this.logger.warn(`rule ${i} is not defined`))}function z(t){let{metaSchema:e}=t;void 0!==e&&(t.$data&&this.opts.$data&&(e=O(e)),t.validateSchema=this.compile(e,!0))}const S={$ref:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#"};function O(t){return{anyOf:[t,S]}}}(nn)),nn}var _o,Ao={},jo={},Co={};var zo,So,Oo={};function qo(){if(So)return jo;So=1,Object.defineProperty(jo,"W",{value:!0});const t=function(){if(_o)return Co;_o=1,Object.defineProperty(Co,"W",{value:!0});const t={keyword:"id",code(){throw new Error('NOT SUPPORTED: keyword "id", use "$id" for schema ID')}};return Co.default=t,Co}(),e=function(){if(zo)return Oo;zo=1,Object.defineProperty(Oo,"W",{value:!0}),Oo.callRef=Oo.getValidate=void 0;const t=ao(),e=Bn(),i=$n(),r=Dn(),s=ho(),n=yn(),o={keyword:"$ref",schemaType:"string",code(e){const{gen:r,schema:n,it:o}=e,{baseId:c,schemaEnv:h,validateName:l,opts:f,self:d}=o,{root:p}=h;if(("#"===n||"#/"===n)&&c===p.baseId)return function(){if(h===p)return u(e,l,h,h.$async);const t=r.scopeValue("root",{ref:p});return u(e,i._`${t}.validate`,p,p.$async)}();const m=s.resolveRef.call(d,p,c,n);if(void 0===m)throw new t.default(o.opts.uriResolver,c,n);return m instanceof s.SchemaEnv?function(t){const i=a(e,t);u(e,i,t,t.$async)}(m):function(t){const s=r.scopeValue("schema",!0===f.code.source?{ref:t,code:(0,i.stringify)(t)}:{ref:t}),o=r.name("valid"),a=e.subschema({schema:t,dataTypes:[],schemaPath:i.nil,topSchemaRef:s,errSchemaPath:n},o);e.mergeEvaluated(a),e.ok(o)}(m)}};function a(t,e){const{gen:r}=t;return e.validate?r.scopeValue("validate",{ref:e.validate}):i._`${r.scopeValue("wrapper",{ref:e})}.validate`}function u(t,s,o,a){const{gen:u,it:c}=t,{allErrors:h,schemaEnv:l,opts:f}=c,d=f.passContext?r.default.this:i.nil;function p(t){const e=i._`${t}.errors`;u.assign(r.default.vErrors,i._`${r.default.vErrors} === null ? ${e} : ${r.default.vErrors}.concat(${e})`),u.assign(r.default.errors,i._`${r.default.vErrors}.length`)}function m(t){var e;if(!c.opts.unevaluated)return;const r=null===(e=null==o?void 0:o.validate)||void 0===e?void 0:e.evaluated;if(!0!==c.props)if(r&&!r.dynamicProps)void 0!==r.props&&(c.props=n.mergeEvaluated.props(u,r.props,c.props));else{const e=u.var("props",i._`${t}.evaluated.props`);c.props=n.mergeEvaluated.props(u,e,c.props,i.Name)}if(!0!==c.items)if(r&&!r.dynamicItems)void 0!==r.items&&(c.items=n.mergeEvaluated.items(u,r.items,c.items));else{const e=u.var("items",i._`${t}.evaluated.items`);c.items=n.mergeEvaluated.items(u,e,c.items,i.Name)}}a?function(){if(!l.$async)throw new Error("async schema referenced by sync schema");const r=u.let("valid");u.try((()=>{u.code(i._`await ${(0,e.callValidateCode)(t,s,d)}`),m(s),h||u.assign(r,!0)}),(t=>{u.if(i._`!(${t} instanceof ${c.ValidationError})`,(()=>u.throw(t))),p(t),h||u.assign(r,!1)})),t.ok(r)}():t.result((0,e.callValidateCode)(t,s,d),(()=>m(s)),(()=>p(s)))}return Oo.getValidate=a,Oo.callRef=u,Oo.default=o,Oo}(),i=["$schema","$id","$defs","$vocabulary",{keyword:"$comment"},"definitions",t.default,e.default];return jo.default=i,jo}var Io,Po={},To={};var No,Mo={};var Ro,Bo,Lo={},Uo={};function Vo(){if(Bo)return Lo;Bo=1,Object.defineProperty(Lo,"W",{value:!0});const t=$n(),e=yn(),i=function(){if(Ro)return Uo;function t(t){const e=t.length;let i,r=0,s=0;for(;s<e;)r++,i=t.charCodeAt(s++),i>=55296&&i<=56319&&s<e&&(i=t.charCodeAt(s),56320==(64512&i)&&s++);return r}return Ro=1,Object.defineProperty(Uo,"W",{value:!0}),Uo.default=t,t.code='require("ajv/dist/runtime/ucs2length").default',Uo}(),r={message({keyword:e,schemaCode:i}){const r="maxLength"===e?"more":"fewer";return t.str`must NOT have ${r} than ${i} characters`},params:({schemaCode:e})=>t._`{limit: ${e}}`},s={keyword:["maxLength","minLength"],type:"string",schemaType:"number",$data:!0,error:r,code(r){const{keyword:s,data:n,schemaCode:o,it:a}=r,u="maxLength"===s?t.operators.GT:t.operators.LT,c=!1===a.opts.unicode?t._`${n}.length`:t._`${(0,e.useFunc)(r.gen,i.default)}(${n})`;r.fail$data(t._`${c} ${u} ${o}`)}};return Lo.default=s,Lo}var Ho,Zo={};var Go,Jo={};var Ko,Wo={};function Qo(){if(Ko)return Wo;Ko=1,Object.defineProperty(Wo,"W",{value:!0});const t=Bn(),e=$n(),i=yn(),r={keyword:"required",type:"object",schemaType:"array",$data:!0,error:{message:({params:{missingProperty:t}})=>e.str`must have required property '${t}'`,params:({params:{missingProperty:t}})=>e._`{missingProperty: ${t}}`},code(r){const{gen:s,schema:n,schemaCode:o,data:a,$data:u,it:c}=r,{opts:h}=c;if(!u&&0===n.length)return;const l=n.length>=h.loopRequired;if(c.allErrors?function(){if(l||u)r.block$data(e.nil,f);else for(const e of n)(0,t.checkReportMissingProp)(r,e)}():function(){const i=s.let("missing");if(l||u){const n=s.let("valid",!0);r.block$data(n,(()=>function(i,n){r.setParams({missingProperty:i}),s.forOf(i,o,(()=>{s.assign(n,(0,t.propertyInData)(s,a,i,h.ownProperties)),s.if((0,e.not)(n),(()=>{r.error(),s.break()}))}),e.nil)}(i,n))),r.ok(n)}else s.if((0,t.checkMissingProp)(r,n,i)),(0,t.reportMissingProp)(r,i),s.else()}(),h.strictRequired){const t=r.parentSchema.properties,{definedProperties:e}=r.it;for(const r of n)if(void 0===(null==t?void 0:t[r])&&!e.has(r)){const t=`required property "${r}" is not defined at "${c.schemaEnv.baseId+c.errSchemaPath}" (strictRequired)`;(0,i.checkStrictMode)(c,t,c.opts.strictRequired)}}function f(){s.forOf("prop",o,(e=>{r.setParams({missingProperty:e}),s.if((0,t.noPropertyInData)(s,a,e,h.ownProperties),(()=>r.error()))}))}}};return Wo.default=r,Wo}var Yo,Xo={};var ta,ea,ia={},ra={};function sa(){if(ta)return ra;ta=1,Object.defineProperty(ra,"W",{value:!0});const t=Jn();return t.code='require("ajv/dist/runtime/equal").default',ra.default=t,ra}function na(){if(ea)return ia;ea=1,Object.defineProperty(ia,"W",{value:!0});const t=qn(),e=$n(),i=yn(),r=sa(),s={message:({params:{i:t,j:i}})=>e.str`must NOT have duplicate items (items ## ${i} and ${t} are identical)`,params:({params:{i:t,j:i}})=>e._`{i: ${t}, j: ${i}}`},n={keyword:"uniqueItems",type:"array",schemaType:"boolean",$data:!0,error:s,code(s){const{gen:n,data:o,$data:a,schema:u,parentSchema:c,schemaCode:h,it:l}=s;if(!a&&!u)return;const f=n.let("valid"),d=c.items?(0,t.getSchemaTypes)(c.items):[];function p(i,r){const a=n.name("item"),u=(0,t.checkDataTypes)(d,a,l.opts.strictNumbers,t.DataType.Wrong),c=n.const("indices",e._`{}`);n.for(e._`;${i}--;`,(()=>{n.let(a,e._`${o}[${i}]`),n.if(u,e._`continue`),d.length>1&&n.if(e._`typeof ${a} == "string"`,e._`${a} += "_"`),n.if(e._`typeof ${c}[${a}] == "number"`,(()=>{n.assign(r,e._`${c}[${a}]`),s.error(),n.assign(f,!1).break()})).code(e._`${c}[${a}] = ${i}`)}))}function m(t,a){const u=(0,i.useFunc)(n,r.default),c=n.name("outer");n.label(c).for(e._`;${t}--;`,(()=>n.for(e._`${a} = ${t}; ${a}--;`,(()=>n.if(e._`${u}(${o}[${t}], ${o}[${a}])`,(()=>{s.error(),n.assign(f,!1).break(c)}))))))}s.block$data(f,(function(){const t=n.let("i",e._`${o}.length`),i=n.let("j");s.setParams({i:t,j:i}),n.assign(f,!0),n.if(e._`${t} > 1`,(()=>(d.length>0&&!d.some((t=>"object"===t||"array"===t))?p:m)(t,i)))}),e._`${h} === false`),s.ok(f)}};return ia.default=n,ia}var oa,aa={};var ua,ca,ha={};function la(){if(ua)return ha;ua=1,Object.defineProperty(ha,"W",{value:!0});const t=$n(),e=yn(),i=sa(),r={keyword:"enum",schemaType:"array",$data:!0,error:{message:"must be equal to one of the allowed values",params:({schemaCode:e})=>t._`{allowedValues: ${e}}`},code(r){const{gen:s,data:n,$data:o,schema:a,schemaCode:u,it:c}=r;if(!o&&0===a.length)throw new Error("enum must have non-empty array");const h=a.length>=c.opts.loopEnum;let l;const f=()=>null!=l?l:l=(0,e.useFunc)(s,i.default);let d;if(h||o)d=s.let("valid"),r.block$data(d,(function(){s.assign(d,!1),s.forOf("v",u,(e=>s.if(t._`${f()}(${n}, ${e})`,(()=>s.assign(d,!0).break()))))}));else{if(!Array.isArray(a))throw new Error("ajv implementation error");const e=s.const("vSchema",u);d=(0,t.or)(...a.map(((i,r)=>function(e,i){const r=a[i];return"object"==typeof r&&null!==r?t._`${f()}(${n}, ${e}[${i}])`:t._`${n} === ${r}`}(e,r))))}r.pass(d)}};return ha.default=r,ha}function fa(){if(ca)return Po;ca=1,Object.defineProperty(Po,"W",{value:!0});const t=function(){if(Io)return To;Io=1,Object.defineProperty(To,"W",{value:!0});const t=$n(),e=t.operators,i={maximum:{okStr:"<=",ok:e.LTE,fail:e.GT},minimum:{okStr:">=",ok:e.GTE,fail:e.LT},exclusiveMaximum:{okStr:"<",ok:e.LT,fail:e.GTE},exclusiveMinimum:{okStr:">",ok:e.GT,fail:e.LTE}},r={message:({keyword:e,schemaCode:r})=>t.str`must be ${i[e].okStr} ${r}`,params:({keyword:e,schemaCode:r})=>t._`{comparison: ${i[e].okStr}, limit: ${r}}`},s={keyword:Object.keys(i),type:"number",schemaType:"number",$data:!0,error:r,code(e){const{keyword:r,data:s,schemaCode:n}=e;e.fail$data(t._`${s} ${i[r].fail} ${n} || isNaN(${s})`)}};return To.default=s,To}(),e=function(){if(No)return Mo;No=1,Object.defineProperty(Mo,"W",{value:!0});const t=$n(),e={keyword:"multipleOf",type:"number",schemaType:"number",$data:!0,error:{message:({schemaCode:e})=>t.str`must be multiple of ${e}`,params:({schemaCode:e})=>t._`{multipleOf: ${e}}`},code(e){const{gen:i,data:r,schemaCode:s,it:n}=e,o=n.opts.multipleOfPrecision,a=i.let("res"),u=o?t._`Math.abs(Math.round(${a}) - ${a}) > 1e-${o}`:t._`${a} !== parseInt(${a})`;e.fail$data(t._`(${s} === 0 || (${a} = ${r}/${s}, ${u}))`)}};return Mo.default=e,Mo}(),i=Vo(),r=function(){if(Ho)return Zo;Ho=1,Object.defineProperty(Zo,"W",{value:!0});const t=Bn(),e=$n(),i={keyword:"pattern",type:"string",schemaType:"string",$data:!0,error:{message:({schemaCode:t})=>e.str`must match pattern "${t}"`,params:({schemaCode:t})=>e._`{pattern: ${t}}`},code(i){const{data:r,$data:s,schema:n,schemaCode:o,it:a}=i,u=a.opts.unicodeRegExp?"u":"",c=s?e._`(new RegExp(${o}, ${u}))`:(0,t.usePattern)(i,n);i.fail$data(e._`!${c}.test(${r})`)}};return Zo.default=i,Zo}(),s=function(){if(Go)return Jo;Go=1,Object.defineProperty(Jo,"W",{value:!0});const t=$n(),e={message({keyword:e,schemaCode:i}){const r="maxProperties"===e?"more":"fewer";return t.str`must NOT have ${r} than ${i} properties`},params:({schemaCode:e})=>t._`{limit: ${e}}`},i={keyword:["maxProperties","minProperties"],type:"object",schemaType:"number",$data:!0,error:e,code(e){const{keyword:i,data:r,schemaCode:s}=e,n="maxProperties"===i?t.operators.GT:t.operators.LT;e.fail$data(t._`Object.keys(${r}).length ${n} ${s}`)}};return Jo.default=i,Jo}(),n=Qo(),o=function(){if(Yo)return Xo;Yo=1,Object.defineProperty(Xo,"W",{value:!0});const t=$n(),e={message({keyword:e,schemaCode:i}){const r="maxItems"===e?"more":"fewer";return t.str`must NOT have ${r} than ${i} items`},params:({schemaCode:e})=>t._`{limit: ${e}}`},i={keyword:["maxItems","minItems"],type:"array",schemaType:"number",$data:!0,error:e,code(e){const{keyword:i,data:r,schemaCode:s}=e,n="maxItems"===i?t.operators.GT:t.operators.LT;e.fail$data(t._`${r}.length ${n} ${s}`)}};return Xo.default=i,Xo}(),a=na(),u=function(){if(oa)return aa;oa=1,Object.defineProperty(aa,"W",{value:!0});const t=$n(),e=yn(),i=sa(),r={keyword:"const",$data:!0,error:{message:"must be equal to constant",params:({schemaCode:e})=>t._`{allowedValue: ${e}}`},code(r){const{gen:s,data:n,$data:o,schemaCode:a,schema:u}=r;o||u&&"object"==typeof u?r.fail$data(t._`!${(0,e.useFunc)(s,i.default)}(${n}, ${a})`):r.fail(t._`${u} !== ${n}`)}};return aa.default=r,aa}(),c=la(),h=[t.default,e.default,i.default,r.default,s.default,n.default,o.default,a.default,{keyword:"type",schemaType:["string","array"]},{keyword:"nullable",schemaType:"boolean"},u.default,c.default];return Po.default=h,Po}var da,pa={},ma={};function $a(){if(da)return ma;da=1,Object.defineProperty(ma,"W",{value:!0}),ma.validateAdditionalItems=void 0;const t=$n(),e=yn(),i={keyword:"additionalItems",type:"array",schemaType:["boolean","object"],before:"uniqueItems",error:{message:({params:{len:e}})=>t.str`must NOT have more than ${e} items`,params:({params:{len:e}})=>t._`{limit: ${e}}`},code(t){const{parentSchema:i,it:s}=t,{items:n}=i;Array.isArray(n)?r(t,n):(0,e.checkStrictMode)(s,'"additionalItems" is ignored when "items" is not an array of schemas')}};function r(i,r){const{gen:s,schema:n,data:o,keyword:a,it:u}=i;u.items=!0;const c=s.const("len",t._`${o}.length`);if(!1===n)i.setParams({len:r.length}),i.pass(t._`${c} <= ${r.length}`);else if("object"==typeof n&&!(0,e.alwaysValidSchema)(u,n)){const n=s.var("valid",t._`${c} <= ${r.length}`);s.if((0,t.not)(n),(()=>function(n){s.forRange("i",r.length,c,(r=>{i.subschema({keyword:a,dataProp:r,dataPropType:e.Type.Num},n),u.allErrors||s.if((0,t.not)(n),(()=>s.break()))}))}(n))),i.ok(n)}}return ma.validateAdditionalItems=r,ma.default=i,ma}var ga,ba,ya={},va={};function wa(){if(ga)return va;ga=1,Object.defineProperty(va,"W",{value:!0}),va.validateTuple=void 0;const t=$n(),e=yn(),i=Bn(),r={keyword:"items",type:"array",schemaType:["object","array","boolean"],before:"uniqueItems",code(t){const{schema:r,it:n}=t;if(Array.isArray(r))return s(t,"additionalItems",r);n.items=!0,(0,e.alwaysValidSchema)(n,r)||t.ok((0,i.validateArray)(t))}};function s(i,r,s=i.schema){const{gen:n,parentSchema:o,data:a,keyword:u,it:c}=i;!function(t){const{opts:i,errSchemaPath:n}=c,o=s.length,a=o===t.minItems&&(o===t.maxItems||!1===t[r]);if(i.strictTuples&&!a){const t=`"${u}" is ${o}-tuple, but minItems or maxItems/${r} are not specified or different at path "${n}"`;(0,e.checkStrictMode)(c,t,i.strictTuples)}}(o),c.opts.unevaluated&&s.length&&!0!==c.items&&(c.items=e.mergeEvaluated.items(n,s.length,c.items));const h=n.name("valid"),l=n.const("len",t._`${a}.length`);s.forEach(((r,s)=>{(0,e.alwaysValidSchema)(c,r)||(n.if(t._`${l} > ${s}`,(()=>i.subschema({keyword:u,schemaProp:s,dataProp:s},h))),i.ok(h))}))}return va.validateTuple=s,va.default=r,va}var ka,Ea={};var Da,xa={};function Fa(){if(Da)return xa;Da=1,Object.defineProperty(xa,"W",{value:!0});const t=$n(),e=yn(),i={keyword:"contains",type:"array",schemaType:["object","boolean"],before:"uniqueItems",trackErrors:!0,error:{message:({params:{min:e,max:i}})=>void 0===i?t.str`must contain at least ${e} valid item(s)`:t.str`must contain at least ${e} and no more than ${i} valid item(s)`,params:({params:{min:e,max:i}})=>void 0===i?t._`{minContains: ${e}}`:t._`{minContains: ${e}, maxContains: ${i}}`},code(i){const{gen:r,schema:s,parentSchema:n,data:o,it:a}=i;let u,c;const{minContains:h,maxContains:l}=n;a.opts.next?(u=void 0===h?1:h,c=l):u=1;const f=r.const("len",t._`${o}.length`);if(i.setParams({min:u,max:c}),void 0===c&&0===u)return void(0,e.checkStrictMode)(a,'"minContains" == 0 without "maxContains": "contains" keyword ignored');if(void 0!==c&&u>c)return(0,e.checkStrictMode)(a,'"minContains" > "maxContains" is always invalid'),void i.fail();if((0,e.alwaysValidSchema)(a,s)){let e=t._`${f} >= ${u}`;return void 0!==c&&(e=t._`${e} && ${f} <= ${c}`),void i.pass(e)}a.items=!0;const d=r.name("valid");function p(){const e=r.name("_valid"),i=r.let("count",0);m(e,(()=>r.if(e,(()=>function(e){r.code(t._`${e}++`),void 0===c?r.if(t._`${e} >= ${u}`,(()=>r.assign(d,!0).break())):(r.if(t._`${e} > ${c}`,(()=>r.assign(d,!1).break())),1===u?r.assign(d,!0):r.if(t._`${e} >= ${u}`,(()=>r.assign(d,!0))))}(i)))))}function m(t,s){r.forRange("i",0,f,(r=>{i.subschema({keyword:"contains",dataProp:r,dataPropType:e.Type.Num,compositeRule:!0},t),s()}))}void 0===c&&1===u?m(d,(()=>r.if(d,(()=>r.break())))):0===u?(r.let(d,!0),void 0!==c&&r.if(t._`${o}.length > 0`,p)):(r.let(d,!1),p()),i.result(d,(()=>i.reset()))}};return xa.default=i,xa}var _a,Aa={};function ja(){return _a||(_a=1,function(t){Object.defineProperty(t,"W",{value:!0}),t.validateSchemaDeps=t.validatePropertyDeps=t.error=void 0;const e=$n(),i=yn(),r=Bn();t.error={message:({params:{property:t,depsCount:i,deps:r}})=>{const s=1===i?"property":"properties";return e.str`must have ${s} ${r} when property ${t} is present`},params:({params:{property:t,depsCount:i,deps:r,missingProperty:s}})=>e._`{property: ${t},
    missingProperty: ${s},
    depsCount: ${i},
    deps: ${r}}`};const s={keyword:"dependencies",type:"object",schemaType:"object",error:t.error,code(t){const[e,i]=function({schema:t}){const e={},i={};for(const r in t){if("__proto__"===r)continue;(Array.isArray(t[r])?e:i)[r]=t[r]}return[e,i]}(t);n(t,e),o(t,i)}};function n(t,i=t.schema){const{gen:s,data:n,it:o}=t;if(0===Object.keys(i).length)return;const a=s.let("missing");for(const u in i){const c=i[u];if(0===c.length)continue;const h=(0,r.propertyInData)(s,n,u,o.opts.ownProperties);t.setParams({property:u,depsCount:c.length,deps:c.join(", ")}),o.allErrors?s.if(h,(()=>{for(const e of c)(0,r.checkReportMissingProp)(t,e)})):(s.if(e._`${h} && (${(0,r.checkMissingProp)(t,c,a)})`),(0,r.reportMissingProp)(t,a),s.else())}}function o(t,e=t.schema){const{gen:s,data:n,keyword:o,it:a}=t,u=s.name("valid");for(const c in e)(0,i.alwaysValidSchema)(a,e[c])||(s.if((0,r.propertyInData)(s,n,c,a.opts.ownProperties),(()=>{const e=t.subschema({keyword:o,schemaProp:c},u);t.mergeValidEvaluated(e,u)}),(()=>s.var(u,!0))),t.ok(u))}t.validatePropertyDeps=n,t.validateSchemaDeps=o,t.default=s}(Aa)),Aa}var Ca,za={};var Sa,Oa={};function qa(){if(Sa)return Oa;Sa=1,Object.defineProperty(Oa,"W",{value:!0});const t=Bn(),e=$n(),i=Dn(),r=yn(),s={keyword:"additionalProperties",type:["object"],schemaType:["boolean","object"],allowUndefined:!0,trackErrors:!0,error:{message:"must NOT have additional properties",params:({params:t})=>e._`{additionalProperty: ${t.additionalProperty}}`},code(s){const{gen:n,schema:o,parentSchema:a,data:u,errsCount:c,it:h}=s;if(!c)throw new Error("ajv implementation error");const{allErrors:l,opts:f}=h;if(h.props=!0,"all"!==f.removeAdditional&&(0,r.alwaysValidSchema)(h,o))return;const d=(0,t.allSchemaProperties)(a.properties),p=(0,t.allSchemaProperties)(a.patternProperties);function m(t){n.code(e._`delete ${u}[${t}]`)}function $(t){if("all"===f.removeAdditional||f.removeAdditional&&!1===o)m(t);else{if(!1===o)return s.setParams({additionalProperty:t}),s.error(),void(l||n.break());if("object"==typeof o&&!(0,r.alwaysValidSchema)(h,o)){const i=n.name("valid");"failing"===f.removeAdditional?(g(t,i,!1),n.if((0,e.not)(i),(()=>{s.reset(),m(t)}))):(g(t,i),l||n.if((0,e.not)(i),(()=>n.break())))}}}function g(t,e,i){const n={keyword:"additionalProperties",dataProp:t,dataPropType:r.Type.Str};!1===i&&Object.assign(n,{compositeRule:!0,createErrors:!1,allErrors:!1}),s.subschema(n,e)}n.forIn("key",u,(i=>{d.length||p.length?n.if(function(i){let o;if(d.length>8){const e=(0,r.schemaRefOrVal)(h,a.properties,"properties");o=(0,t.isOwnProperty)(n,e,i)}else o=d.length?(0,e.or)(...d.map((t=>e._`${i} === ${t}`))):e.nil;return p.length&&(o=(0,e.or)(o,...p.map((r=>e._`${(0,t.usePattern)(s,r)}.test(${i})`)))),(0,e.not)(o)}(i),(()=>$(i))):$(i)})),s.ok(e._`${c} === ${i.default.errors}`)}};return Oa.default=s,Oa}var Ia,Pa={};var Ta,Na={};var Ma,Ra={};var Ba,La={};var Ua,Va={};var Ha,Za={};var Ga,Ja={};var Ka,Wa,Qa={};function Ya(){if(Wa)return pa;Wa=1,Object.defineProperty(pa,"W",{value:!0});const t=$a(),e=function(){if(ba)return ya;ba=1,Object.defineProperty(ya,"W",{value:!0});const t=wa(),e={keyword:"prefixItems",type:"array",schemaType:["array"],before:"uniqueItems",code:e=>(0,t.validateTuple)(e,"items")};return ya.default=e,ya}(),i=wa(),r=function(){if(ka)return Ea;ka=1,Object.defineProperty(Ea,"W",{value:!0});const t=$n(),e=yn(),i=Bn(),r=$a(),s={keyword:"items",type:"array",schemaType:["object","boolean"],before:"uniqueItems",error:{message:({params:{len:e}})=>t.str`must NOT have more than ${e} items`,params:({params:{len:e}})=>t._`{limit: ${e}}`},code(t){const{schema:s,parentSchema:n,it:o}=t,{prefixItems:a}=n;o.items=!0,(0,e.alwaysValidSchema)(o,s)||(a?(0,r.validateAdditionalItems)(t,a):t.ok((0,i.validateArray)(t)))}};return Ea.default=s,Ea}(),s=Fa(),n=ja(),o=function(){if(Ca)return za;Ca=1,Object.defineProperty(za,"W",{value:!0});const t=$n(),e=yn(),i={keyword:"propertyNames",type:"object",schemaType:["object","boolean"],error:{message:"property name must be valid",params:({params:e})=>t._`{propertyName: ${e.propertyName}}`},code(i){const{gen:r,schema:s,data:n,it:o}=i;if((0,e.alwaysValidSchema)(o,s))return;const a=r.name("valid");r.forIn("key",n,(e=>{i.setParams({propertyName:e}),i.subschema({keyword:"propertyNames",data:e,dataTypes:["string"],propertyName:e,compositeRule:!0},a),r.if((0,t.not)(a),(()=>{i.error(!0),o.allErrors||r.break()}))})),i.ok(a)}};return za.default=i,za}(),a=qa(),u=function(){if(Ia)return Pa;Ia=1,Object.defineProperty(Pa,"W",{value:!0});const t=eo(),e=Bn(),i=yn(),r=qa(),s={keyword:"properties",type:"object",schemaType:"object",code(s){const{gen:n,schema:o,parentSchema:a,data:u,it:c}=s;"all"===c.opts.removeAdditional&&void 0===a.additionalProperties&&r.default.code(new t.KeywordCxt(c,r.default,"additionalProperties"));const h=(0,e.allSchemaProperties)(o);for(const t of h)c.definedProperties.add(t);c.opts.unevaluated&&h.length&&!0!==c.props&&(c.props=i.mergeEvaluated.props(n,(0,i.toHash)(h),c.props));const l=h.filter((t=>!(0,i.alwaysValidSchema)(c,o[t])));if(0===l.length)return;const f=n.name("valid");for(const t of l)d(t)?p(t):(n.if((0,e.propertyInData)(n,u,t,c.opts.ownProperties)),p(t),c.allErrors||n.else().var(f,!0),n.endIf()),s.it.definedProperties.add(t),s.ok(f);function d(t){return c.opts.useDefaults&&!c.compositeRule&&void 0!==o[t].default}function p(t){s.subschema({keyword:"properties",schemaProp:t,dataProp:t},f)}}};return Pa.default=s,Pa}(),c=function(){if(Ta)return Na;Ta=1,Object.defineProperty(Na,"W",{value:!0});const t=Bn(),e=$n(),i=yn(),r=yn(),s={keyword:"patternProperties",type:"object",schemaType:"object",code(s){const{gen:n,schema:o,data:a,parentSchema:u,it:c}=s,{opts:h}=c,l=(0,t.allSchemaProperties)(o),f=l.filter((t=>(0,i.alwaysValidSchema)(c,o[t])));if(0===l.length||f.length===l.length&&(!c.opts.unevaluated||!0===c.props))return;const d=h.strictSchema&&!h.allowMatchingProperties&&u.properties,p=n.name("valid");!0===c.props||c.props instanceof e.Name||(c.props=(0,r.evaluatedPropsToName)(n,c.props));const{props:m}=c;function $(t){for(const e in d)new RegExp(t).test(e)&&(0,i.checkStrictMode)(c,`property ${e} matches pattern ${t} (use allowMatchingProperties)`)}function g(i){n.forIn("key",a,(o=>{n.if(e._`${(0,t.usePattern)(s,i)}.test(${o})`,(()=>{const t=f.includes(i);t||s.subschema({keyword:"patternProperties",schemaProp:i,dataProp:o,dataPropType:r.Type.Str},p),c.opts.unevaluated&&!0!==m?n.assign(e._`${m}[${o}]`,!0):t||c.allErrors||n.if((0,e.not)(p),(()=>n.break()))}))}))}!function(){for(const t of l)d&&$(t),c.allErrors?g(t):(n.var(p,!0),g(t),n.if(p))}()}};return Na.default=s,Na}(),h=function(){if(Ma)return Ra;Ma=1,Object.defineProperty(Ra,"W",{value:!0});const t=yn(),e={keyword:"not",schemaType:["object","boolean"],trackErrors:!0,code(e){const{gen:i,schema:r,it:s}=e;if((0,t.alwaysValidSchema)(s,r))return void e.fail();const n=i.name("valid");e.subschema({keyword:"not",compositeRule:!0,createErrors:!1,allErrors:!1},n),e.failResult(n,(()=>e.reset()),(()=>e.error()))},error:{message:"must NOT be valid"}};return Ra.default=e,Ra}(),l=function(){if(Ba)return La;Ba=1,Object.defineProperty(La,"W",{value:!0});const t={keyword:"anyOf",schemaType:"array",trackErrors:!0,code:Bn().validateUnion,error:{message:"must match a schema in anyOf"}};return La.default=t,La}(),f=function(){if(Ua)return Va;Ua=1,Object.defineProperty(Va,"W",{value:!0});const t=$n(),e=yn(),i={keyword:"oneOf",schemaType:"array",trackErrors:!0,error:{message:"must match exactly one schema in oneOf",params:({params:e})=>t._`{passingSchemas: ${e.passing}}`},code(i){const{gen:r,schema:s,parentSchema:n,it:o}=i;if(!Array.isArray(s))throw new Error("ajv implementation error");if(o.opts.discriminator&&n.discriminator)return;const a=s,u=r.let("valid",!1),c=r.let("passing",null),h=r.name("_valid");i.setParams({passing:c}),r.block((function(){a.forEach(((s,n)=>{let a;(0,e.alwaysValidSchema)(o,s)?r.var(h,!0):a=i.subschema({keyword:"oneOf",schemaProp:n,compositeRule:!0},h),n>0&&r.if(t._`${h} && ${u}`).assign(u,!1).assign(c,t._`[${c}, ${n}]`).else(),r.if(h,(()=>{r.assign(u,!0),r.assign(c,n),a&&i.mergeEvaluated(a,t.Name)}))}))})),i.result(u,(()=>i.reset()),(()=>i.error(!0)))}};return Va.default=i,Va}(),d=function(){if(Ha)return Za;Ha=1,Object.defineProperty(Za,"W",{value:!0});const t=yn(),e={keyword:"allOf",schemaType:"array",code(e){const{gen:i,schema:r,it:s}=e;if(!Array.isArray(r))throw new Error("ajv implementation error");const n=i.name("valid");r.forEach(((i,r)=>{if((0,t.alwaysValidSchema)(s,i))return;const o=e.subschema({keyword:"allOf",schemaProp:r},n);e.ok(n),e.mergeEvaluated(o)}))}};return Za.default=e,Za}(),p=function(){if(Ga)return Ja;Ga=1,Object.defineProperty(Ja,"W",{value:!0});const t=$n(),e=yn(),i={keyword:"if",schemaType:["object","boolean"],trackErrors:!0,error:{message:({params:e})=>t.str`must match "${e.ifClause}" schema`,params:({params:e})=>t._`{failingKeyword: ${e.ifClause}}`},code(i){const{gen:s,parentSchema:n,it:o}=i;void 0===n.then&&void 0===n.else&&(0,e.checkStrictMode)(o,'"if" without "then" and "else" is ignored');const a=r(o,"then"),u=r(o,"else");if(!a&&!u)return;const c=s.let("valid",!0),h=s.name("_valid");if(function(){const t=i.subschema({keyword:"if",compositeRule:!0,createErrors:!1,allErrors:!1},h);i.mergeEvaluated(t)}(),i.reset(),a&&u){const t=s.let("ifClause");i.setParams({ifClause:t}),s.if(h,l("then",t),l("else",t))}else a?s.if(h,l("then")):s.if((0,t.not)(h),l("else"));function l(e,r){return()=>{const n=i.subschema({keyword:e},h);s.assign(c,h),i.mergeValidEvaluated(n,c),r?s.assign(r,t._`${e}`):i.setParams({ifClause:e})}}i.pass(c,(()=>i.error(!0)))}};function r(t,i){const r=t.schema[i];return void 0!==r&&!(0,e.alwaysValidSchema)(t,r)}return Ja.default=i,Ja}(),m=function(){if(Ka)return Qa;Ka=1,Object.defineProperty(Qa,"W",{value:!0});const t=yn(),e={keyword:["then","else"],schemaType:["object","boolean"],code({keyword:e,parentSchema:i,it:r}){void 0===i.if&&(0,t.checkStrictMode)(r,`"${e}" without "if" is ignored`)}};return Qa.default=e,Qa}();return pa.default=function($=!1){const g=[h.default,l.default,f.default,d.default,p.default,m.default,o.default,a.default,n.default,u.default,c.default];return $?g.push(e.default,r.default):g.push(t.default,i.default),g.push(s.default),g},pa}var Xa,tu,eu={},iu={};function ru(){if(Xa)return iu;Xa=1,Object.defineProperty(iu,"W",{value:!0});const t=$n(),e={keyword:"format",type:["number","string"],schemaType:"string",$data:!0,error:{message:({schemaCode:e})=>t.str`must match format "${e}"`,params:({schemaCode:e})=>t._`{format: ${e}}`},code(e,i){const{gen:r,data:s,$data:n,schema:o,schemaCode:a,it:u}=e,{opts:c,errSchemaPath:h,schemaEnv:l,self:f}=u;c.validateFormats&&(n?function(){const n=r.scopeValue("formats",{ref:f.formats,code:c.code.formats}),o=r.const("fDef",t._`${n}[${a}]`),u=r.let("fType"),h=r.let("format");r.if(t._`typeof ${o} == "object" && !(${o} instanceof RegExp)`,(()=>r.assign(u,t._`${o}.type || "string"`).assign(h,t._`${o}.validate`)),(()=>r.assign(u,t._`"string"`).assign(h,o))),e.fail$data((0,t.or)(!1===c.strictSchema?t.nil:t._`${a} && !${h}`,function(){const e=l.$async?t._`(${o}.async ? await ${h}(${s}) : ${h}(${s}))`:t._`${h}(${s})`,r=t._`(typeof ${h} == "function" ? ${e} : ${h}.test(${s}))`;return t._`${h} && ${h} !== true && ${u} === ${i} && !${r}`}()))}():function(){const n=f.formats[o];if(!n)return void function(){if(!1===c.strictSchema)return void f.logger.warn(t());throw new Error(t());function t(){return`unknown format "${o}" ignored in schema at path "${h}"`}}();if(!0===n)return;const[a,u,d]=function(e){const i=e instanceof RegExp?(0,t.regexpCode)(e):c.code.formats?t._`${c.code.formats}${(0,t.getProperty)(o)}`:void 0,s=r.scopeValue("formats",{key:o,ref:e,code:i});if("object"==typeof e&&!(e instanceof RegExp))return[e.type||"string",e.validate,t._`${s}.validate`];return["string",e,s]}(n);a===i&&e.pass(function(){if("object"==typeof n&&!(n instanceof RegExp)&&n.async){if(!l.$async)throw new Error("async format in sync schema");return t._`await ${d}(${s})`}return"function"==typeof u?t._`${d}(${s})`:t._`${d}.test(${s})`}())}())}};return iu.default=e,iu}var su,nu,ou={};function au(){if(nu)return Ao;nu=1,Object.defineProperty(Ao,"W",{value:!0});const t=qo(),e=fa(),i=Ya(),r=function(){if(tu)return eu;tu=1,Object.defineProperty(eu,"W",{value:!0});const t=[ru().default];return eu.default=t,eu}(),s=(su||(su=1,Object.defineProperty(ou,"W",{value:!0}),ou.contentVocabulary=ou.metadataVocabulary=void 0,ou.metadataVocabulary=["title","description","default","deprecated","readOnly","writeOnly","examples"],ou.contentVocabulary=["contentMediaType","contentEncoding","contentSchema"]),ou),n=[t.default,e.default,(0,i.default)(),r.default,s.metadataVocabulary,s.contentVocabulary];return Ao.default=n,Ao}var uu,cu,hu={},lu={};function fu(){if(cu)return hu;cu=1,Object.defineProperty(hu,"W",{value:!0});const t=$n(),e=(uu||(uu=1,Object.defineProperty(lu,"W",{value:!0}),lu.DiscrError=void 0,function(t){t.Tag="tag",t.Mapping="mapping"}(i||(lu.DiscrError=i={}))),lu);var i;const r=ho(),s=ao(),n=yn(),o={keyword:"discriminator",type:"object",schemaType:"object",error:{message:({params:{discrError:t,tagName:i}})=>t===e.DiscrError.Tag?`tag "${i}" must be string`:`value of tag "${i}" must be in oneOf`,params:({params:{discrError:e,tag:i,tagName:r}})=>t._`{error: ${e}, tag: ${r}, tagValue: ${i}}`},code(i){const{gen:o,data:a,schema:u,parentSchema:c,it:h}=i,{oneOf:l}=c;if(!h.opts.discriminator)throw new Error("discriminator: requires discriminator option");const f=u.propertyName;if("string"!=typeof f)throw new Error("discriminator: requires propertyName");if(u.mapping)throw new Error("discriminator: mapping is not supported");if(!l)throw new Error("discriminator: requires oneOf keyword");const d=o.let("valid",!1),p=o.const("tag",t._`${a}${(0,t.getProperty)(f)}`);function m(e){const r=o.name("valid"),s=i.subschema({keyword:"oneOf",schemaProp:e},r);return i.mergeEvaluated(s,t.Name),r}o.if(t._`typeof ${p} == "string"`,(()=>function(){const a=function(){var t;const e={},i=a(c);let o=!0;for(let e=0;e<l.length;e++){let c=l[e];if((null==c?void 0:c.$ref)&&!(0,n.schemaHasRulesButRef)(c,h.self.RULES)){const t=c.$ref;if(c=r.resolveRef.call(h.self,h.schemaEnv.root,h.baseId,t),c instanceof r.SchemaEnv&&(c=c.schema),void 0===c)throw new s.default(h.opts.uriResolver,h.baseId,t)}const d=null===(t=null==c?void 0:c.properties)||void 0===t?void 0:t[f];if("object"!=typeof d)throw new Error(`discriminator: oneOf subschemas (or referenced schemas) must have "properties/${f}"`);o=o&&(i||a(c)),u(d,e)}if(!o)throw new Error(`discriminator: "${f}" must be required`);return e;function a({required:t}){return Array.isArray(t)&&t.includes(f)}function u(t,e){if(t.const)d(t.const,e);else{if(!t.enum)throw new Error(`discriminator: "properties/${f}" must have "const" or "enum"`);for(const i of t.enum)d(i,e)}}function d(t,i){if("string"!=typeof t||t in e)throw new Error(`discriminator: "${f}" values must be unique strings`);e[t]=i}}();o.if(!1);for(const e in a)o.elseIf(t._`${p} === ${e}`),o.assign(d,m(a[e]));o.else(),i.error(!1,{discrError:e.DiscrError.Mapping,tag:p,tagName:f}),o.endIf()}()),(()=>i.error(!1,{discrError:e.DiscrError.Tag,tag:p,tagName:f}))),i.ok(d)}};return hu.default=o,hu}var du,pu={$schema:"http://json-schema.org/draft-07/schema#",$id:"http://json-schema.org/draft-07/schema#",title:"Core schema meta-schema",definitions:{schemaArray:{type:"array",minItems:1,items:{$ref:"#"}},nonNegativeInteger:{type:"integer",minimum:0},nonNegativeIntegerDefault0:{allOf:[{$ref:"#/definitions/nonNegativeInteger"},{default:0}]},simpleTypes:{enum:["array","boolean","integer","null","number","object","string"]},stringArray:{type:"array",items:{type:"string"},uniqueItems:!0,default:[]}},type:["object","boolean"],properties:{$id:{type:"string",format:"uri-reference"},$schema:{type:"string",format:"uri"},$ref:{type:"string",format:"uri-reference"},$comment:{type:"string"},title:{type:"string"},description:{type:"string"},default:!0,readOnly:{type:"boolean",default:!1},examples:{type:"array",items:!0},multipleOf:{type:"number",exclusiveMinimum:0},maximum:{type:"number"},exclusiveMaximum:{type:"number"},minimum:{type:"number"},exclusiveMinimum:{type:"number"},maxLength:{$ref:"#/definitions/nonNegativeInteger"},minLength:{$ref:"#/definitions/nonNegativeIntegerDefault0"},pattern:{type:"string",format:"regex"},additionalItems:{$ref:"#"},items:{anyOf:[{$ref:"#"},{$ref:"#/definitions/schemaArray"}],default:!0},maxItems:{$ref:"#/definitions/nonNegativeInteger"},minItems:{$ref:"#/definitions/nonNegativeIntegerDefault0"},uniqueItems:{type:"boolean",default:!1},contains:{$ref:"#"},maxProperties:{$ref:"#/definitions/nonNegativeInteger"},minProperties:{$ref:"#/definitions/nonNegativeIntegerDefault0"},required:{$ref:"#/definitions/stringArray"},additionalProperties:{$ref:"#"},definitions:{type:"object",additionalProperties:{$ref:"#"},default:{}},properties:{type:"object",additionalProperties:{$ref:"#"},default:{}},patternProperties:{type:"object",additionalProperties:{$ref:"#"},propertyNames:{format:"regex"},default:{}},dependencies:{type:"object",additionalProperties:{anyOf:[{$ref:"#"},{$ref:"#/definitions/stringArray"}]}},propertyNames:{$ref:"#"},const:!0,enum:{type:"array",items:!0,minItems:1,uniqueItems:!0},type:{anyOf:[{$ref:"#/definitions/simpleTypes"},{type:"array",items:{$ref:"#/definitions/simpleTypes"},minItems:1,uniqueItems:!0}]},format:{type:"string"},contentMediaType:{type:"string"},contentEncoding:{type:"string"},if:{$ref:"#"},then:{$ref:"#"},else:{$ref:"#"},allOf:{$ref:"#/definitions/schemaArray"},anyOf:{$ref:"#/definitions/schemaArray"},oneOf:{$ref:"#/definitions/schemaArray"},not:{$ref:"#"}},default:!0};function mu(){return du||(du=1,function(t,e){Object.defineProperty(e,"W",{value:!0}),e.MissingRefError=e.ValidationError=e.CodeGen=e.Name=e.nil=e.stringify=e.str=e._=e.KeywordCxt=e.Ajv=void 0;const i=Fo(),r=au(),s=fu(),n=pu,o=["/properties"],a="http://json-schema.org/draft-07/schema";class u extends i.default{_addVocabularies(){super._addVocabularies(),r.default.forEach((t=>this.addVocabulary(t))),this.opts.discriminator&&this.addKeyword(s.default)}_addDefaultMetaSchema(){if(super._addDefaultMetaSchema(),!this.opts.meta)return;const t=this.opts.$data?this.$dataMetaSchema(n,o):n;this.addMetaSchema(t,a,!1),this.refs["http://json-schema.org/schema"]=a}defaultMeta(){return this.opts.defaultMeta=super.defaultMeta()||(this.getSchema(a)?a:void 0)}}e.Ajv=u,t.exports=e=u,t.exports.Ajv=u,Object.defineProperty(e,"W",{value:!0}),e.default=u;var c=eo();Object.defineProperty(e,"KeywordCxt",{enumerable:!0,get:function(){return c.KeywordCxt}});var h=$n();Object.defineProperty(e,"_",{enumerable:!0,get:function(){return h._}}),Object.defineProperty(e,"str",{enumerable:!0,get:function(){return h.str}}),Object.defineProperty(e,"stringify",{enumerable:!0,get:function(){return h.stringify}}),Object.defineProperty(e,"nil",{enumerable:!0,get:function(){return h.nil}}),Object.defineProperty(e,"Name",{enumerable:!0,get:function(){return h.Name}}),Object.defineProperty(e,"CodeGen",{enumerable:!0,get:function(){return h.CodeGen}});var l=so();Object.defineProperty(e,"ValidationError",{enumerable:!0,get:function(){return l.default}});var f=ao();Object.defineProperty(e,"MissingRefError",{enumerable:!0,get:function(){return f.default}})}(sn,sn.exports)),sn.exports}var $u,gu,bu=en(mu());var yu,vu=(gu||(gu=1,$u=function(t){if(t&&t.length)for(const i of t){let t;switch(i.keyword){case"additionalItems":case"items":case"maxItems":t="",t+="must NOT have more than "+(e=i.params.limit)+" item",1!=e&&(t+="s");break;case"additionalProperties":t="must NOT have additional properties";break;case"anyOf":t='must match a schema in "anyOf"';break;case"const":t="must be equal to constant";break;case"contains":t="must contain a valid item";break;case"dependencies":case"dependentRequired":t="",t+="must have propert",t+=1==(e=i.params.depsCount)?"y":"ies",t+=" "+i.params.deps+" when property "+i.params.property+" is present";break;case"discriminator":switch(i.params.error){case"tag":t='tag "'+i.params.tag+'" must be string';break;case"mapping":t='value of tag "'+i.params.tag+'" must be in oneOf';break;default:t='must pass "'+i.keyword+'" keyword validation'}break;case"enum":t="must be equal to one of the allowed values";break;case"false schema":t="boolean schema is false";break;case"format":t='must match format "'+i.params.format+'"';break;case"formatMaximum":case"formatExclusiveMaximum":case"formatMinimum":case"formatExclusiveMinimum":case"maximum":case"exclusiveMaximum":case"minimum":case"exclusiveMinimum":t="",t+="must be "+i.params.comparison+" "+i.params.limit;break;case"if":t='must match "'+i.params.failingKeyword+'" schema';break;case"maxLength":t="",t+="must NOT be longer than "+(e=i.params.limit)+" character",1!=e&&(t+="s");break;case"maxProperties":t="",t+="must NOT have more than "+(e=i.params.limit)+" propert",t+=1==e?"y":"ies";break;case"minItems":t="",t+="must NOT have less than "+(e=i.params.limit)+" item",1!=e&&(t+="s");break;case"minLength":t="",t+="must NOT be shorter than "+(e=i.params.limit)+" character",1!=e&&(t+="s");break;case"minProperties":t="",t+="must NOT have less than "+(e=i.params.limit)+" propert",t+=1==e?"y":"ies";break;case"multipleOf":t="must be a multiple of "+i.params.multipleOf;break;case"not":t='must NOT be valid according to schema in "not"';break;case"oneOf":t='must match exactly one schema in "oneOf"';break;case"pattern":t='must match pattern "'+i.params.pattern+'"';break;case"patternRequired":t='must have property matching pattern "'+i.params.missingPattern+'"';break;case"propertyNames":t="property name is invalid";break;case"required":t="must have required property "+i.params.missingProperty;break;case"type":t="must be "+i.params.type;break;case"unevaluatedItems":var e;t="",t+="must NOT have more than "+(e=i.params.len)+" item",1!=e&&(t+="s");break;case"unevaluatedProperties":t="must NOT have unevaluated properties";break;case"uniqueItems":t="must NOT have duplicate items (items ## "+i.params.j+" and "+i.params.i+" are identical)";break;default:t='must pass "'+i.keyword+'" keyword validation'}i.message=t}}),$u),wu=en(vu),ku={exports:{}},Eu={};var Du,xu,Fu={};var _u=(xu||(xu=1,function(t,e){Object.defineProperty(e,"W",{value:!0});const i=(yu||(yu=1,function(t){function e(t,e){return{validate:t,compare:e}}Object.defineProperty(t,"W",{value:!0}),t.formatNames=t.fastFormats=t.fullFormats=void 0,t.fullFormats={date:e(s,n),time:e(a(!0),u),"date-time":e(l(!0),f),"iso-time":e(a(),c),"iso-date-time":e(l(),d),duration:/^P(?!$)((\d+Y)?(\d+M)?(\d+D)?(T(?=\d)(\d+H)?(\d+M)?(\d+S)?)?|(\d+W)?)$/,uri:function(t){return p.test(t)&&m.test(t)},"uri-reference":/^(?:[a-z][a-z0-9+\-.]*:)?(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'"()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?(?:\?(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i,"uri-template":/^(?:(?:[^\x00-\x20"'<>%\\^`{|}]|%[0-9a-f]{2})|\{[+#./;?&=,!@|]?(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?(?:,(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?)*\})*$/i,url:/^(?:https?|ftp):\/\/(?:\S+(?::\S*)?@)?(?:(?!(?:10|127)(?:\.\d{1,3}){3})(?!(?:169\.254|192\.168)(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z0-9\u{00a1}-\u{ffff}]+-)*[a-z0-9\u{00a1}-\u{ffff}]+)(?:\.(?:[a-z0-9\u{00a1}-\u{ffff}]+-)*[a-z0-9\u{00a1}-\u{ffff}]+)*(?:\.(?:[a-z\u{00a1}-\u{ffff}]{2,})))(?::\d{2,5})?(?:\/[^\s]*)?$/iu,email:/^[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?$/i,hostname:/^(?=.{1,253}\.?$)[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[-0-9a-z]{0,61}[0-9a-z])?)*\.?$/i,ipv4:/^(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)\.){3}(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)$/,ipv6:/^((([0-9a-f]{1,4}:){7}([0-9a-f]{1,4}|:))|(([0-9a-f]{1,4}:){6}(:[0-9a-f]{1,4}|((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9a-f]{1,4}:){5}(((:[0-9a-f]{1,4}){1,2})|:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9a-f]{1,4}:){4}(((:[0-9a-f]{1,4}){1,3})|((:[0-9a-f]{1,4})?:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9a-f]{1,4}:){3}(((:[0-9a-f]{1,4}){1,4})|((:[0-9a-f]{1,4}){0,2}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9a-f]{1,4}:){2}(((:[0-9a-f]{1,4}){1,5})|((:[0-9a-f]{1,4}){0,3}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9a-f]{1,4}:){1}(((:[0-9a-f]{1,4}){1,6})|((:[0-9a-f]{1,4}){0,4}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(:(((:[0-9a-f]{1,4}){1,7})|((:[0-9a-f]{1,4}){0,5}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))$/i,regex:function(t){if(v.test(t))return!1;try{return new RegExp(t),!0}catch(t){return!1}},uuid:/^(?:urn:uuid:)?[0-9a-f]{8}-(?:[0-9a-f]{4}-){3}[0-9a-f]{12}$/i,"json-pointer":/^(?:\/(?:[^~/]|~0|~1)*)*$/,"json-pointer-uri-fragment":/^#(?:\/(?:[a-z0-9_\-.!$&'()*+,;:=@]|%[0-9a-f]{2}|~0|~1)*)*$/i,"relative-json-pointer":/^(?:0|[1-9][0-9]*)(?:#|(?:\/(?:[^~/]|~0|~1)*)*)$/,byte:function(t){return $.lastIndex=0,$.test(t)},int32:{type:"number",validate:function(t){return Number.isInteger(t)&&t<=b&&t>=g}},int64:{type:"number",validate:function(t){return Number.isInteger(t)}},float:{type:"number",validate:y},double:{type:"number",validate:y},password:!0,binary:!0},t.fastFormats={...t.fullFormats,date:e(/^\d\d\d\d-[0-1]\d-[0-3]\d$/,n),time:e(/^(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)$/i,u),"date-time":e(/^\d\d\d\d-[0-1]\d-[0-3]\dt(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)$/i,f),"iso-time":e(/^(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)?$/i,c),"iso-date-time":e(/^\d\d\d\d-[0-1]\d-[0-3]\d[t\s](?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)?$/i,d),uri:/^(?:[a-z][a-z0-9+\-.]*:)(?:\/?\/)?[^\s]*$/i,"uri-reference":/^(?:(?:[a-z][a-z0-9+\-.]*:)?\/?\/)?(?:[^\\\s#][^\s#]*)?(?:#[^\\\s]*)?$/i,email:/^[a-z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?)*$/i},t.formatNames=Object.keys(t.fullFormats);const i=/^(\d\d\d\d)-(\d\d)-(\d\d)$/,r=[0,31,28,31,30,31,30,31,31,30,31,30,31];function s(t){const e=i.exec(t);if(!e)return!1;const s=+e[1],n=+e[2],o=+e[3];return n>=1&&n<=12&&o>=1&&o<=(2===n&&function(t){return t%4==0&&(t%100!=0||t%400==0)}(s)?29:r[n])}function n(t,e){if(t&&e)return t>e?1:t<e?-1:0}const o=/^(\d\d):(\d\d):(\d\d(?:\.\d+)?)(z|([+-])(\d\d)(?::?(\d\d))?)?$/i;function a(t){return function(e){const i=o.exec(e);if(!i)return!1;const r=+i[1],s=+i[2],n=+i[3],a=i[4],u="-"===i[5]?-1:1,c=+(i[6]||0),h=+(i[7]||0);if(c>23||h>59||t&&!a)return!1;if(r<=23&&s<=59&&n<60)return!0;const l=s-h*u,f=r-c*u-(l<0?1:0);return(23===f||-1===f)&&(59===l||-1===l)&&n<61}}function u(t,e){if(!t||!e)return;const i=new Date("2020-01-01T"+t).valueOf(),r=new Date("2020-01-01T"+e).valueOf();return i&&r?i-r:void 0}function c(t,e){if(!t||!e)return;const i=o.exec(t),r=o.exec(e);return i&&r?(t=i[1]+i[2]+i[3])>(e=r[1]+r[2]+r[3])?1:t<e?-1:0:void 0}const h=/t|\s/i;function l(t){const e=a(t);return function(t){const i=t.split(h);return 2===i.length&&s(i[0])&&e(i[1])}}function f(t,e){if(!t||!e)return;const i=new Date(t).valueOf(),r=new Date(e).valueOf();return i&&r?i-r:void 0}function d(t,e){if(!t||!e)return;const[i,r]=t.split(h),[s,o]=e.split(h),a=n(i,s);return void 0!==a?a||u(r,o):void 0}const p=/\/|:/,m=/^(?:[a-z][a-z0-9+\-.]*:)(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)(?:\?(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i,$=/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/gm,g=-2147483648,b=2**31-1;function y(){return!0}const v=/[^\\]\\Z/}(Eu)),Eu),r=(Du||(Du=1,function(t){Object.defineProperty(t,"W",{value:!0}),t.formatLimitDefinition=void 0;const e=mu(),i=$n(),r=i.operators,s={formatMaximum:{okStr:"<=",ok:r.LTE,fail:r.GT},formatMinimum:{okStr:">=",ok:r.GTE,fail:r.LT},formatExclusiveMaximum:{okStr:"<",ok:r.LT,fail:r.GTE},formatExclusiveMinimum:{okStr:">",ok:r.GT,fail:r.LTE}},n={message:({keyword:t,schemaCode:e})=>i.str`should be ${s[t].okStr} ${e}`,params:({keyword:t,schemaCode:e})=>i._`{comparison: ${s[t].okStr}, limit: ${e}}`};t.formatLimitDefinition={keyword:Object.keys(s),type:"string",schemaType:"string",$data:!0,error:n,code(t){const{gen:r,data:n,schemaCode:o,keyword:a,it:u}=t,{opts:c,self:h}=u;if(!c.validateFormats)return;const l=new e.KeywordCxt(u,h.RULES.all.format.definition,"format");function f(t){return i._`${t}.compare(${n}, ${o}) ${s[a].fail} 0`}l.$data?function(){const e=r.scopeValue("formats",{ref:h.formats,code:c.code.formats}),s=r.const("fmt",i._`${e}[${l.schemaCode}]`);t.fail$data((0,i.or)(i._`typeof ${s} != "object"`,i._`${s} instanceof RegExp`,i._`typeof ${s}.compare != "function"`,f(s)))}():function(){const e=l.schema,s=h.formats[e];if(!s||!0===s)return;if("object"!=typeof s||s instanceof RegExp||"function"!=typeof s.compare)throw new Error(`"${a}": format "${e}" does not define "compare" function`);const n=r.scopeValue("formats",{key:e,ref:s,code:c.code.formats?i._`${c.code.formats}${(0,i.getProperty)(e)}`:void 0});t.fail$data(f(n))}()},dependencies:["format"]},t.default=e=>(e.addKeyword(t.formatLimitDefinition),e)}(Fu)),Fu),s=$n(),n=new s.Name("fullFormats"),o=new s.Name("fastFormats"),a=(t,e={keywords:!0})=>{if(Array.isArray(e))return u(t,e,i.fullFormats,n),t;const[s,a]="fast"===e.mode?[i.fastFormats,o]:[i.fullFormats,n];return u(t,e.formats||i.formatNames,s,a),e.keywords&&(0,r.default)(t),t};function u(t,e,i,r){var n,o;null!==(n=(o=t.opts.code).formats)&&void 0!==n||(o.formats=s._`require("ajv-formats/dist/formats").${r}`);for(const r of e)t.addFormat(r,i[r])}a.get=(t,e="full")=>{const r=("fast"===e?i.fastFormats:i.fullFormats)[t];if(!r)throw new Error(`Unknown format "${t}"`);return r},t.exports=e=a,Object.defineProperty(e,"W",{value:!0}),e.default=a}(ku,ku.exports)),ku.exports),Au=en(_u);const ju=new bu({allErrors:!0,allowUnionTypes:!0,strictSchema:!0,strictNumbers:!1,coerceTypes:!1});Au(ju),["color","signature","password","doc","uuid","geo","markdown","asset","date","time","date-time","email","barcode"].forEach((t=>ju.addFormat(t,/./))),["root","parent","basetype","pointer","nullAllowed","transient","trackers","target","enumFetch","isenum","filter","isenumarray","homogeneous","requiredIf","field","from","order","abstract","case","visible","readonly","collapsed","orderBy","expression","change","assets","preview","mimetype","mask","tab","group"].forEach((t=>ju.addKeyword({keyword:t,valid:!0})));const Cu=ju.compile(tn);class zu{parser;errors=[];text="";constructor(t){this.parser=ju.compile(t)}validate(t){const e=this.parser(t);if(this.errors=this.parser.errors??[],wu(this.errors),this.text=ju.errorsText(this.errors),"boolean"==typeof e)return e;throw`Schema validation result not boolean (not expected) ${e}`}static getText(t){return wu(t),ju.errorsText(t)}}class Su extends Qt{constructor(t){super(t,"nullable","upgrade",[])}appliable(t){return this.property in t}apply(t){t.nullable&&(void 0===t.type?t.type=["null"]:Array.isArray(t.type)?t.type=[...t.type,"null"]:t.type=[t.type,"null"]),t[this.property]=void 0}}class Ou extends Qt{constructor(t){super(t,"$id","upgrade",[])}appliable(t){return this.property in t&&t.$id.includes("#")}apply(t){const[e,i]=t.$id.split("#");t.$id=e,t.$anchor=i}}class qu extends Qt{constructor(t){super(t,"dependencies","upgrade",[])}appliable(t){return this.property in t}apply(t){t.dependentRequired={...t[this.property]},t.dependencies=void 0}}class Iu extends Qt{constructor(t){super(t,"items","upgrade",[])}appliable(t){return Array.isArray(t[this.property])}apply(t){t.prefixItems=t[this.property],t.items=void 0}}class Pu extends Qt{constructor(t){super(t,"additionalProperties","upgrade",[])}appliable(t){return!1===t.additionalProperties}apply(t){t.unevaluatedProperties=!1,t.additionalProperties=void 0}}class Tu extends Qt{constructor(t){super(t,"$ref","upgrade",[])}appliable(t){return this.property in t}apply(t){t.$dynamicRef=t[this.property],t.$ref=void 0}}class Nu{static implemented=["draft-07","2019-09","2020-12"];static unimplemented=["draft-06","draft-05","draft-04","draft-03","draft-02"];static DIALECT_DRAF_07="http://json-schema.org/draft-07/schema";static DIALECT_2019_09="https://json-schema.org/draft/2019-09/schema";static DIALECT_2020_12="https://json-schema.org/draft/2020-12/schema";root;dialect;steps;passes={upgrade:[],pre:[],post:[]};errors=[];constructor(t,e,i){if(this.root=t,this.dialect=this.extractDialect(e,t.$schema),Nu.unimplemented.includes(this.dialect))throw Error(`schema dialect '${this.dialect}' not implemented (implmented are draft-07,2019-09 and 2020-12)`);this.steps=[new Tu(this.root),new Pu(this.root),new qu(this.root),new Ou(this.root),new Iu(this.root),new Su(this.root),new Mu(this.root),new Ru(this.root),new Bu(this.root),new Lu(this.root),new Uu(this.root),new Vu(this.root,e),new Hu(this.root),new Zu(this.root),new Gu(this.root),new Ju(this.root),new Ku(this.root),new Wu(this.root),new Qu(this.root),new Yu(this.root,i),new Xu(this.root,"abstract",Wt._abstractFunc()),new tc(this.root,"case",(()=>!1)),new tc(this.root,"visible",(()=>!0)),new tc(this.root,"readonly",(()=>!1)),new tc(this.root,"requiredIf",(()=>!1)),new tc(this.root,"collapsed",(()=>!1)),new tc(this.root,"filter",(()=>!0)),new ec(this.root,"orderBy",(()=>!0)),new ec(this.root,"expression",(()=>"")),new ec(this.root,"change",(()=>""))];for(const t of this.steps)this.passes[t.phase].push(t);this.passes.upgrade=this.topologicalSort(this.passes.upgrade),this.passes.pre=this.topologicalSort(this.passes.pre),this.passes.post=this.topologicalSort(this.passes.post)}extractDialect(t,e){switch(!0){case Nu.unimplemented.some((t=>e?.startsWith(`http://json-schema.org/${t}/schema`))):return Nu.unimplemented.find((t=>e?.includes(t)))??"draft-06";case e?.startsWith(Nu.DIALECT_DRAF_07):return"draft-07";case e?.startsWith(Nu.DIALECT_2019_09):return"2019-09";case e?.startsWith(Nu.DIALECT_2020_12):return"2020-12";case t.dialect&&Nu.implemented.includes(t.dialect):return t.dialect;default:return"2020-12"}}compile(){this.errors=[];for(const t of Object.values(this.passes))this.walkSchema(t,this.root);return Ju.breakCycles(),this.errors}walkSchema(t,e,i,r){for(const s of t)try{s.appliable(e,i,r)&&s.apply(e,i,r)}catch(t){this.errors.push(String(t))}return e.properties?Object.entries(e.properties).forEach((([i,r])=>this.walkSchema(t,r,e,i))):e.items?(e.items.oneOf||e.items.allOf||e.items.anyOf,this.walkSchema(t,e.items,e,"*")):e.oneOf?e.oneOf.forEach((e=>this.walkSchema(t,e,i,r))):e.allOf?e.allOf.forEach((e=>this.walkSchema(t,e,i,r))):e.anyOf?e.anyOf.forEach((e=>this.walkSchema(t,e,i,r))):void 0}topologicalSort(t){function e(s,n){if(!r.has(s.property)){if(n.has(s.property))throw new Error(`Cycle in step dependencies: ${s.property}`);n.add(s.property);for(const i of s.after){const r=t.find((t=>t.property===i));r&&e(r,n)}n.delete(s.property),r.add(s.property),i.push(s)}}const i=[],r=new Set;for(const i of t)e(i,new Set);return i}}class Mu extends Qt{constructor(t){super(t,"$ref","pre",[])}apply(t){const e=t.properties;e&&Object.entries(e).forEach((([t,i])=>i.$ref&&(e[t]=this.definition(i)))),t.items&&t.items.$ref&&(t.items=this.definition(t.items)),t.items&&t.items.oneOf&&(t.items.oneOf=t.items.oneOf.map((t=>t.$ref?this.definition(t):t)))}definition(t){const e=t.$ref;if(!e.startsWith("#/definitions/"))throw this.error(`only '/definitions/<name>' allowed => ${e}]`);if(null==this.root.definitions)throw this.error('No "definitions" property in root schema');const i=e.split("/")[2];if(null==this.root.definitions[i])throw this.error(`No definitions found in schema for ${e}`);const r=this.root.definitions[i],s=Object.assign({},r);return Object.entries(t).forEach((([t,e])=>"$ref"!==t&&(s[t]=e))),Wt.wrapSchema(s)}}class Ru extends Qt{constructor(t){super(t,"parent","pre",[])}appliable(t){return!(this.property in t)}apply(t,e){t.parent=e}}class Bu extends Qt{constructor(t){super(t,"pointer","pre",[])}appliable(t){return!(this.property in t)}apply(t,e,i){t.pointer=e?`${e.pointer}/${i}`:"/"}}class Lu extends Qt{constructor(t){super(t,"root","pre",[])}appliable(t){return!(this.property in t)}apply(t){t.root=this.root}}class Uu extends Qt{static STRINGKW=["minLength","maxLength","pattern","format"];static NUMBERKW=["minimum","maximum","exclusiveMinimum","exclusiveMaximum","multipleOf"];static ARRAYKW=["items","additionalItems","minItems","maxItems","uniqueItems"];static OBJECTKW=["required","properties","additionalProperties","patternProperties","minProperties","maxProperties","dependencies"];static ALL=new Set(["string","integer","number","object","array","boolean","null"]);constructor(t){super(t,"basetype","pre",[])}appliable(t){return!(this.property in t)}apply(t,e,i){switch(t.target=[...this.infer(t)??[]],t.target.length){case 2:if(!t.target.includes("null"))throw Error(`Second type must be "null" : ${zt(e,i)}`);t.basetype=t.target.find((t=>"null"!==t))??t.target[0],t.nullAllowed=!0;break;case 1:t.basetype=t.target[0],t.nullAllowed="null"==t.target[0];break;case 0:t.basetype="null",t.nullAllowed=!1;break;default:throw Error(`multiple types not implemented : ${zt(e,i)}`)}}infer(t){const e=[];if(e.push(Uu.ALL),e.push(this.constKW(t)),e.push(this.typeKW(t)),e.push(this.enumKW(t)),e.push(this.numberKW(t)),e.push(this.stringKW(t)),e.push(this.arrayKW(t)),e.push(this.objectKW(t)),e.push(this.notKW(t)),t.allOf){const i=t.allOf.map((t=>this.infer(t))).filter((t=>null!=t));e.push(_t(i))}if(t.anyOf){const i=t.anyOf.map((t=>this.infer(t))).map((t=>t??Uu.ALL));e.push(At(i))}if(t.oneOf){const i=t.oneOf.map((t=>this.infer(t))).map((t=>t??Uu.ALL));e.push(At(i))}return _t(e.filter((t=>null!=t)))}notKW(t){return t.not?(e=this.infer(t.not),i=Uu.ALL,null==e?new Set:new Set([...i].filter((t=>!e.has(t))))):null;var e,i}enumKW(t){if("enum"in t&&Array.isArray(t.enum)){const e=t.enum.map((t=>null==t?"null":Array.isArray(t)?"array":typeof t));return new Set(e)}return null}typeKW(t){return"type"in t?new Set(Array.isArray(t.type)?t.type:[t.type]):null}constKW(t){if("const"in t){if(null==t.const)return new Set(["null"]);if(Array.isArray(t.const))return new Set(["array"]);const e=Number.isInteger(t.const)?"integer":typeof t.const;return new Set([e])}return null}arrayKW(t){return Uu.ARRAYKW.some((e=>e in t))?new Set(["array"]):null}numberKW(t){return Uu.NUMBERKW.some((e=>e in t))?new Set(["number"]):null}objectKW(t){return Uu.OBJECTKW.some((e=>e in t))?new Set(["object"]):null}stringKW(t){return Uu.STRINGKW.some((e=>e in t))?new Set(["string"]):null}}class Vu extends Qt{preferNull;constructor(t,e){super(t,"empty","pre",["basetype"]),this.preferNull=e?.preferNull??!1}appliable(t){return!(this.property in t)}apply(t){t.empty=t.nullAllowed&&this.preferNull?null:void 0}}class Hu extends Qt{constructor(t){super(t,"isenum","pre",[])}appliable(t){return!(this.property in t)}apply(t){switch(t.isenum=!1,!0){case!Ft(t):break;case!!t.enum:case t.oneOf&&t.oneOf.every((t=>"const"in t)):case t.anyOf&&t.anyOf.every((t=>"const"in t)):t.filter||(t.filter=()=>!0),t.isenum=!0}}}class Zu extends Qt{constructor(t){super(t,"isenumarray","pre",[])}appliable(t){return!(this.property in t)}apply(t){t.isenumarray=Ft(t)&&function(t){if("array"===t.basetype&&t.uniqueItems){if(t.items?.oneOf)return!!t.items.oneOf.every((t=>"const"in t));if(t.items?.anyOf)return!!t.items?.anyOf.every((t=>"const"in t))}return!1}(t)}}class Gu extends Qt{constructor(t){super(t,"homogeneous","pre",["basetype"])}appliable(t){return!(this.property in t)&&"array"===t.basetype}apply(t){t.homogeneous=!t.items?.oneOf}}class Ju extends Qt{static ALL=new Map;constructor(t){super(t,"trackers","pre",["pointer"])}appliable(t){return!(this.property in t)}apply(t){t.trackers=[],Ju.ALL?.set(t.pointer,t.trackers)}static breakCycles(){if(null==Ju.ALL)return;const t=Ju.ALL,e=new Set,i=new Set,r=new Map;for(const[s,n]of t){function o(s){if(i.has(s)){let e=s;const i=new Set;for(;r.has(e)&&!i.has(e);)i.add(e),e=r.get(e);for(const e of i){const i=r.get(e);if(i&&t.has(i)){const r=t.get(i),s=r.indexOf(e);-1!==s&&r.splice(s,1)}}}else if(!e.has(s)){e.add(s),i.add(s);for(const e of t.get(s)||[])r.set(e,s),o(e);i.delete(s)}}0===n.length&&t.delete(s);for(const a of t.keys())e.has(a)||o(a);Ju.ALL=void 0}}}class Ku extends Qt{constructor(t){super(t,"requiredIf","pre",["basetype"])}appliable(t){return"object"===t.basetype&&null!=t.properties&&null!=t.required}apply(t){t.required?.forEach((e=>{t.properties&&e in t.properties&&(t.properties[e].requiredIf="true")}))}}class Wu extends Qt{constructor(t){super(t,"field","pre",["basetype","isenum","isenumarray"])}appliable(t){return!(this.property in t)}apply(t){if("const"in t)return t.field="fz-constant";if(t.from&&Ft(t))return t.filter||(t.filter=()=>!0),t.field="fz-enum-select";if(t.isenum)switch(t.filter||(t.filter=()=>!0),!0){case t.enum&&t.enum?.length<=3:case t.oneOf&&t.oneOf?.length<=3:case t.anyOf&&t.anyOf?.length<=3:return t.field="fz-enum-check";case t.enum&&t.enum?.length<=20:case t.oneOf&&t.oneOf?.length<=20:case t.anyOf&&t.anyOf?.length<=20:return t.field="fz-enum-select";default:return t.field="fz-enum-typeahead"}switch(t.basetype){case"object":return t.field="fz-object";case"array":return t.isenumarray?(t.filter||(t.filter=()=>!0),t.field="fz-enum-array"):t.field="fz-array";case"integer":return t.minimum&&t.maximum&&t.maximum-t.minimum<=10?t.field="fz-range":t.field="fz-integer";case"number":return t.field="fz-float";case"boolean":return t.field="fz-boolean";case"string":if(t.mask)return t.field="fz-mask";switch(t.format){case"uuid":case"uuid":return t.field="fz-uuid";case"signature":return t.field="fz-signature";case"date":return t.field="fz-date";case"time":return t.field="fz-time";case"date-time":return t.field="fz-datetime";case"geo":return t.field="fz-geolocation";case"doc":return t.field="fz-document";case"markdown":return t.field="fz-markdown";case"asset":return t.field="fz-asset"}return!t.format&&t.maxLength&&t.maxLength>256?t.field="fz-textarea":t.field="fz-string"}return t.field="fz-error"}}class Qu extends Qt{constructor(t){super(t,"order","pre",["basetype"])}appliable(t){return!(this.property in t)&&"object"===t.basetype&&null!=t.properties}apply(t){const e=t.properties;if(!e)return;const i=new Map,r=new Map;let s=0;const n=Object.entries(e).map((([t,e])=>{e.tab&&!r.has(e.tab)&&r.set(e.tab,s);const n=e.tab?r.get(e.tab):s;e.group&&!i.has(e.group)&&i.set(e.group,s);return{tabnum:n,groupnum:e.group?i.get(e.group):s,fieldnum:s++,fieldname:t,schema:e,tabname:e.tab??"",groupname:e.group??""}}));n.sort(((t,e)=>{const i=Math.min(t.tabnum,t.groupnum,t.fieldnum)-Math.min(e.tabnum,e.groupnum,e.fieldnum);return 0===i?t.fieldnum-e.fieldnum:i})),t.order=n}}class Yu extends Qt{data;constructor(t,e){super(t,"from","post",["pointer","trackers"]),this.data=e}appliable(t){return gt(t.from)&&!Dt(t.from)}apply(t){const e=t.from;t.from=()=>null;const i=e.pointer.replace(/\/[^/]+$/,""),r=e.pointer.substr(i.length+1);t._track(`$\`${i}\``),t.from=(t,s,n,o,a)=>{const u=Ct(this.data,n,o,i);return u?Et(u)?{pointer:i,name:r,target:u,schema:Tt(u),extend:!!e.extend}:[]:null}}}class Xu extends Qt{defunc;constructor(t,e,i){super(t,e,"post",[]),this.defunc=i}appliable(t){return this.property in t&&"string"==typeof t[this.property]}apply(t,e,i){const r=t[this.property];if(this.set(t,this.defunc),yt(r)){const e=`\n                ${this.sourceURL(i)}\n                try { \n                    return nvl\`${r}\`\n                } catch(e) {  \n                    console.error(\n                        \` eval for keyword "${this.property}" failed field:\${parent?.pointer ?? ""} -> \${property ?? ""}\n\`,\n                        \`    => \${String(e)}\`) \n                }\n                return ''\n            `;this.compileExpr(t,r,e)}}}class tc extends Qt{defaultFunc;constructor(t,e,i){super(t,e,"post",[]),this.defaultFunc=i}appliable(t){return this.property in t&&"boolean"==typeof t[this.property]}apply(t,e,i){const r=t[this.property];if(this.set(t,this.defaultFunc),bt(r)||wt(r))return this.set(t,(()=>r));if(!yt(r))return this.set(t,(()=>!!r));const s=`\n            ${this.sourceURL(i)}\n            try {  \n                const result = (${r}) \n                return result === null ? result : !!result\n            } catch(e) {  \n                console.error(\n                    \` eval for keyword "${this.property}" failed field:\${parent?.pointer ?? ""} -> \${property ?? ""}\n\`,\n                    \`    => \${String(e)}\`) \n            }\n            return true\n        `;this.compileExpr(t,r,s)}}class ec extends Qt{defaultFunc;constructor(t,e,i){super(t,e,"post",[]),this.defaultFunc=i}appliable(t){return this.property in t&&"function"!=typeof t[this.property]}apply(t,e,i){const r=t[this.property];if(this.set(t,this.defaultFunc),!yt(r)&&!Et(r))return this.set(t,(()=>r));let s="return null";s=yt(r)?`return ${r}`:this.buildCode(r);const n=`\n            ${this.sourceURL(i)}\n            try {\n                ${s} \n            } catch(e) {  \n                console.error(\n                    \` eval for keyword "${this.property}" failed field:\${parent?.pointer ?? ""} -> \${property ?? ""}\n\`,\n                    \`    => \${String(e)}\`) }\n            return null\n        `;this.compileExpr(t,r,n)}}class ic{data;schema;steps;errors=[];constructor(t,e){this.data=t,this.schema=e,this.steps=[(t,e,i,r)=>{(kt(e)||Et(e))&&(e[Rt]=t,e[Bt]=i,e[Lt]=r,e[Ut]=e)}]}compile(){return this.errors=[],this.walkData(this.schema,this.data),this.errors}walkData(t,e,i,r){if(null!=t&&null!=e){try{this.steps.forEach((s=>s(t,e,i,r)))}catch(t){this.errors.push(String(t))}if(Et(e))t.homogeneous?e.forEach(((i,r)=>this.walkData(t.items,i,e,r))):e.forEach(((i,r)=>{t.items?.oneOf?.forEach((t=>{t.case&&t.case(null,i,e,r,(()=>null))&&this.walkData(t,i,e,r)}))}));else if(kt(e)&&t.properties)for(const i in e){const r=t.properties[i],s=e[i];this.walkData(r,s,e,i)}else;}}}class rc{store;constructor(t){this.store=t}async put(t,e,i,r){try{return this.store.put?.(t,e,i,r)}catch(t){}}async remove(t){try{return this.store.remove?.(t)}catch(t){}}async get(t){try{return this.store.get?.(t)??null}catch(t){return}}}class sc{store=new Map;async put(t,e,i,r){this.store.set(t,{uuid:t,blob:e,filename:i})}async remove(t){await this.store.delete(t)}async get(t){return this.store.get(t)}}let nc=class extends Zt{static get styles(){return[...super.styles]}obj={content:{}};#v={};get i_options(){return this.#v}set i_options(t){this.#v=t}store=new sc;asset;fieldMap=new Map;schemaMap=new Map;#w=Xt;get i_schema(){return this.#w}set i_schema(t){this.#w=t}#k=!1;get actions(){return this.#k}set actions(t){this.#k=t}#E=!1;get readonly(){return this.#E}set readonly(t){this.#E=t}#D=!1;get checkIn(){return this.#D}set checkIn(t){this.#D=t}#x=!1;get checkOut(){return this.#x}set checkOut(t){this.#x=t}oninit=null;onready=null;onvaliddata=null;oninvaliddata=null;onvalidate=null;ondismiss=null;schemaErrors=[];dataErrors=[];validator;message="";constructor(){super(),["oninit","onready","onvaliddata","oninvaliddata","onvalidate","ondismiss"].forEach((t=>{this.constructor.elementProperties.get(t).converter=e=>(function(t,e,i){if(i){const r=window[i];"function"==typeof r&&t.addEventListener(e,r)}}(this,t.substring(2),e),e)}))}get root(){return this.obj.content}get valid(){return this.validator?.validate(this.root)??!1}get schema(){return this.i_schema}set schema(t){var e;this.i_schema=(e=t,Cu&&Cu(e)?new Wt(JSON.parse(JSON.stringify(t))):Xt),this.i_schema.collapsed=!1,this.schemaErrors=(wu(Cu?.errors),Cu?.errors??[]),this.validator=new zu(this.i_schema),this.compile(),this.requestUpdate()}get options(){return this.i_options}set options(t){this.i_options=t,this.i_options?.storage&&(this.store=new rc(this.i_options.storage)),this.i_options?.asset&&(this.asset=this.i_options.asset)}get data(){return JSON.parse(JSON.stringify(this.root))}set data(t){this.schemaErrors.length>0||(this.dataErrors=this.checkIn&&this.validator.validate(t)?this.validator?.errors??[]:[],this.obj.content=0==this.dataErrors.length?t:{},this.compile(),this.requestUpdate())}attributeChangedCallback(t,e,i){if(super.attributeChangedCallback(t,e,i),"schema"===t){const t=Yt.fromAttribute(i);this.schema=t}}getField(t){return this.fieldMap.get(t)}addField(t,e,i){this.schemaMap.set(t,i),this.fieldMap.set(e,i)}removeField(t,e){this.schemaMap.delete(t),this.fieldMap.delete(e)}getfieldFromSchema(t){return this.schemaMap.get(t)}updateField(t){this.getField(t)?.requestUpdate()}render(){return this.schemaErrors.length>0||this.dataErrors.length>0?this.renderError():this.renderForm()}renderForm(){return Q`
            ${Array.isArray(this.root)?Q`<fz-array pointer="" name="content"  .data="${this.obj}" .schema="${this.schema}"></fz-array>`:Q`<fz-object  pointer="" name="content" .data="${this.obj}" .schema="${this.schema}"></fz-object>`}
            ${this.renderButtons()}`}renderButtons(){return this.actions?Q`
            <hr>
            <div class="d-grid gap-2 d-sm-block justify-content-md-end">
                <button class="btn btn-primary" type="button" @click=${this.confirm}>Ok</button>
                <button class="btn btn-danger" type="button" @click=${this.cancel} >Cancel</button>
            </div>`:null}renderError(){const t=t=>Q`<li>property : ${null==t.dataPath?t.instancePath:t.dataPath} : ${t.keyword}  ${t.message}</li>`;return[Q`<hr>`,this.schemaErrors.length?Q`<pre><ol> Schema errors : ${this.schemaErrors.map(t)} </ol></pre>`:Q``,this.dataErrors.length?Q`<pre><ol> Data errors : ${this.dataErrors.map(t)} </ol></pre>`:Q``]}connectedCallback(){super.connectedCallback(),this.listen(this,"data-updated",(t=>this.handleDataUpdate(t))),this.dispatchEvent(new CustomEvent("init"))}disconnectedCallback(){super.disconnectedCallback(),this.removeEventListener("data-updated",(t=>this.handleDataUpdate(t)))}firstUpdated(t){super.firstUpdated(t)}check(){const t=new Map,e=this.validator?.validate(this.root);if(wt(e)&&!e)for(const e of this.validator.errors){let{instancePath:i,message:r,params:s,keyword:n}=e;i=`/${i}`,"required"===n&&(i=`/${s.missingProperty}`,r="required"),t.has(i)||t.set(i,[]),t.get(i)?.push(r??"unidentified error")}for(const[e,i]of this.fieldMap.entries())i.errors!=Ht&&(i.errors=t.get(e)??Vt)}handleDataUpdate(t){if(this===t.composedPath()[0])return;t.detail.trackers.forEach((t=>{const e=this.getfieldFromSchema(t);e?.trackedValueChange()}))}confirm(t){t.preventDefault(),t.stopPropagation();const e=new CustomEvent("validate");this.dispatchEvent(e)}cancel(t){t.preventDefault(),t.stopPropagation();const e=new CustomEvent("dismiss");this.dispatchEvent(e)}compile(){const t=new Nu(this.schema,this.options,this.obj.content).compile();if(t.length>0)return void(this.message=`Schema compilation failed: \n    - ${t.join("\n    - ")}`);const e=new ic(this.obj.content,this.schema).compile();e.length>0&&(this.message=`Data compilation failed: \n    - ${e.join("\n    - ")}`),this.dispatchEvent(new CustomEvent("ready"))}debug(t){const e=this.fieldMap.get(t);if(!e)throw new Error(`No field found for pointer: ${t}`);if(!e.data||!e.key)throw new Error(`Field at ${t} has no parent/key`);const i=e.data,r=e.key;let s=i[r];Object.defineProperty(i,r,{get:()=>s,set(t){s=t},configurable:!0,enumerable:!0})}static async registerBootstrap(t="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css",e="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css",i="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/fonts/bootstrap-icons.woff2?1fa40e8900654d2863d011707b9fb6f2"){let r,s,n;if(yt(t)){const e=await fetch(t).then((t=>t.ok?t.text():"")).catch((t=>""));r=new CSSStyleSheet,r.replaceSync(e.replaceAll(":root",":host, :root"))}else r=t;if(yt(e)){const t=await fetch(e).then((t=>t.ok?t.text():"")).catch((t=>""));s=new CSSStyleSheet,s.replaceSync(t.replaceAll(":root",":host, :root"))}else s=e;n=yt(i)?new FontFace("bootstrap-icons",`url("${i}")`):i;const o=await n.load();document.fonts.add(o),Zt.sheets=[r,s]}};t([F({type:Object,attribute:"schema",converter:Yt})],nc.prototype,"i_schema",null),t([F({type:Boolean,attribute:"actions"})],nc.prototype,"actions",null),t([F({type:Boolean,attribute:"readonly"})],nc.prototype,"readonly",null),t([F({type:Boolean,attribute:"checkin"})],nc.prototype,"checkIn",null),t([F({type:Boolean,attribute:"checkout"})],nc.prototype,"checkOut",null),t([F({type:String,attribute:"oninit",converter:t=>t})],nc.prototype,"oninit",void 0),t([F({type:String,attribute:"onready",converter:t=>t})],nc.prototype,"onready",void 0),t([F({type:String,attribute:"onvaliddata",converter:t=>t})],nc.prototype,"onvaliddata",void 0),t([F({type:String,attribute:"oninvaliddata",converter:t=>t})],nc.prototype,"oninvaliddata",void 0),t([F({type:String,attribute:"onvalidate",converter:t=>t})],nc.prototype,"onvalidate",void 0),t([F({type:String,attribute:"ondismiss",converter:t=>t})],nc.prototype,"ondismiss",void 0),nc=t([e("fz-form")],nc),window.FzForm=nc;export{nc as FzForm,Ss as FzMarkdownIt};
